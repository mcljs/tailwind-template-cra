/*! For license information please see moncon.js.LICENSE.txt */
(()=>{var t={2354:(t,e,n)=>{"use strict";n(7659),n(2064),n(3718),n(2776),n(419),n(7573),n(9034),n(2378),n(6915),n(3137),n(4740),n(2320),n(7942),n(3747)},3747:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new N(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===v){if("throw"===i)throw o;return O()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=C(s,n);if(a){if(a===y)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?v:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var f="suspendedStart",p="suspendedYield",d="executing",v="completed",y={};function g(){}function m(){}function b(){}var w={};w[s]=function(){return this};var _=Object.getPrototypeOf,E=_&&_(_(x([])));E&&E!==n&&i.call(E,s)&&(w=E);var S=b.prototype=g.prototype=Object.create(w);function I(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,s,a,u){var c=l(t[o],t,s);if("throw"!==c.type){var h=c.arg,f=h.value;return f&&"object"===r(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function x(t){if(t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:e,done:!0}}return m.prototype=S.constructor=b,b.constructor=m,m.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},I(T.prototype),T.prototype[a]=function(){return this},t.AsyncIterator=T,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new T(h(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},I(S),c(S,u,"Generator"),S[s]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var u=i.call(s,"catchLoc"),c=i.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:x(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}("object"===r(t=n.nmd(t))?t.exports:{});try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},6425:(t,e,n)=>{"use strict";n.d(e,{Z:()=>E});var r,i=n(7480),o=n(1106),s=n(788),a=n(9628);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c,h=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.LL("app","Firebase",h),f="@firebase/app",p="[DEFAULT]",d=((c={})[f]="fire-core",c["@firebase/analytics"]="fire-analytics",c["@firebase/auth"]="fire-auth",c["@firebase/database"]="fire-rtdb",c["@firebase/functions"]="fire-fn",c["@firebase/installations"]="fire-iid",c["@firebase/messaging"]="fire-fcm",c["@firebase/performance"]="fire-perf",c["@firebase/remote-config"]="fire-rc",c["@firebase/storage"]="fire-gcs",c["@firebase/firestore"]="fire-fst",c["fire-js"]="fire-js",c["firebase-wrapper"]="fire-js-all",c),v=new a.Yd("@firebase/app"),y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,o.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=p),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=p),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){v.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===u(i)&&null!==i||(i={name:i});var s=i;void 0===s.name&&(s.name=p);var a=s.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,o.r3)(e,a))throw l.create("duplicate-app",{appName:a});var c=new t(n,s,r);return e[a]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void v.warn(u.join(" "))}c(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:a.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,a.Am)(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||p,!(0,o.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(s){var a=s.name;if(n.has(a))return v.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===s.type?r[a]:null;if(n.set(a,s),"PUBLIC"===s.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==s.serviceProps&&(0,o.ZB)(u,s.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,s.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(s)}return"PUBLIC"===s.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(y);return e.INTERNAL=(0,i.pi)((0,i.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,o.ZB)(e,t)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,o.jU)()&&void 0!==self.firebase){v.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var b=self.firebase.SDK_VERSION;b&&b.indexOf("LITE")>=0&&v.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var w=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.UG)()&&v.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),w.apply(void 0,t)};var _=g;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new m(t)}),"PRIVATE")),t.registerVersion(f,"0.6.15",void 0),t.registerVersion("fire-js","")}(_);const E=_},788:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u,zt:()=>a});var r=n(7480),i=n(1106),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:s,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(t){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[0],c=a[1],h=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService(h);c.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.fl)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},8897:(t,e,n)=>{"use strict";var r=n(6425),i=n(7480),o=n(1106),s=n(9628),a=n(788);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=n.hmd(t);var c,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(t){}return new l},p=f("localStorage"),d=f("sessionStorage"),v=new s.Yd("@firebase/database"),y=(c=1,function(){return c++}),g=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},m=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var s=e[i];Array.isArray(s)||s&&"object"===u(s)&&"number"==typeof s.length?r+=t.apply(null,s):"object"===u(s)?r+=(0,o.Pz)(s):r+=s,r+=" "}return r},b=null,w=!0,_=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=s.in.VERBOSE,b=v.log.bind(v),e&&d.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,d.remove("logging_enabled"))},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===d.get("logging_enabled")&&_(!0)),b){var n=m.apply(null,t);b(n)}},S=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];E.apply(void 0,(0,i.fl)([t],e))}},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,(0,i.fl)(t));v.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,(0,i.fl)(t));throw v.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,(0,i.fl)(t));v.warn(n)},k=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",N="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===A||e===N)return-1;if(e===A||t===N)return 1;var n=j(t),r=j(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},O=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},R=function t(e){if("object"!==u(e)||null===e)return(0,o.Pz)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",s=0;s<n.length;s++)0!==s&&(i+=","),i+=(0,o.Pz)(n[s]),i+=":",i+=t(e[n[s]]);return i+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function M(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L=function(t){(0,o.hu)(!k(t),"Invalid JSON number");var e,n,r,i,s;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var h=parseInt(u.substr(s,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),j=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw C("Exception was thrown by user callback.",e),t}),Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"===u(n)&&n.unref&&n.unref(),n},B=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function q(){return new B("")}function G(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function z(t){return t.pieces_.length-t.pieceNum_}function H(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new B(t.pieces_,e)}function W(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function K(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function J(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Q(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new B(e,0)}function Y(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof B)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new B(n,0)}function X(t){return t.pieceNum_>=t.pieces_.length}function Z(t,e){var n=G(t),r=G(e);if(null===n)return e;if(n===r)return Z(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $(t,e){for(var n=J(t,0),r=J(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function tt(t,e){if(z(t)!==z(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(z(t)>z(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var nt,rt,it,ot,st,at,ut,ct,ht,lt=function(){function t(t,e){this.errorPrefix_=e,this.parts_=J(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=(0,o.ug)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=(0,o.ug)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),ft=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pt="websocket",dt="long_polling",vt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if((0,o.hu)("string"==typeof t,"typeof type must == string"),(0,o.hu)("object"===u(e),"typeof params must == object"),t===pt)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==dt)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return M(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}(),yt=function(t,e){var n=gt(t),r=n.namespace;"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new vt(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new B(n.pathString)}},gt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));var l=t.indexOf("/");-1===l&&(l=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(l,f)),l<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=(0,i.XA)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(h=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(h+1),10)):h=e.length;var d=e.slice(0,h);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},mt=/[\[\].#$\/\u0000-\u001F\u007F]/,bt=/[\[\].#$\u0000-\u001F\u007F]/,wt=10485760,_t=function(t){return"string"==typeof t&&0!==t.length&&!mt.test(t)},Et=function(t){return"string"==typeof t&&0!==t.length&&!bt.test(t)},St=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!k(t)||t&&"object"===u(t)&&(0,o.r3)(t,".sv")},It=function(t,e,n,r,i){i&&void 0===n||Tt((0,o.gK)(t,e,i),n,r)},Tt=function t(e,n,r){var i=r instanceof B?new lt(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(k(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>wt/3&&(0,o.ug)(n)>wt)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"===u(n)){var s=!1,a=!1;if(M(n,(function(n,r){if(".value"===n)s=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!_t(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()})),s&&a)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},Ct=function(t,e,n,r,i){if(!i||void 0!==n){var s=(0,o.gK)(t,e,i);if(!n||"object"!==u(n)||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];M(n,(function(t,e){var n=new B(t);if(Tt(s,e,Y(r,n)),".priority"===W(n)&&!St(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=J(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_t(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},kt=function(t,e,n,r){if(!r||void 0!==n){if(k(n))throw new Error((0,o.gK)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!St(n))throw new Error((0,o.gK)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},At=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Nt=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error((0,o.gK)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xt=function(t,e,n,r){if(!(r&&void 0===n||Et(n)))throw new Error((0,o.gK)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ot=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xt(t,e,n,r)},Pt=function(t,e){if(".info"===G(e))throw new Error(t+" failed = Can't modify data under /.info/")},Rt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_t(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Et(t)}(r))throw new Error((0,o.gK)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Dt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e,r)+"must be a boolean.")},Mt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel",1,t,!0);var e=new o.BH;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),Pt("OnDisconnect.remove",this.path_),(0,o.Wj)("OnDisconnect.remove",1,t,!0);var e=new o.BH;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),Pt("OnDisconnect.set",this.path_),It("OnDisconnect.set",1,t,this.path_,!1),(0,o.Wj)("OnDisconnect.set",2,e,!0);var n=new o.BH;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),Pt("OnDisconnect.setWithPriority",this.path_),It("OnDisconnect.setWithPriority",1,t,this.path_,!1),kt("OnDisconnect.setWithPriority",2,e,!1),(0,o.Wj)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.BH;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Pt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ct("OnDisconnect.update",1,t,this.path_,!1),(0,o.Wj)("OnDisconnect.update",2,e,!0);var i=new o.BH;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Lt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ft="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jt=(nt=0,rt=[],function(t){var e,n=t===nt;nt=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Ft.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===rt[e];e--)rt[e]=0;rt[e]++}else for(e=0;e<12;e++)rt[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Ft.charAt(rt[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),Ut=function(t){if("2147483647"===t)return"-";var e=j(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return N;var o=n[i],s=Ft.charAt(Ft.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},Vt=function(t){if("-2147483648"===t)return A;var e=j(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Ft.charAt(Ft.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),qt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Bt(A,t),r=new Bt(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Bt.MIN},t}(),Gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return it},set:function(t){it=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(N,it)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Bt(t,it)},e.prototype.toString=function(){return".key"},e}(qt),zt=new Gt,Ht=function(t){return"number"==typeof t?"number:"+L(t):"string:"+t},Wt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"===u(e)&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===ot||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===ot||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Kt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Wt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return st},set:function(t){st=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return X(e)?this:".priority"===G(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=G(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===z(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ht(this.priorityNode_.val())+":");var e=u(this.value_);t+=e+":",t+="number"===e?L(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=u(e.value_),r=u(this.value_),i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Jt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(N,new Kt("[PRIORITY-POST]",ut))},e.prototype.makePost=function(t,e){var n=at(t);return new Bt(e,new Kt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(qt)),Qt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Yt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Zt.EMPTY_NODE,this.right=null!=o?o:Zt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Zt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Zt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Xt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Yt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Zt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Yt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Qt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Qt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Qt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Qt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Xt,t}(),$t=Math.log(2),te=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/$t,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function e(r,i){var o,s,a=i-r;if(0===a)return null;if(1===a)return o=t[r],s=n?n(o):o,new Yt(s,o.node,Yt.BLACK,null,null);var u=parseInt(a/2,10)+r,c=e(r,u),h=e(u+1,i);return o=t[u],s=n?n(o):o,new Yt(s,o.node,Yt.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new Yt(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,Yt.BLACK):(a(l,Yt.BLACK),a(l,Yt.RED))}return o}(new te(t.length));return new Zt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ne&&Jt,"ChildrenNode.ts has not been loaded"),ct=ct||new t({".priority":ne},{".priority":Jt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Zt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==zt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Bt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?ee(s,e.getCompare()):ne;var h=e.toString(),l=(0,i.pi)({},this.indexSet_);l[h]=e;var f=(0,i.pi)({},this.indexes_);return f[h]=r,new t(f,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,(function(t,i){var s=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(s,"Missing index implementation for "+i),t===ne){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Bt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ee(a,s.getCompare())}return ne}var h=n.get(e.name),l=t;return h&&(l=l.remove(new Bt(e.name,h))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,(function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Bt(e.name,r)):t})),this.indexSet_)},t}();function ie(t,e){return x(t.name,e.name)}function oe(t,e){return x(t,e)}var se=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Wt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ht||(ht=new t(new Zt(oe),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ht},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ht:e},t.prototype.getChild=function(t){var e=G(t);return null===e?this:this.getImmediateChild(e).getChild(H(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Bt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?ht:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=G(t);if(null===n)return e;(0,o.hu)(".priority"!==G(t)||1===z(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(H(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ht(this.getPriority().val())+":"),this.forEachChild(Jt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ae?-1:0},t.prototype.withIndex=function(e){if(e===zt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===zt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Jt),r=e.getIterator(Jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===zt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ae=new(function(t){function e(){return t.call(this,new Zt(oe),se.EMPTY_NODE,re.Default)||this}return(0,i.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return se.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(se));function ue(t,e){if(void 0===e&&(e=null),null===t)return se.EMPTY_NODE;if("object"===u(t)&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"===u(e)&&".sv"in e,"Invalid priority type found: "+u(e)),"object"===u(t)&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==u(t)||".sv"in t)return new Kt(t,ue(e));if(t instanceof Array){var n=se.EMPTY_NODE;return M(t,(function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=ue(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(ue(e))}var r=[],i=!1;if(M(t,(function(t,e){if("."!==t.substring(0,1)){var n=ue(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Bt(t,n)))}})),0===r.length)return se.EMPTY_NODE;var s=ee(r,ie,(function(t){return t.name}),oe);if(i){var a=ee(r,Jt.getCompare());return new se(s,ue(e),new re({".priority":a},{".priority":Jt}))}return new se(s,ue(e),re.Default)}Object.defineProperties(Bt,{MIN:{value:new Bt(A,se.EMPTY_NODE)},MAX:{value:new Bt(N,ae)}}),Gt.__EMPTY_NODE=se.EMPTY_NODE,Kt.__childrenNodeConstructor=se,ot=ae,ut=ae,function(t){at=t}(ue);var ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return Bt.MAX},e.prototype.makePost=function(t,e){var n=ue(t);return new Bt(e,n)},e.prototype.toString=function(){return".value"},e}(qt)),he=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!X(e)&&".priority"!==G(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,i.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ue(t),r=se.EMPTY_NODE.updateChild(this.indexPath_,n);return new Bt(e,r)},e.prototype.maxPost=function(){var t=se.EMPTY_NODE.updateChild(this.indexPath_,ae);return new Bt(N,t)},e.prototype.toString=function(){return J(this.indexPath_,0).join("/")},e}(qt),le=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),xt("DataSnapshot.child",1,e,!1);var n=new B(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Jt)},t.prototype.hasChild=function(t){(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),xt("DataSnapshot.hasChild",1,t,!1);var e=new B(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if((0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Jt))}))},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),fe=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),pe=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),de=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new fe("value",this,new le(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new pe(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),ve=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,(0,o.r3)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new pe(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new fe(t.type,this,new le(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){(0,o.hu)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();function ye(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function be(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var we,_e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(be(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Jt,(function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))})),e.isLeafNode()||e.forEachChild(Jt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be(e,r,i))}else n.trackChildChange(ge(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?se.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Bt(e,n))||(n=se.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=se.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(se.EMPTY_NODE);var i=this;return e.forEachChild(Jt,(function(t,e){i.matches(new Bt(t,e))||(r=r.updateImmediateChild(t,se.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Se=function(){function t(t){this.rangedFilter_=new Ee(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Bt(e,n))||(n=se.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=se.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=se.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(se.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,se.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Bt(e,n),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,h,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(be(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(me(e,f));var v=u.updateImmediateChild(e,se.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(ge(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?t:l&&s(h,c)>=0?(null!=i&&(i.trackChildChange(me(h.name,h.node)),i.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(h.name,se.EMPTY_NODE)):t},t}(),Ie=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Te(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Ce(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function ke(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ae(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=Ut(e)),r=ke(t,e,n)):r=ke(t,e,null==n?N:Ut(n)),r.startAfterSet_=!0,r}function Ne(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function xe(t,e,n){var r;return t.index_===zt?("string"==typeof e&&(e=Vt(e)),r=Ne(t,e,n)):r=Ne(t,e,null==n?A:Vt(n)),r.endBeforeSet_=!0,r}function Oe(t,e){var n=t.copy();return n.index_=e,n}function Pe(t){var e,n={};return t.isDefault()||(t.index_===Jt?e="$priority":t.index_===ce?e="$value":t.index_===zt?e="$key":((0,o.hu)(t.index_ instanceof he,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var Re=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,o.hu)(we,"Reference.ts has not been loaded"),we},set:function(t){we=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===zt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==N)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Jt){if(null!=e&&!St(e)||null!=n&&!St(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof he||t.getIndex()===ce,"unknown index type."),null!=e&&"object"===u(e)||null!=n&&"object"===u(n))throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return(0,o.Dv)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){(0,o.Dv)("Query.on",2,4,arguments.length),At("Query.on",1,e,!1),(0,o.Wj)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new de(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new ve(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){(0,o.Dv)("Query.off",0,3,arguments.length),At("Query.off",1,t,!0),(0,o.Wj)("Query.off",2,e,!0),(0,o.lb)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new de(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new ve(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;(0,o.Dv)("Query.once",1,4,arguments.length),At("Query.once",1,e,!1),(0,o.Wj)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.BH;c.promise.catch((function(){}));var h=function t(r){u&&(u=!1,s.off(e,t),n&&n.bind(a.context)(r),c.resolve(r))};return this.on(e,h,(function(t){s.off(e,h),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if((0,o.Dv)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Te(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if((0,o.Dv)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Ce(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if((0,o.Dv)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');xt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new B(e);if(X(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new he(n),i=Oe(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){(0,o.Dv)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Oe(this.queryParams_,zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Oe(this.queryParams_,Jt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){(0,o.Dv)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Oe(this.queryParams_,ce);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),It("Query.startAt",1,e,this.path,!0),Nt("Query.startAt",2,n,!0);var r=ke(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),It("Query.startAfter",1,e,this.path,!1),Nt("Query.startAfter",2,n,!0);var r=Ae(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),It("Query.endAt",1,e,this.path,!0),Nt("Query.endAt",2,n,!0);var r=Ne(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),It("Query.endBefore",1,e,this.path,!1),Nt("Query.endBefore",2,n,!0);var r=xe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if((0,o.Dv)("Query.equalTo",1,2,arguments.length),It("Query.equalTo",1,t,this.path,!1),Nt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this.repo.toString()+K(this.path)},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Jt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=R(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=tt(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,(0,o.Wj)(t,3,r.cancel,!0),r.context=n,(0,o.lb)(t,4,r.context,!0);else if(e)if("object"===u(e)&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),De=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Me=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Y(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Le=function(t,e,n){return t&&"object"===u(t)?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Fe(t[".sv"],e,n):"object"===u(t[".sv"])?je(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Fe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},je=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Ue=function(t,e,n,r){return Be(e,new Me(n,t),r)},Ve=function(t,e,n){return Be(t,new De(e),n)};function Be(t,e,n){var r,i=t.getPriority().val(),o=Le(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Le(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Kt(a,ue(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Kt(o))),u.forEachChild(Jt,(function(t,i){var o=Be(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var qe,Ge=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!X(t)&&this.children.size>0){var e=G(t);return t=H(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(X(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=G(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=H(e),i.remember(e,n)}},t.prototype.forget=function(t){if(X(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Jt,(function(t,e){n.remember(new B(t),e)})),this.forget(t)}if(this.children.size>0){var r=G(t);return t=H(t),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new B(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();function ze(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(qe||(qe={}));var He,We=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=qe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(X(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new B(e));return new t(q(),n,this.revert)}return(0,o.hu)(G(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)},t}(),Ke=function(){function t(t,e){void 0===e&&(He||(He=new Zt(O)),e=He),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return M(e,(function(t,e){n=n.set(new B(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:q(),value:this.value};if(X(t))return null;var n=G(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(H(t),e);return null!=i?{path:Y(new B(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(X(e))return this;var n=G(e),r=this.children.get(n);return null!==r?r.subtree(H(e)):new t(null)},t.prototype.set=function(e,n){if(X(e))return new t(n,this.children);var r=G(e),i=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(X(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=G(e),r=this.children.get(n);if(r){var i=r.remove(H(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(X(t))return this.value;var e=G(t),n=this.children.get(e);return n?n.get(H(t)):null},t.prototype.setTree=function(e,n){if(X(e))return n;var r,i=G(e),o=(this.children.get(i)||new t(null)).setTree(H(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(q(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Y(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,q(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(X(t))return null;var i=G(t),o=this.children.get(i);return o?o.findOnPath_(H(t),Y(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,q(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(X(e))return this;this.value&&r(n,this.value);var i=G(e),o=this.children.get(i);return o?o.foreachOnPath_(H(e),Y(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(q(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Y(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Je=function(){function t(t,e){this.source=t,this.path=e,this.type=qe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return X(this.path)?new t(this.source,q()):new t(this.source,H(this.path))},t}(),Qe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=qe.OVERWRITE}return t.prototype.operationForChild=function(e){return X(this.path)?new t(this.source,q(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)},t}(),Ye=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=qe.MERGE}return t.prototype.operationForChild=function(e){if(X(this.path)){var n=this.children.subtree(new B(e));return n.isEmpty()?null:n.value?new Qe(this.source,q(),n.value):new t(this.source,q(),n)}return(0,o.hu)(G(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Xe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(X(t))return this.isFullyInitialized()&&!this.filtered_;var e=G(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ze=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Xe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Xe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),$e=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,be(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),tn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),en=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Xe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),nn=function(t,e){this.viewCache=t,this.changes=e},rn=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){(0,o.hu)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),(0,o.hu)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new $e;if(n.type===qe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!X(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===qe.MERGE){var h=n;h.source.fromUser?s=this.applyUserMerge_(e,h.path,h.children,r,i,u):((0,o.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,h.path,h.children,r,i,a,u))}else if(n.type===qe.ACK_USER_WRITE){var l=n;s=l.revert?this.revertUserWrite_(e,l.path,r,i,u):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,u)}else{if(n.type!==qe.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new nn(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ye(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(X(e))if((0,o.hu)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),h=c instanceof se?c:se.EMPTY_NODE,l=n.calcCompleteEventChildren(h);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),f,i)}else{var p=G(e);if(".priority"===p){(0,o.hu)(1===z(e),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=v?this.filter_.updatePriority(d,v):s.getNode()}else{var y=H(e),g=void 0;if(s.isCompleteForChild(p)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);g=null!=m?s.getNode().getImmediateChild(p).updateChild(y,m):s.getNode().getImmediateChild(p)}else g=n.calcCompleteChild(p,t.getServerCache());a=null!=g?this.filter_.updateChild(s.getNode(),p,g,y,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||X(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(X(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=G(e);if(!u.isCompleteForPath(e)&&z(e)>1)return t;var f=H(e),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,tn,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||X(e),c.filtersNodes()),v=new en(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new en(r,t,i);if(X(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=G(e);if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=H(e),f=u.getNode().getImmediateChild(h),p=void 0;if(X(l))p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===W(l)&&d.getChild(Q(l)).isEmpty()?d:d.updateChild(l,n):se.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var h=Y(n,r);t.cacheHasChild_(e,G(h))&&(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),r.foreach((function(r,c){var h=Y(n,r);t.cacheHasChild_(e,G(h))||(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=X(e)?n:new Ke(null).setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new B(e),l,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new B(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(X(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(X(e)){var u=new Ke(null);return a.getNode().forEachChild(zt,(function(t,e){u=u.set(new B(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new Ke(null);return n.foreach((function(t,n){var r=Y(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||X(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,tn,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new en(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(X(e)||".priority"===G(e)){var h=void 0;if(t.getServerCache().isFullyInitialized())h=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();(0,o.hu)(l instanceof se,"serverChildren would be complete if leaf node"),h=n.calcCompleteEventChildren(l)}h=h,c=this.filter_.updateFullNode(u,h,i)}else{var f=G(e),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,H(e),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,se.EMPTY_NODE,H(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(q()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),on=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function sn(t,e,n,r,i,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Bt(e.childName,e.snapshotNode),i=new Bt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}var an,un=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new Se(n):new Ee(n);this.processor_=new rn(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(se.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(se.EMPTY_NODE,a.getNode(),null),h=new Xe(u,s.isFullyInitialized(),i.filtersNodes()),l=new Xe(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new Ze(l,h),this.eventGenerator_=new on(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!X(t)&&!e.getImmediateChild(G(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){(0,o.hu)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===qe.MERGE&&null!==t.source.queryId&&((0,o.hu)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),(0,o.hu)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),(0,o.hu)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Jt,(function(t,e){n.push(ge(t,e))})),e.isFullyInitialized()&&n.push(ye(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),sn(t,i,"child_removed",e,r,n),sn(t,i,"child_added",e,r,n),sn(t,i,"child_moved",o,r,n),sn(t,i,"child_changed",e,r,n),sn(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,r)},t}(),cn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return(0,o.hu)(an,"Reference.ts has not been loaded"),an},set:function(t){(0,o.hu)(!an,"__referenceConstructor has already been defined"),an=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return(0,o.hu)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var h=(0,i.XA)(this.views.values()),l=h.next();!l.done;l=h.next())u=l.value,c=c.concat(u.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{l&&!l.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof se?(s=e.calcCompleteEventChildren(n),a=!1):(s=se.EMPTY_NODE,a=!1);var u=new Ze(new Xe(s,a,!1),new Xe(n,r,!1));return new un(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],h=this.hasCompleteView();if("default"===a)try{for(var l=(0,i.XA)(this.views.entries()),f=l.next();!f.done;f=l.next()){var p=(0,i.CR)(f.value,2),d=p[0],v=p[1];c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(d),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery()))}}catch(t){o={error:t}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}else(v=this.views.get(a))&&(c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(a),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery())));return h&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=(0,i.XA)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=(0,i.XA)(this.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;r=r||a.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=(0,i.XA)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),hn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ke(null))},t}();function ln(t,e,n){if(X(e))return new hn(new Ke(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Z(i,e);return o=o.updateChild(s,n),new hn(t.writeTree_.set(i,o))}var a=new Ke(n),u=t.writeTree_.setTree(e,a);return new hn(u)}function fn(t,e,n){var r=t;return M(n,(function(t,n){r=ln(r,Y(e,t),n)})),r}function pn(t,e){if(X(e))return hn.empty();var n=t.writeTree_.setTree(e,new Ke(null));return new hn(n)}function dn(t,e){return null!=vn(t,e)}function vn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Z(n.path,e)):null}function yn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jt,(function(t,n){e.push(new Bt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Bt(t,n.value))})),e}function gn(t,e){if(X(e))return t;var n=vn(t,e);return new hn(null!=n?new Ke(n):t.writeTree_.subtree(e))}function mn(t){return t.writeTree_.isEmpty()}function bn(t,e){return wn(q(),t.writeTree_,e)}function wn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=wn(Y(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Y(t,".priority"),r)),n}var _n=function(){function t(){this.visibleWrites_=hn.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new En(t,this)},t.prototype.addOverwrite=function(t,e,n,r){(0,o.hu)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=ln(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){(0,o.hu)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=fn(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:et(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=pn(this.visibleWrites_,r.path):M(r.children,(function(t){e.visibleWrites_=pn(e.visibleWrites_,Y(r.path,t))})),!0))},t.prototype.getCompleteWriteData=function(t){return vn(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=gn(this.visibleWrites_,e);return!i&&mn(o)?n:i||null!=n||dn(o,q())?bn(t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(et(t.path,e)||et(e,t.path))}),e),n||se.EMPTY_NODE):null}var s=vn(this.visibleWrites_,e);if(null!=s)return s;var a=gn(this.visibleWrites_,e);return mn(a)?n:null!=n||dn(a,q())?bn(a,n||se.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=se.EMPTY_NODE,r=vn(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Jt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=gn(this.visibleWrites_,t);return e.forEachChild(Jt,(function(t,e){var r=bn(gn(i,new B(t)),e);n=n.updateImmediateChild(t,r)})),yn(i).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return yn(gn(this.visibleWrites_,t)).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){(0,o.hu)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=Y(t,e);if(dn(this.visibleWrites_,i))return null;var s=gn(this.visibleWrites_,i);return mn(s)?r.getChild(e):bn(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=Y(t,e),i=vn(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?bn(gn(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return vn(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=gn(this.visibleWrites_,t),u=vn(a,q());if(null!=u)s=u;else{if(null==e)return[];s=bn(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&et(Y(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,q()),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=hn.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)et(n,a)?r=ln(r,u=Z(n,a),s.snap):et(a,n)&&(u=Z(a,n),r=ln(r,q(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(et(n,a))r=fn(r,u=Z(n,a),s.children);else if(et(a,n))if(X(u=Z(a,n)))r=fn(r,q(),s.children);else{var c=(0,o.DV)(s.children,G(u));if(c){var h=c.getChild(H(u));r=ln(r,q(),h)}}}}}return r},t}(),En=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(Y(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(Y(this.treePath_,e),this.writeTree_)},t}(),Sn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=new _n,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Ke.fromObject(e);return this.applyOperationToSyncPoints_(new Ye({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new Ke(null);return null!=n.snap?r=r.set(q(),!0):M(n.children,(function(t){r=r.set(new B(t),!0)})),this.applyOperationToSyncPoints_(new We(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=Ke.fromObject(e);return this.applyOperationToSyncPoints_(new Ye({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Je({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Z(s,e),c=new Qe(ze(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Z(s,e),c=Ke.fromObject(n),h=new Ye(ze(a),u,c);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Z(o,e),u=new Je(ze(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Z(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(q())):(u=new cn,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=se.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(q());n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);(0,o.hu)(!this.queryToTagMap.has(h),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(h,l),this.tagToQueryMap.set(l,h)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}!l&&c.length>0&&!r&&(h?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Z(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,(function(t,r){var i=Z(t,e);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(q()):(r=new cn,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new Xe(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():se.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),M(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)(0,o.hu)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!X(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),M(n,(function(t,e){r=r.concat(e)})),r})),h=0;h<c.length;++h){var l=c[h];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||se.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new B(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);(0,o.hu)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(q()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(X(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(q());null==n&&null!=i&&(n=i.getCompleteServerCache(q()));var o=[],s=G(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(q());null==n&&null!=o&&(n=o.getCompleteServerCache(q()));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),In=function(){function t(){this.rootNode_=se.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Tn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),Cn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Tn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),kn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,i.pi)({},t);return this.last_&&M(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),An=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new kn(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;M(e,(function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Nn=function(){this.eventLists_=[],this.recursionDepth_=0};function xn(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||tt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function On(t,e,n){xn(t,n),Rn(t,(function(t){return tt(t,e)}))}function Pn(t,e,n){xn(t,n),Rn(t,(function(t){return et(t,e)||et(e,t)}))}function Rn(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Dn(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Dn(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&E("event: "+n.toString()),U(r)}}}var Mn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,i.fl)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Ln=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return(0,i.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Mn),Fn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return(0,i.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Mn),jn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Un="start",Vn="close",Bn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=Cn.getCollection(e),this.urlFn=function(t){return e.connectionURL(dt,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new jn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new qn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,i.CR)(t,5),o=r[0],s=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Un)n.id=s,n.password=a;else{if(o!==Vn)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,i.CR)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&ft.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"===("undefined"==typeof window?"undefined":u(window))&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"===("undefined"==typeof Windows?"undefined":u(Windows))&&"object"===u(Windows.UI)))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=D(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),qn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){E("frame writing exception"),t.stack&&E(t.stack),E(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||E("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){E("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),Gn="";function zn(t){Gn=t}var Hn=null;"undefined"!=typeof MozWebSocket?Hn=MozWebSocket:"undefined"!=typeof WebSocket&&(Hn=WebSocket);var Wn,Kn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=Cn.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&ft.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(pt,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+Gn+"/"+process.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},s="MISSING_ENV_VAR",a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new Hn(this.connURL,[],i)}else i={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Hn(this.connURL,[],i)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Hn&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Jn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Bn,Kn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Kn&&Kn.isAvailable(),s=o&&!Kn.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Kn];else{var a=this.transports_=[];try{for(var u=(0,i.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var h=c.value;h&&h.isAvailable()&&a.push(h)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Qn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new Jn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?I("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Yn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Xn=1e3,Zn=function(t){function e(n,r,i,s,a,u,c){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.authOverride_=c,h.id=e.nextPersistentConnectionId_++,h.log_=S("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Xn,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,c&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),Ln.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&Fn.getInstance().on("online",h.onOnline_,h),h}return(0,i.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.BH,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===u(t)&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"===u(this.authOverride_)&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):I("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Xn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,h=null,l=function(){h?h.close():(c=!0,i())};this.realtime_={close:l,sendRequest:function(t){(0,o.hu)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,h=new Qn(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),l())}))}},e.prototype.interrupt=function(t){E("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){E("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Xn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return R(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new B(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){E("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=(0,i.XA)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,(0,i.XA)(a.values())),c=u.next();!c.done;c=u.next()){var h=c.value;this.sendListen_(h)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Gn.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Fn.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Yn),$n=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=S("p:rest:"),i.listens_={},i}return(0,i.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var h=Pe(t.getQueryParams());this.restRequest_(a+".json",h,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.DV)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Pe(t.getQueryParams()),r=t.path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=(0,o.cI)(u.responseText)}catch(t){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(Yn),tr=function(){this.children={},this.childCount=0,this.value=null},er=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new tr),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof B?e:new B(e),r=this,i=G(n);null!==i;)r=new t(i,r,(0,o.DV)(r.node_.children,i)||new tr),i=G(n=H(n));return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){(0,o.hu)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;M(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new B(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=(0,o.r3)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),nr="repo_interrupt";!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(Wn||(Wn={}));var rr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ge,this.transactionQueueTree_=new er,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Cn.getCollection(this.repoInfo_),this.forceRestClient_||("object"===("undefined"==typeof window?"undefined":u(window))&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new $n(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!==u(e))throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Zn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Cn.getOrCreateReporter(this.repoInfo_,(function(){return new An(t.stats_,t.server_)})),this.infoData_=new In,this.infoSyncTree_=new Sn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Sn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Pn(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new B(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new B(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=(0,o.UI)(e,(function(t){return ue(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=ue(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=(0,o.UI)(e,(function(t){return ue(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var h=ue(e);s=this.serverSyncTree_.applyServerOverwrite(i,h)}var l=i;s.length>0&&(l=this.rerunTransactions_(i)),Pn(this.eventQueue_,l,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;M(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new B("/.info/"+t),r=ue(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);Pn(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new le(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then((function(n){var r=ue(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return On(e.eventQueue_,t.path,i),Promise.resolve(new le(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return e.log_("get for query "+(0,o.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=ue(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=Ve(s,a,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);xn(this.eventQueue_,h),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);Pn(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),Pn(this.eventQueue_,l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(M(e,(function(e,n){i=!1,s[e]=Ue(Y(t,e),ue(n),r.serverSyncTree_,o)})),i)E("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);xn(this.eventQueue_,u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;Pn(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)})),M(e,(function(e){var n=r.abortTransactions_(Y(t,e));r.rerunTransactions_(n)})),Pn(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Ge;this.onDisconnect_.forEachTree(q(),(function(r,i){var o=Ue(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(q(),(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Ge,Pn(this.eventQueue_,q(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=ue(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=ue(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if((0,o.xb)(e))return E("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&M(e,(function(e,n){var i=ue(n);r.onDisconnect_.remember(Y(t,e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===G(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),On(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===G(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),On(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(nr)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(nr)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new kn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);M(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),E.apply(void 0,(0,i.fl)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&U((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new cr(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new ir(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:y(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=this.getLatestState_(t);a.currentInputSnapshot=c;var h=a.update(c.val());if(void 0===h){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new le(a.currentInputSnapshot,new ir(this,a.path),Jt);a.onComplete(null,!1,l)}}else{Tt("transaction failed: Data returned ",h,a.path),a.status=Wn.RUN;var f=this.transactionQueueTree_.subTree(t),p=f.getValue()||[];p.push(a),f.setValue(p);var d=void 0;"object"===u(h)&&null!==h&&(0,o.r3)(h,".priority")?(d=(0,o.DV)(h,".priority"),(0,o.hu)(St(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||se.EMPTY_NODE).getPriority().val();var v=this.generateServerValues(),g=ue(h,d),m=Ve(g,c,v);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var b=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);Pn(this.eventQueue_,t,b),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||se.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Wn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];(0,o.hu)(c.status===Wn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=Wn.SENT,c.retryCount++;var h=Z(t,c.path);s=s.updateChild(h,c.currentOutputSnapshotRaw)}var l=s.val(!0),f=t;this.server_.put(f.toString(),l,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Wn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new ir(n,e[s].path),c=new le(a,u,Jt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),Pn(n.eventQueue_,t,i),s=0;s<o.length;s++)U(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===Wn.SENT_NEEDS_ABORT?e[s].status=Wn.NEEDS_ABORT:e[s].status=Wn.RUN;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Wn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],s=t.filter((function(t){return t.status===Wn.RUN})).map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var c=t[a],h=Z(e,c.path),l=!1,f=void 0;if((0,o.hu)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===Wn.NEEDS_ABORT)l=!0,f=c.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0));else if(c.status===Wn.RUN)if(c.retryCount>=25)l=!0,f="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0));else{var p=this.getLatestState_(c.path,s);c.currentInputSnapshot=p;var d=t[a].update(p.val());if(void 0!==d){Tt("transaction failed: Data returned ",d,c.path);var v=ue(d);"object"===u(d)&&null!=d&&(0,o.r3)(d,".priority")||(v=v.updatePriority(p.getPriority()));var y=c.currentWriteId,g=this.generateServerValues(),m=Ve(v,p,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=m,c.currentWriteId=this.getNextWriteId_(),s.splice(s.indexOf(y),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(c.path,m,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(y,!0))}else l=!0,f="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))}if(Pn(this.eventQueue_,e,i),i=[],l&&(t[a].status=Wn.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if("nodata"===f){var b=new ir(this,t[a].path),w=t[a].currentInputSnapshot,_=new le(w,b,Jt);r.push(t[a].onComplete.bind(null,null,!1,_))}else r.push(t[a].onComplete.bind(null,new Error(f),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<r.length;a++)U(r[a]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=G(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=G(t=H(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Wn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===Wn.SENT_NEEDS_ABORT||(e[s].status===Wn.SENT?((0,o.hu)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=Wn.SENT_NEEDS_ABORT,e[s].abortReason="set"):((0,o.hu)(e[s].status===Wn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,Pn(this.eventQueue_,t.path(),r),s=0;s<n.length;s++)U(n[s])}},t}(),ir=function(t){function e(e,n){if(!(e instanceof rr))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new Ie,!1)||this}return(0,i.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),X(this.path)?null:W(this.path)},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof B||(null===G(this.path)?Ot("Reference.child",1,t,!1):xt("Reference.child",1,t,!1)),new e(this.repo,Y(this.path,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=Q(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){(0,o.Dv)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),Pt("Reference.set",this.path),It("Reference.set",1,t,this.path,!1),(0,o.Wj)("Reference.set",2,e,!0);var n=new o.BH;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Pt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ct("Reference.update",1,t,this.path,!1),(0,o.Wj)("Reference.update",2,e,!0);var i=new o.BH;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if((0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),Pt("Reference.setWithPriority",this.path),It("Reference.setWithPriority",1,t,this.path,!1),kt("Reference.setWithPriority",2,e,!1),(0,o.Wj)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.BH;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return(0,o.Dv)("Reference.remove",0,1,arguments.length),Pt("Reference.remove",this.path),(0,o.Wj)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if((0,o.Dv)("Reference.transaction",1,3,arguments.length),Pt("Reference.transaction",this.path),(0,o.Wj)("Reference.transaction",1,t,!1),(0,o.Wj)("Reference.transaction",2,e,!0),Dt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.BH;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Lt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),Pt("Reference.setPriority",this.path),kt("Reference.setPriority",1,t,!1),(0,o.Wj)("Reference.setPriority",2,e,!0);var n=new o.BH;return this.repo.setWithPriority(Y(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){(0,o.Dv)("Reference.push",0,2,arguments.length),Pt("Reference.push",this.path),It("Reference.push",1,t,this.path,!0),(0,o.Wj)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=jt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return Pt("Reference.onDisconnect",this.path),new Mt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Re);Re.__referenceConstructor=ir,cn.__referenceConstructor=ir;var or,sr=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',C(t)},t}(),ar=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),ur=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return or||(or=new t),or},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=(0,i.XA)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,(0,i.XA)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next()){var h=c.value;this.repos_[a][h].interrupt()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=(0,i.XA)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,(0,i.XA)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next()){var h=c.value;this.repos_[a][h].resume()}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new vt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new ar)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),E("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=yt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u="MISSING_ENV_VAR".FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+a.namespace,a=(s=yt(i,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new ar:new sr(t,e);return Rt("Invalid Firebase Database URL",1,s),X(s.path)||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=(0,o.DV)(this.repos_,t.app.name);e&&(0,o.DV)(e,t.key)===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=(0,o.DV)(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=(0,o.DV)(r,t.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new rr(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),cr=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return this.checkDeleted_("delete"),ur.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof rr||T("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new ir(this.repo_,q())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?T("Cannot call useEmulator() after instance has already been initialized."):ur.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),(0,o.Dv)("database.ref",0,1,arguments.length),t instanceof ir?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),(0,o.Dv)(e,1,1,arguments.length);var n=yt(t,this.repo_.repoInfo_.nodeAdmin);Rt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){(0,o.Dv)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){(0,o.Dv)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),hr=Object.freeze({__proto__:null,forceLongPolling:function(){Kn.forceDisallow(),Bn.forceAllow()},forceWebSockets:function(){Bn.forceDisallow()},isWebSocketsAvailable:function(){return Kn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,u=void 0!==s&&s;zn(r);var c=new a.zt("auth-internal",new a.H0("database-standalone"));return c.setComponent(new a.wA("auth-internal",(function(){return i}),"PRIVATE")),{instance:ur.getInstance().databaseFromApp(e,c,n,u),namespace:o}}}),lr=Zn;Zn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Zn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var fr=Qn,pr=vt,dr=Object.freeze({__proto__:null,DataConnection:lr,RealTimeConnection:fr,hijackHash:function(t){var e=Zn.prototype.put;return Zn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Zn.prototype.put=e}},ConnectionTarget:pr,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){ur.getInstance().forceRestClient(t)}}),vr=cr.ServerValue;!function(e){zn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.wA("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return ur.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:ir,Query:Re,Database:cr,DataSnapshot:le,enableLogging:_,INTERNAL:hr,ServerValue:vr,TEST_ACCESS:dr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.4"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},9628:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>o,Yd:()=>l,Ub:()=>f,Am:()=>p});var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},1106:(t,e,n)=>{"use strict";n.d(e,{BH:()=>p,LL:()=>A,ZR:()=>k,gQ:()=>B,zI:()=>C,hu:()=>o,g5:()=>s,US:()=>u,h$:()=>c,$s:()=>X,r3:()=>L,ne:()=>q,p$:()=>l,ZB:()=>f,gK:()=>W,z$:()=>d,GJ:()=>M,jU:()=>g,ru:()=>m,d:()=>w,xb:()=>j,w1:()=>_,hl:()=>I,uI:()=>v,UG:()=>y,Yr:()=>S,b$:()=>b,Mn:()=>E,w9:()=>D,cI:()=>O,UI:()=>U,xO:()=>V,DV:()=>F,ug:()=>Y,dS:()=>Q,Pz:()=>P,Dv:()=>H,Wj:()=>K,lb:()=>J,eu:()=>T});var r=n(7480);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},h=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var p=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function y(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function g(){return"object"===("undefined"==typeof self?"undefined":i(self))&&self.self===self}function m(){var t="object"===("undefined"==typeof chrome?"undefined":i(chrome))?chrome.runtime:"object"===("undefined"==typeof browser?"undefined":i(browser))?browser.runtime:void 0;return"object"===i(t)&&void 0!==t.id}function b(){return"object"===("undefined"==typeof navigator?"undefined":i(navigator))&&"ReactNative"===navigator.product}function w(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E(){return d().indexOf("MSAppHost/")>=0}function S(){return!1}function I(){return"indexedDB"in self&&null!=indexedDB}function T(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function C(){return!(!navigator||!navigator.cookieEnabled)}var k=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,A.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),A=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?N(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new k(i,a,r);return u},t}();function N(t,e){return t.replace(x,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var x=/\{\$([^}]+)}/g;function O(t){return JSON.parse(t)}function P(t){return JSON.stringify(t)}var R=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=O(h(o[0])||""),n=O(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},D=function(t){var e=R(t).claims;return!!e&&"object"===i(e)&&e.hasOwnProperty("iat")},M=function(t){var e=R(t).claims;return"object"===i(e)&&!0===e.admin};function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function j(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var B=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new G(t,e);return n.subscribe.bind(n)}var G=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==i(t)||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var o=r[n];if(o in t&&"function"==typeof t[o])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=z),void 0===r.error&&(r.error=z),void 0===r.complete&&(r.complete=z);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(t){}})),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function z(){}var H=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e,r)+"must be a valid function.")}function J(t,e,n,r){if((!r||n)&&("object"!==i(n)||null===n))throw new Error(W(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Y=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function X(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},8884:t=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},295:(t,e)=>{!function(t){"use strict";e.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(e){var n,r,i,o,s,a=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var h=new ArrayBuffer(a),l=new Uint8Array(h);for(n=0;n<u;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),s=t.indexOf(e[n+3]),l[c++]=r<<2|i>>4,l[c++]=(15&i)<<4|o>>2,l[c++]=(3&o)<<6|63&s;return h}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},2326:t=>{function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},7659:(t,e,n)=>{n(2403),n(3290),n(3690),n(8424),n(2357),n(6667),n(2506),n(6022),n(754),n(7571),n(6527),n(9219),n(3270),n(4919),n(5331),n(2456),n(8490),n(4554),n(161),n(6042),n(15),n(317),n(3271),n(440),n(1077),n(820),n(1914),n(4117),n(9619),n(5849),n(4750),n(1550),n(3529),n(2791),n(6831),n(4717),n(7292),n(1840),n(3255),n(5728),n(6255),n(2834),n(4489),n(575),n(1369),n(2751),n(9617),n(3656),n(1850),n(5424),n(230),n(8471),n(8577),n(7906),n(8587),n(6575),n(5281),n(3917),n(5450),n(9449),n(1616),n(9718),n(3845),n(5803),n(2222),n(5036),n(6131),n(4110),n(6235),n(6495),n(4162),n(5297),n(1466),n(2581),n(8384),n(2334),n(9701),n(1325),n(3233),n(1621),n(8671),n(6705),n(9437),n(7263),n(919),n(791),n(633),n(9355),n(9253),n(9892),n(9121),n(8738),n(4751),n(9822),n(4611),n(9217),n(4138),n(109),n(3821),n(4806),n(2566),n(5997),n(8359),n(7181),n(8682),n(8514),n(5105),n(5325),n(829),n(8969),n(3940),n(3491),n(6332),n(7195),n(5345),n(6670),n(7736),n(4457),n(7683),n(1123),n(4797),n(4871),n(8824),n(6472),n(1220),n(9263),n(7622),n(9060),n(980),n(6175),n(8484),n(9869),n(1285),n(4854),n(6647),n(7903),n(5197),n(3113),t.exports=n(8544)},3718:(t,e,n)=>{n(6032),t.exports=n(8544).Array.flatMap},2064:(t,e,n)=>{n(2963),t.exports=n(8544).Array.includes},4740:(t,e,n)=>{n(8217),t.exports=n(8544).Object.entries},6915:(t,e,n)=>{n(9168),t.exports=n(8544).Object.getOwnPropertyDescriptors},3137:(t,e,n)=>{n(6351),t.exports=n(8544).Object.values},2320:(t,e,n)=>{"use strict";n(829),n(8088),t.exports=n(8544).Promise.finally},419:(t,e,n)=>{n(2123),t.exports=n(8544).String.padEnd},2776:(t,e,n)=>{n(9391),t.exports=n(8544).String.padStart},9034:(t,e,n)=>{n(1767),t.exports=n(8544).String.trimRight},7573:(t,e,n)=>{n(6541),t.exports=n(8544).String.trimLeft},2378:(t,e,n)=>{n(4870),t.exports=n(9078).f("asyncIterator")},4019:(t,e,n)=>{n(6057),t.exports=n(7838).global},4511:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},9396:(t,e,n)=>{var r=n(6558);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},7838:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},9035:(t,e,n)=>{var r=n(4511);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},4733:(t,e,n)=>{t.exports=!n(9476)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},6863:(t,e,n)=>{var r=n(6558),i=n(948).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},7888:(t,e,n)=>{var r=n(948),i=n(7838),o=n(9035),s=n(6205),a=n(6287),u=function t(e,n,u){var c,h,l,f=e&t.F,p=e&t.G,d=e&t.S,v=e&t.P,y=e&t.B,g=e&t.W,m=p?i:i[n]||(i[n]={}),b=m.prototype,w=p?r:d?r[n]:(r[n]||{}).prototype;for(c in p&&(u=n),u)(h=!f&&w&&void 0!==w[c])&&a(m,c)||(l=h?w[c]:u[c],m[c]=p&&"function"!=typeof w[c]?u[c]:y&&h?o(l,r):g&&w[c]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((m.virtual||(m.virtual={}))[c]=l,e&t.R&&b&&!b[c]&&s(b,c,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},9476:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},948:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},6287:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},6205:(t,e,n)=>{var r=n(8146),i=n(1476);t.exports=n(4733)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},8292:(t,e,n)=>{t.exports=!n(4733)&&!n(9476)((function(){return 7!=Object.defineProperty(n(6863)("div"),"a",{get:function(){return 7}}).a}))},6558:t=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===e(t)?null!==t:"function"==typeof t}},8146:(t,e,n)=>{var r=n(9396),i=n(8292),o=n(1415),s=Object.defineProperty;e.f=n(4733)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},1476:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},1415:(t,e,n)=>{var r=n(6558);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},6057:(t,e,n)=>{var r=n(7888);r(r.G,{global:n(948)})},6819:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},9855:(t,e,n)=>{var r=n(3679);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},4339:(t,e,n)=>{var r=n(3336)("unscopables"),i=Array.prototype;null==i[r]&&n(8012)(i,r,{}),t.exports=function(t){i[r][t]=!0}},1330:(t,e,n)=>{"use strict";var r=n(3593)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},2702:t=>{t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},6154:(t,e,n)=>{var r=n(7156);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},2147:(t,e,n)=>{"use strict";var r=n(2515),i=n(6241),o=n(8315);t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),a=i(t,s),u=i(e,s),c=arguments.length>2?arguments[2]:void 0,h=Math.min((void 0===c?s:i(c,s))-u,s-a),l=1;for(u<a&&a<u+h&&(l=-1,u+=h-1,a+=h-1);h-- >0;)u in n?n[a]=n[u]:delete n[a],a+=l,u+=l;return n}},1132:(t,e,n)=>{"use strict";var r=n(2515),i=n(6241),o=n(8315);t.exports=function(t){for(var e=r(this),n=o(e.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>a;)e[a++]=t;return e}},4687:(t,e,n)=>{var r=n(8499),i=n(8315),o=n(6241);t.exports=function(t){return function(e,n,s){var a,u=r(e),c=i(u.length),h=o(s,c);if(t&&n!=n){for(;c>h;)if((a=u[h++])!=a)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}}},3970:(t,e,n)=>{var r=n(566),i=n(331),o=n(2515),s=n(8315),a=n(5486);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,h=4==t,l=6==t,f=5==t||l,p=e||a;return function(e,a,d){for(var v,y,g=o(e),m=i(g),b=r(a,d,3),w=s(m.length),_=0,E=n?p(e,w):u?p(e,0):void 0;w>_;_++)if((f||_ in m)&&(y=b(v=m[_],_,g),t))if(n)E[_]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return _;case 2:E.push(v)}else if(h)return!1;return l?-1:c||h?h:E}}},6419:(t,e,n)=>{var r=n(6819),i=n(2515),o=n(331),s=n(8315);t.exports=function(t,e,n,a,u){r(e);var c=i(t),h=o(c),l=s(c.length),f=u?l-1:0,p=u?-1:1;if(n<2)for(;;){if(f in h){a=h[f],f+=p;break}if(f+=p,u?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:l>f;f+=p)f in h&&(a=e(a,h[f],f,c));return a}},2642:(t,e,n)=>{var r=n(7156),i=n(1320),o=n(3336)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},5486:(t,e,n)=>{var r=n(2642);t.exports=function(t,e){return new(r(t))(e)}},8327:(t,e,n)=>{"use strict";var r=n(6819),i=n(7156),o=n(2765),s=[].slice,a={},u=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("F,a","return new F("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=s.call(arguments,1),a=function r(){var i=n.concat(s.call(arguments));return this instanceof r?u(e,i.length,i):o(e,i,t)};return i(e.prototype)&&(a.prototype=e.prototype),a}},2858:(t,e,n)=>{var r=n(3679),i=n(3336)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},3679:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},4396:(t,e,n)=>{"use strict";var r=n(4835).f,i=n(4275),o=n(7228),s=n(566),a=n(2702),u=n(2734),c=n(4873),h=n(7218),l=n(4798),f=n(4926),p=n(3763).fastKey,d=n(8546),v=f?"_s":"size",y=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var h=t((function(t,r){a(t,h,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,null!=r&&u(r,n,t[c],t)}));return o(h.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),r=y(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){d(this,e);for(var n,r=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(d(this,e),t)}}),f&&r(h.prototype,"size",{get:function(){return d(this,e)[v]}}),h},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){c(t,e,(function(t,n){this._t=d(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?h(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,h(1))}),n?"entries":"values",!n,!0),l(e)}}},4495:(t,e,n)=>{"use strict";var r=n(7228),i=n(3763).getWeak,o=n(6154),s=n(7156),a=n(2702),u=n(2734),c=n(3970),h=n(5389),l=n(8546),f=c(5),p=c(6),d=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return f(t.a,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t((function(t,r){a(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=r&&u(r,n,t[o],t)}));return r(c.prototype,{delete:function(t){if(!s(t))return!1;var n=i(t);return!0===n?v(l(this,e)).delete(t):n&&h(n,this._i)&&delete n[this._i]},has:function(t){if(!s(t))return!1;var n=i(t);return!0===n?v(l(this,e)).has(t):n&&h(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},1966:(t,e,n)=>{"use strict";var r=n(7381),i=n(5913),o=n(7278),s=n(7228),a=n(3763),u=n(2734),c=n(2702),h=n(7156),l=n(5810),f=n(5508),p=n(8094),d=n(3654);t.exports=function(t,e,n,v,y,g){var m=r[t],b=m,w=y?"set":"add",_=b&&b.prototype,E={},S=function(t){var e=_[t];o(_,t,"delete"==t||"has"==t?function(t){return!(g&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!h(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(g||_.forEach&&!l((function(){(new b).entries().next()})))){var I=new b,T=I[w](g?{}:-0,1)!=I,C=l((function(){I.has(1)})),k=f((function(t){new b(t)})),A=!g&&l((function(){for(var t=new b,e=5;e--;)t[w](e,e);return!t.has(-0)}));k||((b=e((function(e,n){c(e,b,t);var r=d(new m,e,b);return null!=n&&u(n,y,r[w],r),r}))).prototype=_,_.constructor=b),(C||A)&&(S("delete"),S("has"),y&&S("get")),(A||T)&&S(w),g&&_.clear&&delete _.clear}else b=v.getConstructor(e,t,y,w),s(b.prototype,n),a.NEED=!0;return p(b,t),E[t]=b,i(i.G+i.W+i.F*(b!=m),E),g||v.setStrong(b,t,y),b}},8544:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},1348:(t,e,n)=>{"use strict";var r=n(4835),i=n(6256);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},566:(t,e,n)=>{var r=n(6819);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},2115:(t,e,n)=>{"use strict";var r=n(5810),i=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(n>99?n:"0"+s(n))+"Z"}:o},296:(t,e,n)=>{"use strict";var r=n(6154),i=n(8537),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),t!=o)}},408:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},4926:(t,e,n)=>{t.exports=!n(5810)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},2241:(t,e,n)=>{var r=n(7156),i=n(7381).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},6921:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},8727:(t,e,n)=>{var r=n(9924),i=n(5421),o=n(4616);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var s,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},5913:(t,e,n)=>{var r=n(7381),i=n(8544),o=n(8012),s=n(7278),a=n(566),u=function t(e,n,u){var c,h,l,f,p=e&t.F,d=e&t.G,v=e&t.P,y=e&t.B,g=d?r:e&t.S?r[n]||(r[n]={}):(r[n]||{}).prototype,m=d?i:i[n]||(i[n]={}),b=m.prototype||(m.prototype={});for(c in d&&(u=n),u)l=((h=!p&&g&&void 0!==g[c])?g:u)[c],f=y&&h?a(l,r):v&&"function"==typeof l?a(Function.call,l):l,g&&s(g,c,l,e&t.U),m[c]!=l&&o(m,c,f),v&&b[c]!=l&&(b[c]=l)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},3483:(t,e,n)=>{var r=n(3336)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},5810:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},8644:(t,e,n)=>{"use strict";n(5997);var r=n(7278),i=n(8012),o=n(5810),s=n(408),a=n(3336),u=n(6997),c=a("species"),h=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=a(t),p=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=p?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[f](""),!e})):void 0;if(!p||!d||"replace"===t&&!h||"split"===t&&!l){var v=/./[f],y=n(s,f,""[t],(function(t,e,n,r,i){return e.exec===u?p&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=y[0],m=y[1];r(String.prototype,t,g),i(RegExp.prototype,f,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},2188:(t,e,n)=>{"use strict";var r=n(6154);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},3120:(t,e,n)=>{"use strict";var r=n(1320),i=n(7156),o=n(8315),s=n(566),a=n(3336)("isConcatSpreadable");t.exports=function t(e,n,u,c,h,l,f,p){for(var d,v,y=h,g=0,m=!!f&&s(f,p,3);g<c;){if(g in u){if(d=m?m(u[g],g,n):u[g],v=!1,i(d)&&(v=void 0!==(v=d[a])?!!v:r(d)),v&&l>0)y=t(e,n,d,o(d.length),y,l-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=d}y++}g++}return y}},2734:(t,e,n)=>{var r=n(566),i=n(2471),o=n(7063),s=n(6154),a=n(8315),u=n(7637),c={},h={},l=t.exports=function(t,e,n,l,f){var p,d,v,y,g=f?function(){return t}:u(t),m=r(n,l,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=a(t.length);p>b;b++)if((y=e?m(s(d=t[b])[0],d[1]):m(t[b]))===c||y===h)return y}else for(v=g.call(t);!(d=v.next()).done;)if((y=i(v,m,d.value,e))===c||y===h)return y};l.BREAK=c,l.RETURN=h},1174:(t,e,n)=>{t.exports=n(3192)("native-function-to-string",Function.toString)},7381:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},5389:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},8012:(t,e,n)=>{var r=n(4835),i=n(6256);t.exports=n(4926)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},1225:(t,e,n)=>{var r=n(7381).document;t.exports=r&&r.documentElement},5142:(t,e,n)=>{t.exports=!n(4926)&&!n(5810)((function(){return 7!=Object.defineProperty(n(2241)("div"),"a",{get:function(){return 7}}).a}))},3654:(t,e,n)=>{var r=n(7156),i=n(6931).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},2765:t=>{t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},331:(t,e,n)=>{var r=n(3679);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},7063:(t,e,n)=>{var r=n(5301),i=n(3336)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},1320:(t,e,n)=>{var r=n(3679);t.exports=Array.isArray||function(t){return"Array"==r(t)}},5127:(t,e,n)=>{var r=n(7156),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},7156:t=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return"object"===e(t)?null!==t:"function"==typeof t}},1993:(t,e,n)=>{var r=n(7156),i=n(3679),o=n(3336)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},2471:(t,e,n)=>{var r=n(6154);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},8258:(t,e,n)=>{"use strict";var r=n(4275),i=n(6256),o=n(8094),s={};n(8012)(s,n(3336)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(s,{next:i(1,n)}),o(t,e+" Iterator")}},4873:(t,e,n)=>{"use strict";var r=n(4219),i=n(5913),o=n(7278),s=n(8012),a=n(5301),u=n(8258),c=n(8094),h=n(4153),l=n(3336)("iterator"),f=!([].keys&&"next"in[].keys()),p="keys",d="values",v=function(){return this};t.exports=function(t,e,n,y,g,m,b){u(n,e,y);var w,_,E,S=function(t){if(!f&&t in k)return k[t];switch(t){case p:case d:return function(){return new n(this,t)}}return function(){return new n(this,t)}},I=e+" Iterator",T=g==d,C=!1,k=t.prototype,A=k[l]||k["@@iterator"]||g&&k[g],N=A||S(g),x=g?T?S("entries"):N:void 0,O="Array"==e&&k.entries||A;if(O&&(E=h(O.call(new t)))!==Object.prototype&&E.next&&(c(E,I,!0),r||"function"==typeof E[l]||s(E,l,v)),T&&A&&A.name!==d&&(C=!0,N=function(){return A.call(this)}),r&&!b||!f&&!C&&k[l]||s(k,l,N),a[e]=N,a[I]=v,g)if(w={values:T?N:S(d),keys:m?N:S(p),entries:x},b)for(_ in w)_ in k||o(k,_,w[_]);else i(i.P+i.F*(f||C),e,w);return w}},5508:(t,e,n)=>{var r=n(3336)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},t(o)}catch(t){}return n}},7218:t=>{t.exports=function(t,e){return{value:e,done:!!t}}},5301:t=>{t.exports={}},4219:t=>{t.exports=!1},4774:t=>{var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},3800:(t,e,n)=>{var r=n(4012),i=Math.pow,o=i(2,-52),s=i(2,-23),a=i(2,127)*(2-s),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),c=r(t);return i<u?c*(i/u/s+1/o-1/o)*u*s:(n=(e=(1+s/o)*i)-(e-i))>a||n!=n?c*(1/0):c*n}},5447:t=>{t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},4012:t=>{t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},3763:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(7936)("meta"),o=n(7156),s=n(5389),a=n(4835).f,u=0,c=Object.isExtensible||function(){return!0},h=!n(5810)((function(){return c(Object.preventExtensions({}))})),l=function(t){a(t,i,{value:{i:"O"+ ++u,w:{}}})},f=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==r(t)?t:("string"==typeof t?"S":"P")+t;if(!s(t,i)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[i].i},getWeak:function(t,e){if(!s(t,i)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[i].w},onFreeze:function(t){return h&&f.NEED&&c(t)&&!s(t,i)&&l(t),t}}},1842:(t,e,n)=>{var r=n(7381),i=n(8220).set,o=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,u="process"==n(3679)(s);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=s.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){s.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var h=a.resolve(void 0);n=function(){h.then(c)}}else n=function(){i.call(r,c)};else{var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},4086:(t,e,n)=>{"use strict";var r=n(6819);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},8559:(t,e,n)=>{"use strict";var r=n(4926),i=n(9924),o=n(5421),s=n(4616),a=n(2515),u=n(331),c=Object.assign;t.exports=!c||n(5810)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r}))?function(t,e){for(var n=a(t),c=arguments.length,h=1,l=o.f,f=s.f;c>h;)for(var p,d=u(arguments[h++]),v=l?i(d).concat(l(d)):i(d),y=v.length,g=0;y>g;)p=v[g++],r&&!f.call(d,p)||(n[p]=d[p]);return n}:c},4275:(t,e,n)=>{var r=n(6154),i=n(6447),o=n(6921),s=n(8662)("IE_PROTO"),a=function(){},u=function(){var t,e=n(2241)("iframe"),r=o.length;for(e.style.display="none",n(1225).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:i(n,e)}},4835:(t,e,n)=>{var r=n(6154),i=n(5142),o=n(8537),s=Object.defineProperty;e.f=n(4926)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},6447:(t,e,n)=>{var r=n(4835),i=n(6154),o=n(9924);t.exports=n(4926)?Object.defineProperties:function(t,e){i(t);for(var n,s=o(e),a=s.length,u=0;a>u;)r.f(t,n=s[u++],e[n]);return t}},3299:(t,e,n)=>{var r=n(4616),i=n(6256),o=n(8499),s=n(8537),a=n(5389),u=n(5142),c=Object.getOwnPropertyDescriptor;e.f=n(4926)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!r.f.call(t,e),t[e])}},3136:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(8499),o=n(2982).f,s={}.toString,a="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==s.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(i(t))}},2982:(t,e,n)=>{var r=n(7960),i=n(6921).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},5421:(t,e)=>{e.f=Object.getOwnPropertySymbols},4153:(t,e,n)=>{var r=n(5389),i=n(2515),o=n(8662)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},7960:(t,e,n)=>{var r=n(5389),i=n(8499),o=n(4687)(!1),s=n(8662)("IE_PROTO");t.exports=function(t,e){var n,a=i(t),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;e.length>u;)r(a,n=e[u++])&&(~o(c,n)||c.push(n));return c}},9924:(t,e,n)=>{var r=n(7960),i=n(6921);t.exports=Object.keys||function(t){return r(t,i)}},4616:(t,e)=>{e.f={}.propertyIsEnumerable},4057:(t,e,n)=>{var r=n(5913),i=n(8544),o=n(5810);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},8941:(t,e,n)=>{var r=n(4926),i=n(9924),o=n(8499),s=n(4616).f;t.exports=function(t){return function(e){for(var n,a=o(e),u=i(a),c=u.length,h=0,l=[];c>h;)n=u[h++],r&&!s.call(a,n)||l.push(t?[n,a[n]]:a[n]);return l}}},2600:(t,e,n)=>{var r=n(2982),i=n(5421),o=n(6154),s=n(7381).Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},5031:(t,e,n)=>{var r=n(7381).parseFloat,i=n(618).trim;t.exports=1/r(n(3596)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},6971:(t,e,n)=>{var r=n(7381).parseInt,i=n(618).trim,o=n(3596),s=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(s.test(n)?16:10))}:r},8228:t=>{t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},3507:(t,e,n)=>{var r=n(6154),i=n(7156),o=n(4086);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},6256:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7228:(t,e,n)=>{var r=n(7278);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},7278:(t,e,n)=>{var r=n(7381),i=n(8012),o=n(5389),s=n(7936)("src"),a=n(1174),u="toString",c=(""+a).split(u);n(8544).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||i(n,s,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},4585:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(2858),o=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var s=n.call(t,e);if("object"!==r(s))throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,e)}},6997:(t,e,n)=>{"use strict";var r,i,o=n(2188),s=RegExp.prototype.exec,a=String.prototype.replace,u=s,c=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),h=void 0!==/()??/.exec("")[1];(c||h)&&(u=function(t){var e,n,r,i,u=this;return h&&(n=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),c&&(e=u.lastIndex),r=s.call(u,t),c&&r&&(u.lastIndex=u.global?r.index+r[0].length:e),h&&r&&r.length>1&&a.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=u},4261:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},6931:(t,e,n)=>{var r=n(7156),i=n(6154),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(566)(Function.call,n(3299).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},4798:(t,e,n)=>{"use strict";var r=n(7381),i=n(4835),o=n(4926),s=n(3336)("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},8094:(t,e,n)=>{var r=n(4835).f,i=n(5389),o=n(3336)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},8662:(t,e,n)=>{var r=n(3192)("keys"),i=n(7936);t.exports=function(t){return r[t]||(r[t]=i(t))}},3192:(t,e,n)=>{var r=n(8544),i=n(7381),o="__core-js_shared__",s=i[o]||(i[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(4219)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},2035:(t,e,n)=>{var r=n(6154),i=n(6819),o=n(3336)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||null==(n=r(s)[o])?e:i(n)}},1411:(t,e,n)=>{"use strict";var r=n(5810);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3593:(t,e,n)=>{var r=n(3230),i=n(408);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},2376:(t,e,n)=>{var r=n(1993),i=n(408);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},9927:(t,e,n)=>{var r=n(5913),i=n(5810),o=n(408),s=/"/g,a=function(t,e,n,r){var i=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),a+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),r(r.P+r.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},1925:(t,e,n)=>{var r=n(8315),i=n(1924),o=n(408);t.exports=function(t,e,n,s){var a=String(o(t)),u=a.length,c=void 0===n?" ":String(n),h=r(e);if(h<=u||""==c)return a;var l=h-u,f=i.call(c,Math.ceil(l/c.length));return f.length>l&&(f=f.slice(0,l)),s?f+a:a+f}},1924:(t,e,n)=>{"use strict";var r=n(3230),i=n(408);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},618:(t,e,n)=>{var r=n(5913),i=n(408),o=n(5810),s=n(3596),a="["+s+"]",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),h=function(t,e,n){var i={},a=o((function(){return!!s[t]()||""!=""[t]()})),u=i[t]=a?e(l):s[t];n&&(i[n]=u),r(r.P+r.F*a,"String",i)},l=h.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=h},3596:t=>{t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},8220:(t,e,n)=>{var r,i,o,s=n(566),a=n(2765),u=n(1225),c=n(2241),h=n(7381),l=h.process,f=h.setImmediate,p=h.clearImmediate,d=h.MessageChannel,v=h.Dispatch,y=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){m.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete g[t]},"process"==n(3679)(l)?r=function(t){l.nextTick(s(m,t,1))}:v&&v.now?r=function(t){v.now(s(m,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=b,r=s(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(r=function(t){h.postMessage(t+"","*")},h.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:f,clear:p}},6241:(t,e,n)=>{var r=n(3230),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},3472:(t,e,n)=>{var r=n(3230),i=n(8315);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},3230:t=>{var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},8499:(t,e,n)=>{var r=n(331),i=n(408);t.exports=function(t){return r(i(t))}},8315:(t,e,n)=>{var r=n(3230),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},2515:(t,e,n)=>{var r=n(408);t.exports=function(t){return Object(r(t))}},8537:(t,e,n)=>{var r=n(7156);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},431:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}if(n(4926)){var i=n(4219),o=n(7381),s=n(5810),a=n(5913),u=n(9161),c=n(9782),h=n(566),l=n(2702),f=n(6256),p=n(8012),d=n(7228),v=n(3230),y=n(8315),g=n(3472),m=n(6241),b=n(8537),w=n(5389),_=n(2858),E=n(7156),S=n(2515),I=n(7063),T=n(4275),C=n(4153),k=n(2982).f,A=n(7637),N=n(7936),x=n(3336),O=n(3970),P=n(4687),R=n(2035),D=n(4806),M=n(5301),L=n(5508),F=n(4798),j=n(1132),U=n(2147),V=n(4835),B=n(3299),q=V.f,G=B.f,z=o.RangeError,H=o.TypeError,W=o.Uint8Array,K="ArrayBuffer",J="SharedArrayBuffer",Q="BYTES_PER_ELEMENT",Y=Array.prototype,X=c.ArrayBuffer,Z=c.DataView,$=O(0),tt=O(2),et=O(3),nt=O(4),rt=O(5),it=O(6),ot=P(!0),st=P(!1),at=D.values,ut=D.keys,ct=D.entries,ht=Y.lastIndexOf,lt=Y.reduce,ft=Y.reduceRight,pt=Y.join,dt=Y.sort,vt=Y.slice,yt=Y.toString,gt=Y.toLocaleString,mt=x("iterator"),bt=x("toStringTag"),wt=N("typed_constructor"),_t=N("def_constructor"),Et=u.CONSTR,St=u.TYPED,It=u.VIEW,Tt="Wrong length!",Ct=O(1,(function(t,e){return Ot(R(t,t[_t]),e)})),kt=s((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),At=!!W&&!!W.prototype.set&&s((function(){new W(1).set({})})),Nt=function(t,e){var n=v(t);if(n<0||n%e)throw z("Wrong offset!");return n},xt=function(t){if(E(t)&&St in t)return t;throw H(t+" is not a typed array!")},Ot=function(t,e){if(!E(t)||!(wt in t))throw H("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Rt(R(t,t[_t]),e)},Rt=function(t,e){for(var n=0,r=e.length,i=Ot(t,r);r>n;)i[n]=e[n++];return i},Dt=function(t,e,n){q(t,e,{get:function(){return this._d[n]}})},Mt=function(t){var e,n,r,i,o,s,a=S(t),u=arguments.length,c=u>1?arguments[1]:void 0,l=void 0!==c,f=A(a);if(null!=f&&!I(f)){for(s=f.call(a),r=[],e=0;!(o=s.next()).done;e++)r.push(o.value);a=r}for(l&&u>2&&(c=h(c,arguments[2],2)),e=0,n=y(a.length),i=Ot(this,n);n>e;e++)i[e]=l?c(a[e],e):a[e];return i},Lt=function(){for(var t=0,e=arguments.length,n=Ot(this,e);e>t;)n[t]=arguments[t++];return n},Ft=!!W&&s((function(){gt.call(new W(1))})),jt=function(){return gt.apply(Ft?vt.call(xt(this)):xt(this),arguments)},Ut={copyWithin:function(t,e){return U.call(xt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(xt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return j.apply(xt(this),arguments)},filter:function(t){return Pt(this,tt(xt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(xt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(xt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(xt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(xt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(xt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(xt(this),arguments)},lastIndexOf:function(t){return ht.apply(xt(this),arguments)},map:function(t){return Ct(xt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(xt(this),arguments)},reduceRight:function(t){return ft.apply(xt(this),arguments)},reverse:function(){for(var t,e=this,n=xt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return et(xt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(xt(this),t)},subarray:function(t,e){var n=xt(this),r=n.length,i=m(t,r);return new(R(n,n[_t]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,y((void 0===e?r:m(e,r))-i))}},Vt=function(t,e){return Pt(this,vt.call(xt(this),t,e))},Bt=function(t){xt(this);var e=Nt(arguments[1],1),n=this.length,r=S(t),i=y(r.length),o=0;if(i+e>n)throw z(Tt);for(;o<i;)this[e+o]=r[o++]},qt={entries:function(){return ct.call(xt(this))},keys:function(){return ut.call(xt(this))},values:function(){return at.call(xt(this))}},Gt=function(t,e){return E(t)&&t[St]&&"symbol"!=r(e)&&e in t&&String(+e)==String(e)},zt=function(t,e){return Gt(t,e=b(e,!0))?f(2,t[e]):G(t,e)},Ht=function(t,e,n){return!(Gt(t,e=b(e,!0))&&E(n)&&w(n,"value"))||w(n,"get")||w(n,"set")||n.configurable||w(n,"writable")&&!n.writable||w(n,"enumerable")&&!n.enumerable?q(t,e,n):(t[e]=n.value,t)};Et||(B.f=zt,V.f=Ht),a(a.S+a.F*!Et,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Ht}),s((function(){yt.call({})}))&&(yt=gt=function(){return pt.call(this)});var Wt=d({},Ut);d(Wt,qt),p(Wt,mt,qt.values),d(Wt,{slice:Vt,set:Bt,constructor:function(){},toString:yt,toLocaleString:jt}),Dt(Wt,"buffer","b"),Dt(Wt,"byteOffset","o"),Dt(Wt,"byteLength","l"),Dt(Wt,"length","e"),q(Wt,bt,{get:function(){return this[St]}}),t.exports=function(t,e,n,r){var c=t+((r=!!r)?"Clamped":"")+"Array",h="get"+t,f="set"+t,d=o[c],v=d||{},m=d&&C(d),b=!d||!u.ABV,w={},S=d&&d.prototype,I=function(t,n){q(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[h](n*e+r.o,kt)}(this,n)},set:function(t){return function(t,n,i){var o=t._d;r&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[f](n*e+o.o,i,kt)}(this,n,t)},enumerable:!0})};b?(d=n((function(t,n,r,i){l(t,d,c,"_d");var o,s,a,u,h=0,f=0;if(E(n)){if(!(n instanceof X||(u=_(n))==K||u==J))return St in n?Rt(d,n):Mt.call(d,n);o=n,f=Nt(r,e);var v=n.byteLength;if(void 0===i){if(v%e)throw z(Tt);if((s=v-f)<0)throw z(Tt)}else if((s=y(i)*e)+f>v)throw z(Tt);a=s/e}else a=g(n),o=new X(s=a*e);for(p(t,"_d",{b:o,o:f,l:s,e:a,v:new Z(o)});h<a;)I(t,h++)})),S=d.prototype=T(Wt),p(S,"constructor",d)):s((function(){d(1)}))&&s((function(){new d(-1)}))&&L((function(t){new d,new d(null),new d(1.5),new d(t)}),!0)||(d=n((function(t,n,r,i){var o;return l(t,d,c),E(n)?n instanceof X||(o=_(n))==K||o==J?void 0!==i?new v(n,Nt(r,e),i):void 0!==r?new v(n,Nt(r,e)):new v(n):St in n?Rt(d,n):Mt.call(d,n):new v(g(n))})),$(m!==Function.prototype?k(v).concat(k(m)):k(v),(function(t){t in d||p(d,t,v[t])})),d.prototype=S,i||(S.constructor=d));var A=S[mt],N=!!A&&("values"==A.name||null==A.name),x=qt.values;p(d,wt,!0),p(S,St,c),p(S,It,!0),p(S,_t,d),(r?new d(1)[bt]==c:bt in S)||q(S,bt,{get:function(){return c}}),w[c]=d,a(a.G+a.W+a.F*(d!=v),w),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*s((function(){v.of.call(d,1)})),c,{from:Mt,of:Lt}),Q in S||p(S,Q,e),a(a.P,c,Ut),F(c),a(a.P+a.F*At,c,{set:Bt}),a(a.P+a.F*!N,c,qt),i||S.toString==yt||(S.toString=yt),a(a.P+a.F*s((function(){new d(1).slice()})),c,{slice:Vt}),a(a.P+a.F*(s((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!s((function(){S.toLocaleString.call([1,2])}))),c,{toLocaleString:jt}),M[c]=N?A:x,i||N||p(S,mt,x)}}else t.exports=function(){}},9782:(t,e,n)=>{"use strict";var r=n(7381),i=n(4926),o=n(4219),s=n(9161),a=n(8012),u=n(7228),c=n(5810),h=n(2702),l=n(3230),f=n(8315),p=n(3472),d=n(2982).f,v=n(4835).f,y=n(1132),g=n(8094),m="ArrayBuffer",b="DataView",w="Wrong index!",_=r.ArrayBuffer,E=r.DataView,S=r.Math,I=r.RangeError,T=r.Infinity,C=_,k=S.abs,A=S.pow,N=S.floor,x=S.log,O=S.LN2,P="buffer",R="byteLength",D="byteOffset",M=i?"_b":P,L=i?"_l":R,F=i?"_o":D;function j(t,e,n){var r,i,o,s=new Array(n),a=8*n-e-1,u=(1<<a)-1,c=u>>1,h=23===e?A(2,-24)-A(2,-77):0,l=0,f=t<0||0===t&&1/t<0?1:0;for((t=k(t))!=t||t===T?(i=t!=t?1:0,r=u):(r=N(x(t)/O),t*(o=A(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?h/o:h*A(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*A(2,e),r+=c):(i=t*A(2,c-1)*A(2,e),r=0));e>=8;s[l++]=255&i,i/=256,e-=8);for(r=r<<e|i,a+=e;a>0;s[l++]=255&r,r/=256,a-=8);return s[--l]|=128*f,s}function U(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,s=o>>1,a=i-7,u=n-1,c=t[u--],h=127&c;for(c>>=7;a>0;h=256*h+t[u],u--,a-=8);for(r=h&(1<<-a)-1,h>>=-a,a+=e;a>0;r=256*r+t[u],u--,a-=8);if(0===h)h=1-s;else{if(h===o)return r?NaN:c?-T:T;r+=A(2,e),h-=s}return(c?-1:1)*r*A(2,h-e)}function V(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function B(t){return[255&t]}function q(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return j(t,52,8)}function H(t){return j(t,23,4)}function W(t,e,n){v(t.prototype,e,{get:function(){return this[n]}})}function K(t,e,n,r){var i=p(+n);if(i+e>t[L])throw I(w);var o=t[M]._b,s=i+t[F],a=o.slice(s,s+e);return r?a:a.reverse()}function J(t,e,n,r,i,o){var s=p(+n);if(s+e>t[L])throw I(w);for(var a=t[M]._b,u=s+t[F],c=r(+i),h=0;h<e;h++)a[u+h]=c[o?h:e-h-1]}if(s.ABV){if(!c((function(){_(1)}))||!c((function(){new _(-1)}))||c((function(){return new _,new _(1.5),new _(NaN),_.name!=m}))){for(var Q,Y=(_=function(t){return h(this,_),new C(p(t))}).prototype=C.prototype,X=d(C),Z=0;X.length>Z;)(Q=X[Z++])in _||a(_,Q,C[Q]);o||(Y.constructor=_)}var $=new E(new _(2)),tt=E.prototype.setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||u(E.prototype,{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else _=function(t){h(this,_,m);var e=p(t);this._b=y.call(new Array(e),0),this[L]=e},E=function(t,e,n){h(this,E,b),h(t,_,b);var r=t[L],i=l(e);if(i<0||i>r)throw I("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw I("Wrong length!");this[M]=t,this[F]=i,this[L]=n},i&&(W(_,R,"_l"),W(E,P,"_b"),W(E,R,"_l"),W(E,D,"_o")),u(E.prototype,{getInt8:function(t){return K(this,1,t)[0]<<24>>24},getUint8:function(t){return K(this,1,t)[0]},getInt16:function(t){var e=K(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=K(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return V(K(this,4,t,arguments[1]))},getUint32:function(t){return V(K(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return U(K(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return U(K(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){J(this,1,t,B,e)},setUint8:function(t,e){J(this,1,t,B,e)},setInt16:function(t,e){J(this,2,t,q,e,arguments[2])},setUint16:function(t,e){J(this,2,t,q,e,arguments[2])},setInt32:function(t,e){J(this,4,t,G,e,arguments[2])},setUint32:function(t,e){J(this,4,t,G,e,arguments[2])},setFloat32:function(t,e){J(this,4,t,H,e,arguments[2])},setFloat64:function(t,e){J(this,8,t,z,e,arguments[2])}});g(_,m),g(E,b),a(E.prototype,s.VIEW,!0),e.ArrayBuffer=_,e.DataView=E},9161:(t,e,n)=>{for(var r,i=n(7381),o=n(8012),s=n(7936),a=s("typed_array"),u=s("view"),c=!(!i.ArrayBuffer||!i.DataView),h=c,l=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(r=i[f[l++]])?(o(r.prototype,a,!0),o(r.prototype,u,!0)):h=!1;t.exports={ABV:c,CONSTR:h,TYPED:a,VIEW:u}},7936:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},851:(t,e,n)=>{var r=n(7381).navigator;t.exports=r&&r.userAgent||""},8546:(t,e,n)=>{var r=n(7156);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},5721:(t,e,n)=>{var r=n(7381),i=n(8544),o=n(4219),s=n(9078),a=n(4835).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},9078:(t,e,n)=>{e.f=n(3336)},3336:(t,e,n)=>{var r=n(3192)("wks"),i=n(7936),o=n(7381).Symbol,s="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=s&&o[t]||(s?o:i)("Symbol."+t))}).store=r},7637:(t,e,n)=>{var r=n(2858),i=n(3336)("iterator"),o=n(5301);t.exports=n(8544).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},4611:(t,e,n)=>{var r=n(5913);r(r.P,"Array",{copyWithin:n(2147)}),n(4339)("copyWithin")},9892:(t,e,n)=>{"use strict";var r=n(5913),i=n(3970)(4);r(r.P+r.F*!n(1411)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},9217:(t,e,n)=>{var r=n(5913);r(r.P,"Array",{fill:n(1132)}),n(4339)("fill")},9355:(t,e,n)=>{"use strict";var r=n(5913),i=n(3970)(2);r(r.P+r.F*!n(1411)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},109:(t,e,n)=>{"use strict";var r=n(5913),i=n(3970)(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),r(r.P+r.F*s,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(4339)(o)},4138:(t,e,n)=>{"use strict";var r=n(5913),i=n(3970)(5),o="find",s=!0;o in[]&&Array(1).find((function(){s=!1})),r(r.P+r.F*s,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(4339)(o)},791:(t,e,n)=>{"use strict";var r=n(5913),i=n(3970)(0),o=n(1411)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},8671:(t,e,n)=>{"use strict";var r=n(566),i=n(5913),o=n(2515),s=n(2471),a=n(7063),u=n(8315),c=n(1348),h=n(7637);i(i.S+i.F*!n(5508)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,l,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,g=0,m=h(f);if(y&&(v=r(v,d>2?arguments[2]:void 0,2)),null==m||p==Array&&a(m))for(n=new p(e=u(f.length));e>g;g++)c(n,g,y?v(f[g],g):f[g]);else for(l=m.call(f),n=new p;!(i=l.next()).done;g++)c(n,g,y?s(l,v,[i.value,g],!0):i.value);return n.length=g,n}})},4751:(t,e,n)=>{"use strict";var r=n(5913),i=n(4687)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(s||!n(1411)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},1621:(t,e,n)=>{var r=n(5913);r(r.S,"Array",{isArray:n(1320)})},4806:(t,e,n)=>{"use strict";var r=n(4339),i=n(7218),o=n(5301),s=n(8499);t.exports=n(4873)(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},9437:(t,e,n)=>{"use strict";var r=n(5913),i=n(8499),o=[].join;r(r.P+r.F*(n(331)!=Object||!n(1411)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},9822:(t,e,n)=>{"use strict";var r=n(5913),i=n(8499),o=n(3230),s=n(8315),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(1411)(a)),"Array",{lastIndexOf:function(t){if(u)return a.apply(this,arguments)||0;var e=i(this),n=s(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},633:(t,e,n)=>{"use strict";var r=n(5913),i=n(3970)(1);r(r.P+r.F*!n(1411)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},6705:(t,e,n)=>{"use strict";var r=n(5913),i=n(1348);r(r.S+r.F*n(5810)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},8738:(t,e,n)=>{"use strict";var r=n(5913),i=n(6419);r(r.P+r.F*!n(1411)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},9121:(t,e,n)=>{"use strict";var r=n(5913),i=n(6419);r(r.P+r.F*!n(1411)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},7263:(t,e,n)=>{"use strict";var r=n(5913),i=n(1225),o=n(3679),s=n(6241),a=n(8315),u=[].slice;r(r.P+r.F*n(5810)((function(){i&&u.call(i)})),"Array",{slice:function(t,e){var n=a(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=s(t,n),c=s(e,n),h=a(c-i),l=new Array(h),f=0;f<h;f++)l[f]="String"==r?this.charAt(i+f):this[i+f];return l}})},9253:(t,e,n)=>{"use strict";var r=n(5913),i=n(3970)(3);r(r.P+r.F*!n(1411)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},919:(t,e,n)=>{"use strict";var r=n(5913),i=n(6819),o=n(2515),s=n(5810),a=[].sort,u=[1,2,3];r(r.P+r.F*(s((function(){u.sort(void 0)}))||!s((function(){u.sort(null)}))||!n(1411)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),i(t))}})},3821:(t,e,n)=>{n(4798)("Array")},8384:(t,e,n)=>{var r=n(5913);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},9701:(t,e,n)=>{var r=n(5913),i=n(2115);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},2334:(t,e,n)=>{"use strict";var r=n(5913),i=n(2515),o=n(8537);r(r.P+r.F*n(5810)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},3233:(t,e,n)=>{var r=n(3336)("toPrimitive"),i=Date.prototype;r in i||n(8012)(i,r,n(296))},1325:(t,e,n)=>{var r=Date.prototype,i="Invalid Date",o=r.toString,s=r.getTime;new Date(NaN)+""!=i&&n(7278)(r,"toString",(function(){var t=s.call(this);return t==t?o.call(this):i}))},161:(t,e,n)=>{var r=n(5913);r(r.P,"Function",{bind:n(8327)})},15:(t,e,n)=>{"use strict";var r=n(7156),i=n(4153),o=n(3336)("hasInstance"),s=Function.prototype;o in s||n(4835).f(s,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},6042:(t,e,n)=>{var r=n(4835).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||n(4926)&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8969:(t,e,n)=>{"use strict";var r=n(4396),i=n(8546),o="Map";t.exports=n(1966)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,o),t);return e&&e.v},set:function(t,e){return r.def(i(this,o),0===t?0:t,e)}},r,!0)},4717:(t,e,n)=>{var r=n(5913),i=n(5447),o=Math.sqrt,s=Math.acosh;r(r.S+r.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},7292:(t,e,n)=>{var r=n(5913),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},1840:(t,e,n)=>{var r=n(5913),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},3255:(t,e,n)=>{var r=n(5913),i=n(4012);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},5728:(t,e,n)=>{var r=n(5913);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},6255:(t,e,n)=>{var r=n(5913),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},2834:(t,e,n)=>{var r=n(5913),i=n(4774);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},4489:(t,e,n)=>{var r=n(5913);r(r.S,"Math",{fround:n(3800)})},575:(t,e,n)=>{var r=n(5913),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,s=0,a=arguments.length,u=0;s<a;)u<(n=i(arguments[s++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},1369:(t,e,n)=>{var r=n(5913),i=Math.imul;r(r.S+r.F*n(5810)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,s=n&i;return 0|o*s+((n&r>>>16)*s+o*(n&i>>>16)<<16>>>0)}})},2751:(t,e,n)=>{var r=n(5913);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},9617:(t,e,n)=>{var r=n(5913);r(r.S,"Math",{log1p:n(5447)})},3656:(t,e,n)=>{var r=n(5913);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},1850:(t,e,n)=>{var r=n(5913);r(r.S,"Math",{sign:n(4012)})},5424:(t,e,n)=>{var r=n(5913),i=n(4774),o=Math.exp;r(r.S+r.F*n(5810)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},230:(t,e,n)=>{var r=n(5913),i=n(4774),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},8471:(t,e,n)=>{var r=n(5913);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},440:(t,e,n)=>{"use strict";var r=n(7381),i=n(5389),o=n(3679),s=n(3654),a=n(8537),u=n(5810),c=n(2982).f,h=n(3299).f,l=n(4835).f,f=n(618).trim,p="Number",d=r.Number,v=d,y=d.prototype,g=o(n(4275)(y))==p,m="trim"in String.prototype,b=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=m?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var s,u=e.slice(2),c=0,h=u.length;c<h;c++)if((s=u.charCodeAt(c))<48||s>i)return NaN;return parseInt(u,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?u((function(){y.valueOf.call(n)})):o(n)!=p)?s(new v(b(e)),n,d):b(e)};for(var w,_=n(4926)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;_.length>E;E++)i(v,w=_[E])&&!i(d,w)&&l(d,w,h(v,w));d.prototype=y,y.constructor=d,n(7278)(r,p,d)}},1914:(t,e,n)=>{var r=n(5913);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},4117:(t,e,n)=>{var r=n(5913),i=n(7381).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},9619:(t,e,n)=>{var r=n(5913);r(r.S,"Number",{isInteger:n(5127)})},5849:(t,e,n)=>{var r=n(5913);r(r.S,"Number",{isNaN:function(t){return t!=t}})},4750:(t,e,n)=>{var r=n(5913),i=n(5127),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},1550:(t,e,n)=>{var r=n(5913);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},3529:(t,e,n)=>{var r=n(5913);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},2791:(t,e,n)=>{var r=n(5913),i=n(5031);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},6831:(t,e,n)=>{var r=n(5913),i=n(6971);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},1077:(t,e,n)=>{"use strict";var r=n(5913),i=n(3230),o=n(9855),s=n(1924),a=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",l="0",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+s.call(l,7-n.length)+n}return e},v=function t(e,n,r){return 0===n?r:n%2==1?t(e,n-1,r*e):t(e*e,n/2,r)};r(r.P+r.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(5810)((function(){a.call({})}))),"Number",{toFixed:function(t){var e,n,r,a,u=o(this,h),c=i(t),y="",g=l;if(c<0||c>20)throw RangeError(h);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*v(2,69,1))-69)<0?u*v(2,-e,1):u/v(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(v(10,r,1),0),r=e-1;r>=23;)p(1<<23),r-=23;p(1<<r),f(1,1),p(2),g=d()}else f(0,n),f(1<<-e,0),g=d()+s.call(l,c);return c>0?y+((a=g.length)<=c?"0."+s.call(l,c-a)+g:g.slice(0,a-c)+"."+g.slice(a-c)):y+g}})},820:(t,e,n)=>{"use strict";var r=n(5913),i=n(5810),o=n(9855),s=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==s.call(1,void 0)}))||!i((function(){s.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},5331:(t,e,n)=>{var r=n(5913);r(r.S+r.F,"Object",{assign:n(8559)})},3290:(t,e,n)=>{var r=n(5913);r(r.S,"Object",{create:n(4275)})},8424:(t,e,n)=>{var r=n(5913);r(r.S+r.F*!n(4926),"Object",{defineProperties:n(6447)})},3690:(t,e,n)=>{var r=n(5913);r(r.S+r.F*!n(4926),"Object",{defineProperty:n(4835).f})},754:(t,e,n)=>{var r=n(7156),i=n(3763).onFreeze;n(4057)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},2357:(t,e,n)=>{var r=n(8499),i=n(3299).f;n(4057)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},6022:(t,e,n)=>{n(4057)("getOwnPropertyNames",(function(){return n(3136).f}))},6667:(t,e,n)=>{var r=n(2515),i=n(4153);n(4057)("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},4919:(t,e,n)=>{var r=n(7156);n(4057)("isExtensible",(function(t){return function(e){return!!r(e)&&(!t||t(e))}}))},9219:(t,e,n)=>{var r=n(7156);n(4057)("isFrozen",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},3270:(t,e,n)=>{var r=n(7156);n(4057)("isSealed",(function(t){return function(e){return!r(e)||!!t&&t(e)}}))},2456:(t,e,n)=>{var r=n(5913);r(r.S,"Object",{is:n(4261)})},2506:(t,e,n)=>{var r=n(2515),i=n(9924);n(4057)("keys",(function(){return function(t){return i(r(t))}}))},6527:(t,e,n)=>{var r=n(7156),i=n(3763).onFreeze;n(4057)("preventExtensions",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},7571:(t,e,n)=>{var r=n(7156),i=n(3763).onFreeze;n(4057)("seal",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},8490:(t,e,n)=>{var r=n(5913);r(r.S,"Object",{setPrototypeOf:n(6931).set})},4554:(t,e,n)=>{"use strict";var r=n(2858),i={};i[n(3336)("toStringTag")]="z",i+""!="[object z]"&&n(7278)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},3271:(t,e,n)=>{var r=n(5913),i=n(5031);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},317:(t,e,n)=>{var r=n(5913),i=n(6971);r(r.G+r.F*(parseInt!=i),{parseInt:i})},829:(t,e,n)=>{"use strict";var r,i,o,s,a=n(4219),u=n(7381),c=n(566),h=n(2858),l=n(5913),f=n(7156),p=n(6819),d=n(2702),v=n(2734),y=n(2035),g=n(8220).set,m=n(1842)(),b=n(4086),w=n(8228),_=n(851),E=n(3507),S="Promise",I=u.TypeError,T=u.process,C=T&&T.versions,k=C&&C.v8||"",A=u.Promise,N="process"==h(T),x=function(){},O=i=b.f,P=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(3336)("species")]=function(t){t(x,x)};return(N||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e&&0!==k.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(t){}}(),R=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;m((function(){for(var r=t._v,i=1==t._s,o=0,s=function(e){var n,o,s,a=i?e.ok:e.fail,u=e.resolve,c=e.reject,h=e.domain;try{a?(i||(2==t._h&&F(t),t._h=1),!0===a?n=r:(h&&h.enter(),n=a(r),h&&(h.exit(),s=!0)),n===e.promise?c(I("Promise-chain cycle")):(o=R(n))?o.call(n,u,c):u(n)):c(r)}catch(t){h&&!s&&h.exit(),c(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)}))}},M=function(t){g.call(u,(function(){var e,n,r,i=t._v,o=L(t);if(o&&(e=w((function(){N?T.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=N||L(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){g.call(u,(function(){var e;N?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},U=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw I("Promise can't be resolved itself");(n=R(e))?m((function(){var i={_w:r,_d:!1};try{n.call(e,c(t,i,1),c(j,i,1))}catch(t){j.call(i,t)}})):(r._v=e,r._s=1,D(r,!1))}catch(t){j.call({_w:r,_d:!1},t)}}};P||(A=function(t){d(this,A,S,"_h"),p(t),r.call(this);try{t(c(U,this,1),c(j,this,1))}catch(t){j.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(7228)(A.prototype,{then:function(t,e){var n=O(y(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=N?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(U,t,1),this.reject=c(j,t,1)},b.f=O=function(t){return t===A||t===s?new o(t):i(t)}),l(l.G+l.W+l.F*!P,{Promise:A}),n(8094)(A,S),n(4798)(S),s=n(8544).Promise,l(l.S+l.F*!P,S,{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!P),S,{resolve:function(t){return E(a&&this===s?A:this,t)}}),l(l.S+l.F*!(P&&n(5508)((function(t){A.all(t).catch(x)}))),S,{all:function(t){var e=this,n=O(e),r=n.resolve,i=n.reject,o=w((function(){var n=[],o=0,s=1;v(t,!1,(function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then((function(t){u||(u=!0,n[a]=t,--s||r(n))}),i)})),--s||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=O(e),r=n.reject,i=w((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},1220:(t,e,n)=>{var r=n(5913),i=n(6819),o=n(6154),s=(n(7381).Reflect||{}).apply,a=Function.apply;r(r.S+r.F*!n(5810)((function(){s((function(){}))})),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return s?s(r,e,u):a.call(r,e,u)}})},9263:(t,e,n)=>{var r=n(5913),i=n(4275),o=n(6819),s=n(6154),a=n(7156),u=n(5810),c=n(8327),h=(n(7381).Reflect||{}).construct,l=u((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),f=!u((function(){h((function(){}))}));r(r.S+r.F*(l||f),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!l)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,p=i(a(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return a(d)?d:p}})},7622:(t,e,n)=>{var r=n(4835),i=n(5913),o=n(6154),s=n(8537);i(i.S+i.F*n(5810)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},9060:(t,e,n)=>{var r=n(5913),i=n(3299).f,o=n(6154);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},980:(t,e,n)=>{"use strict";var r=n(5913),i=n(6154),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(8258)(o,"Object",(function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}})),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},8484:(t,e,n)=>{var r=n(3299),i=n(5913),o=n(6154);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},9869:(t,e,n)=>{var r=n(5913),i=n(4153),o=n(6154);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},6175:(t,e,n)=>{var r=n(3299),i=n(4153),o=n(5389),s=n(5913),a=n(7156),u=n(6154);s(s.S,"Reflect",{get:function t(e,n){var s,c,h=arguments.length<3?e:arguments[2];return u(e)===h?e[n]:(s=r.f(e,n))?o(s,"value")?s.value:void 0!==s.get?s.get.call(h):void 0:a(c=i(e))?t(c,n,h):void 0}})},1285:(t,e,n)=>{var r=n(5913);r(r.S,"Reflect",{has:function(t,e){return e in t}})},4854:(t,e,n)=>{var r=n(5913),i=n(6154),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},6647:(t,e,n)=>{var r=n(5913);r(r.S,"Reflect",{ownKeys:n(2600)})},7903:(t,e,n)=>{var r=n(5913),i=n(6154),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},3113:(t,e,n)=>{var r=n(5913),i=n(6931);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},5197:(t,e,n)=>{var r=n(4835),i=n(3299),o=n(4153),s=n(5389),a=n(5913),u=n(6256),c=n(6154),h=n(7156);a(a.S,"Reflect",{set:function t(e,n,a){var l,f,p=arguments.length<4?e:arguments[3],d=i.f(c(e),n);if(!d){if(h(f=o(e)))return t(f,n,a,p);d=u(0)}if(s(d,"value")){if(!1===d.writable||!h(p))return!1;if(l=i.f(p,n)){if(l.get||l.set||!1===l.writable)return!1;l.value=a,r.f(p,n,l)}else r.f(p,n,u(0,a));return!0}return void 0!==d.set&&(d.set.call(p,a),!0)}})},2566:(t,e,n)=>{var r=n(7381),i=n(3654),o=n(4835).f,s=n(2982).f,a=n(1993),u=n(2188),c=r.RegExp,h=c,l=c.prototype,f=/a/g,p=/a/g,d=new c(f)!==f;if(n(4926)&&(!d||n(5810)((function(){return p[n(3336)("match")]=!1,c(f)!=f||c(p)==p||"/a/i"!=c(f,"i")})))){c=function(t,e){var n=this instanceof c,r=a(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(d?new h(r&&!o?t.source:t,e):h((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:l,c)};for(var v=function(t){t in c||o(c,t,{configurable:!0,get:function(){return h[t]},set:function(e){h[t]=e}})},y=s(h),g=0;y.length>g;)v(y[g++]);l.constructor=c,c.prototype=l,n(7278)(r,"RegExp",c)}n(4798)("RegExp")},5997:(t,e,n)=>{"use strict";var r=n(6997);n(5913)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},7181:(t,e,n)=>{n(4926)&&"g"!=/./g.flags&&n(4835).f(RegExp.prototype,"flags",{configurable:!0,get:n(2188)})},8682:(t,e,n)=>{"use strict";var r=n(6154),i=n(8315),o=n(1330),s=n(4585);n(8644)("match",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var u=r(t),c=String(this);if(!u.global)return s(u,c);var h=u.unicode;u.lastIndex=0;for(var l,f=[],p=0;null!==(l=s(u,c));){var d=String(l[0]);f[p]=d,""===d&&(u.lastIndex=o(c,i(u.lastIndex),h)),p++}return 0===p?null:f}]}))},8514:(t,e,n)=>{"use strict";var r=n(6154),i=n(2515),o=n(8315),s=n(3230),a=n(1330),u=n(4585),c=Math.max,h=Math.min,l=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(8644)("replace",2,(function(t,e,n,d){return[function(r,i){var o=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=d(n,t,this,e);if(i.done)return i.value;var l=r(t),f=String(this),p="function"==typeof e;p||(e=String(e));var y=l.global;if(y){var g=l.unicode;l.lastIndex=0}for(var m=[];;){var b=u(l,f);if(null===b)break;if(m.push(b),!y)break;""===String(b[0])&&(l.lastIndex=a(f,o(l.lastIndex),g))}for(var w,_="",E=0,S=0;S<m.length;S++){b=m[S];for(var I=String(b[0]),T=c(h(s(b.index),f.length),0),C=[],k=1;k<b.length;k++)C.push(void 0===(w=b[k])?w:String(w));var A=b.groups;if(p){var N=[I].concat(C,T,f);void 0!==A&&N.push(A);var x=String(e.apply(void 0,N))}else x=v(I,f,T,C,A,e);T>=E&&(_+=f.slice(E,T)+x,E=T+I.length)}return _+f.slice(E)}];function v(t,e,r,o,s,a){var u=r+t.length,c=o.length,h=p;return void 0!==s&&(s=i(s),h=f),n.call(a,h,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":a=s[i.slice(1,-1)];break;default:var h=+i;if(0===h)return n;if(h>c){var f=l(h/10);return 0===f?n:f<=c?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}a=o[h-1]}return void 0===a?"":a}))}}))},5105:(t,e,n)=>{"use strict";var r=n(6154),i=n(4261),o=n(4585);n(8644)("search",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var a=r(t),u=String(this),c=a.lastIndex;i(c,0)||(a.lastIndex=0);var h=o(a,u);return i(a.lastIndex,c)||(a.lastIndex=c),null===h?-1:h.index}]}))},5325:(t,e,n)=>{"use strict";var r=n(1993),i=n(6154),o=n(2035),s=n(1330),a=n(8315),u=n(4585),c=n(6997),h=n(5810),l=Math.min,f=[].push,p=4294967295,d=!h((function(){RegExp(p,"y")}));n(8644)("split",2,(function(t,e,n,h){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,s,a,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,d=void 0===e?p:e>>>0,v=new RegExp(t.source,h+"g");(o=c.call(v,i))&&!((s=v.lastIndex)>l&&(u.push(i.slice(l,o.index)),o.length>1&&o.index<i.length&&f.apply(u,o.slice(1)),a=o[0].length,l=s,u.length>=d));)v.lastIndex===o.index&&v.lastIndex++;return l===i.length?!a&&v.test("")||u.push(""):u.push(i.slice(l)),u.length>d?u.slice(0,d):u}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(t,e){var r=h(v,t,this,e,v!==n);if(r.done)return r.value;var c=i(t),f=String(this),y=o(c,RegExp),g=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(d?"y":"g"),b=new y(d?c:"^(?:"+c.source+")",m),w=void 0===e?p:e>>>0;if(0===w)return[];if(0===f.length)return null===u(b,f)?[f]:[];for(var _=0,E=0,S=[];E<f.length;){b.lastIndex=d?E:0;var I,T=u(b,d?f:f.slice(E));if(null===T||(I=l(a(b.lastIndex+(d?0:E)),f.length))===_)E=s(f,E,g);else{if(S.push(f.slice(_,E)),S.length===w)return S;for(var C=1;C<=T.length-1;C++)if(S.push(T[C]),S.length===w)return S;E=_=I}}return S.push(f.slice(_)),S}]}))},8359:(t,e,n)=>{"use strict";n(7181);var r=n(6154),i=n(2188),o=n(4926),s="toString",a=/./.toString,u=function(t){n(7278)(RegExp.prototype,s,t,!0)};n(5810)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?u((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):a.name!=s&&u((function(){return a.call(this)}))},3940:(t,e,n)=>{"use strict";var r=n(4396),i=n(8546);t.exports=n(1966)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},9718:(t,e,n)=>{"use strict";n(9927)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},3845:(t,e,n)=>{"use strict";n(9927)("big",(function(t){return function(){return t(this,"big","","")}}))},5803:(t,e,n)=>{"use strict";n(9927)("blink",(function(t){return function(){return t(this,"blink","","")}}))},2222:(t,e,n)=>{"use strict";n(9927)("bold",(function(t){return function(){return t(this,"b","","")}}))},5281:(t,e,n)=>{"use strict";var r=n(5913),i=n(3593)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},3917:(t,e,n)=>{"use strict";var r=n(5913),i=n(8315),o=n(2376),s="endsWith",a="".endsWith;r(r.P+r.F*n(3483)(s),"String",{endsWith:function(t){var e=o(this,t,s),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),u=void 0===n?r:Math.min(i(n),r),c=String(t);return a?a.call(e,c,u):e.slice(u-c.length,u)===c}})},5036:(t,e,n)=>{"use strict";n(9927)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},6131:(t,e,n)=>{"use strict";n(9927)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},4110:(t,e,n)=>{"use strict";n(9927)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},8577:(t,e,n)=>{var r=n(5913),i=n(6241),o=String.fromCharCode,s=String.fromCodePoint;r(r.S+r.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,s=0;r>s;){if(e=+arguments[s++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},5450:(t,e,n)=>{"use strict";var r=n(5913),i=n(2376),o="includes";r(r.P+r.F*n(3483)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},6235:(t,e,n)=>{"use strict";n(9927)("italics",(function(t){return function(){return t(this,"i","","")}}))},6575:(t,e,n)=>{"use strict";var r=n(3593)(!0);n(4873)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},6495:(t,e,n)=>{"use strict";n(9927)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},7906:(t,e,n)=>{var r=n(5913),i=n(8499),o=n(8315);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<r&&s.push(String(arguments[a]));return s.join("")}})},9449:(t,e,n)=>{var r=n(5913);r(r.P,"String",{repeat:n(1924)})},4162:(t,e,n)=>{"use strict";n(9927)("small",(function(t){return function(){return t(this,"small","","")}}))},1616:(t,e,n)=>{"use strict";var r=n(5913),i=n(8315),o=n(2376),s="startsWith",a="".startsWith;r(r.P+r.F*n(3483)(s),"String",{startsWith:function(t){var e=o(this,t,s),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},5297:(t,e,n)=>{"use strict";n(9927)("strike",(function(t){return function(){return t(this,"strike","","")}}))},1466:(t,e,n)=>{"use strict";n(9927)("sub",(function(t){return function(){return t(this,"sub","","")}}))},2581:(t,e,n)=>{"use strict";n(9927)("sup",(function(t){return function(){return t(this,"sup","","")}}))},8587:(t,e,n)=>{"use strict";n(618)("trim",(function(t){return function(){return t(this,3)}}))},2403:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(7381),o=n(5389),s=n(4926),a=n(5913),u=n(7278),c=n(3763).KEY,h=n(5810),l=n(3192),f=n(8094),p=n(7936),d=n(3336),v=n(9078),y=n(5721),g=n(8727),m=n(1320),b=n(6154),w=n(7156),_=n(2515),E=n(8499),S=n(8537),I=n(6256),T=n(4275),C=n(3136),k=n(3299),A=n(5421),N=n(4835),x=n(9924),O=k.f,P=N.f,R=C.f,D=i.Symbol,M=i.JSON,L=M&&M.stringify,F=d("_hidden"),j=d("toPrimitive"),U={}.propertyIsEnumerable,V=l("symbol-registry"),B=l("symbols"),q=l("op-symbols"),G=Object.prototype,z="function"==typeof D&&!!A.f,H=i.QObject,W=!H||!H.prototype||!H.prototype.findChild,K=s&&h((function(){return 7!=T(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=O(G,e);r&&delete G[e],P(t,e,n),r&&t!==G&&P(G,e,r)}:P,J=function(t){var e=B[t]=T(D.prototype);return e._k=t,e},Q=z&&"symbol"==r(D.iterator)?function(t){return"symbol"==r(t)}:function(t){return t instanceof D},Y=function(t,e,n){return t===G&&Y(q,e,n),b(t),e=S(e,!0),b(n),o(B,e)?(n.enumerable?(o(t,F)&&t[F][e]&&(t[F][e]=!1),n=T(n,{enumerable:I(0,!1)})):(o(t,F)||P(t,F,I(1,{})),t[F][e]=!0),K(t,e,n)):P(t,e,n)},X=function(t,e){b(t);for(var n,r=g(e=E(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},Z=function(t){var e=U.call(this,t=S(t,!0));return!(this===G&&o(B,t)&&!o(q,t))&&(!(e||!o(this,t)||!o(B,t)||o(this,F)&&this[F][t])||e)},$=function(t,e){if(t=E(t),e=S(e,!0),t!==G||!o(B,e)||o(q,e)){var n=O(t,e);return!n||!o(B,e)||o(t,F)&&t[F][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=R(E(t)),r=[],i=0;n.length>i;)o(B,e=n[i++])||e==F||e==c||r.push(e);return r},et=function(t){for(var e,n=t===G,r=R(n?q:E(t)),i=[],s=0;r.length>s;)!o(B,e=r[s++])||n&&!o(G,e)||i.push(B[e]);return i};z||(u((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function e(n){this===G&&e.call(q,n),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),K(this,t,I(1,n))};return s&&W&&K(G,t,{configurable:!0,set:e}),J(t)}).prototype,"toString",(function(){return this._k})),k.f=$,N.f=Y,n(2982).f=C.f=tt,n(4616).f=Z,A.f=et,s&&!n(4219)&&u(G,"propertyIsEnumerable",Z,!0),v.f=function(t){return J(d(t))}),a(a.G+a.W+a.F*!z,{Symbol:D});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)d(nt[rt++]);for(var it=x(d.store),ot=0;it.length>ot;)y(it[ot++]);a(a.S+a.F*!z,"Symbol",{for:function(t){return o(V,t+="")?V[t]:V[t]=D(t)},keyFor:function(t){if(!Q(t))throw TypeError(t+" is not a symbol!");for(var e in V)if(V[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!z,"Object",{create:function(t,e){return void 0===e?T(t):X(T(t),e)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var st=h((function(){A.f(1)}));a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return A.f(_(t))}}),M&&a(a.S+a.F*(!z||h((function(){var t=D();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(w(e)||void 0!==t)&&!Q(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Q(e))return e}),r[1]=e,L.apply(M,r)}}),D.prototype[j]||n(8012)(D.prototype,j,D.prototype.valueOf),f(D,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},7195:(t,e,n)=>{"use strict";var r=n(5913),i=n(9161),o=n(9782),s=n(6154),a=n(6241),u=n(8315),c=n(7156),h=n(7381).ArrayBuffer,l=n(2035),f=o.ArrayBuffer,p=o.DataView,d=i.ABV&&h.isView,v=f.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(h!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return d&&d(t)||c(t)&&y in t}}),r(r.P+r.U+r.F*n(5810)((function(){return!new f(2).slice(1,void 0).byteLength})),g,{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(s(this),t);for(var n=s(this).byteLength,r=a(t,n),i=a(void 0===e?n:e,n),o=new(l(this,f))(u(i-r)),c=new p(this),h=new p(o),d=0;r<i;)h.setUint8(d++,c.getUint8(r++));return o}}),n(4798)(g)},5345:(t,e,n)=>{var r=n(5913);r(r.G+r.W+r.F*!n(9161).ABV,{DataView:n(9782).DataView})},8824:(t,e,n)=>{n(431)("Float32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},6472:(t,e,n)=>{n(431)("Float64",8,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},7683:(t,e,n)=>{n(431)("Int16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},4797:(t,e,n)=>{n(431)("Int32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},6670:(t,e,n)=>{n(431)("Int8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},1123:(t,e,n)=>{n(431)("Uint16",2,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},4871:(t,e,n)=>{n(431)("Uint32",4,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},7736:(t,e,n)=>{n(431)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}))},4457:(t,e,n)=>{n(431)("Uint8",1,(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0)},3491:(t,e,n)=>{"use strict";var r,i=n(7381),o=n(3970)(0),s=n(7278),a=n(3763),u=n(8559),c=n(4495),h=n(7156),l=n(8546),f=n(8546),p=!i.ActiveXObject&&"ActiveXObject"in i,d="WeakMap",v=a.getWeak,y=Object.isExtensible,g=c.ufstore,m=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(t){if(h(t)){var e=v(t);return!0===e?g(l(this,d)).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(l(this,d),t,e)}},w=t.exports=n(1966)(d,m,b,c,!0,!0);f&&p&&(u((r=c.getConstructor(m,d)).prototype,b),a.NEED=!0,o(["delete","has","get","set"],(function(t){var e=w.prototype,n=e[t];s(e,t,(function(e,i){if(h(e)&&!y(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)}))})))},6332:(t,e,n)=>{"use strict";var r=n(4495),i=n(8546),o="WeakSet";n(1966)(o,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return r.def(i(this,o),t,!0)}},r,!1,!0)},6032:(t,e,n)=>{"use strict";var r=n(5913),i=n(3120),o=n(2515),s=n(8315),a=n(6819),u=n(5486);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return a(t),e=s(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(4339)("flatMap")},2963:(t,e,n)=>{"use strict";var r=n(5913),i=n(4687)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(4339)("includes")},8217:(t,e,n)=>{var r=n(5913),i=n(8941)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},9168:(t,e,n)=>{var r=n(5913),i=n(2600),o=n(8499),s=n(3299),a=n(1348);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=s.f,c=i(r),h={},l=0;c.length>l;)void 0!==(n=u(r,e=c[l++]))&&a(h,e,n);return h}})},6351:(t,e,n)=>{var r=n(5913),i=n(8941)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},8088:(t,e,n)=>{"use strict";var r=n(5913),i=n(8544),o=n(7381),s=n(2035),a=n(3507);r(r.P+r.R,"Promise",{finally:function(t){var e=s(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then((function(){return n}))}:t,n?function(n){return a(e,t()).then((function(){throw n}))}:t)}})},2123:(t,e,n)=>{"use strict";var r=n(5913),i=n(1925),o=n(851),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*s,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},9391:(t,e,n)=>{"use strict";var r=n(5913),i=n(1925),o=n(851),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*s,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},6541:(t,e,n)=>{"use strict";n(618)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},1767:(t,e,n)=>{"use strict";n(618)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},4870:(t,e,n)=>{n(5721)("asyncIterator")},1094:(t,e,n)=>{for(var r=n(4806),i=n(9924),o=n(7278),s=n(7381),a=n(8012),u=n(5301),c=n(3336),h=c("iterator"),l=c("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],b=s[g],w=b&&b.prototype;if(w&&(w[h]||a(w,h,f),w[l]||a(w,l,g),u[g]=f,m))for(y in r)w[y]||o(w,y,r[y],!0)}},1605:(t,e,n)=>{var r=n(5913),i=n(8220);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},2113:(t,e,n)=>{var r=n(7381),i=n(5913),o=n(851),s=[].slice,a=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&s.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*a,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},7942:(t,e,n)=>{n(2113),n(1605),n(1094),t.exports=n(8544)},9826:t=>{t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},8006:(t,e,n)=>{var r=n(8549);t.exports=function(t,e){return new r(t,e)},t.exports.Socket=r,t.exports.protocol=r.protocol,t.exports.Transport=n(1675),t.exports.transports=n(141),t.exports.parser=n(1870)},8549:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=n(141),h=n(2326),l=n(3571)("engine.io-client:socket"),f=n(1870),p=n(6771),d=n(5903),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(g,t);var e,n,h,v,y=(h=g,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(h);if(v){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function g(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,g),e=y.call(this),t&&"object"===r(t)&&(n=t,t=null),t?(t=p(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=p(n.host).host),e.secure=null!=n.secure?n.secure:"undefined"!=typeof location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=e.secure?"443":"80"),e.hostname=n.hostname||("undefined"!=typeof location?location.hostname:"localhost"),e.port=n.port||("undefined"!=typeof location&&location.port?location.port:e.secure?443:80),e.transports=n.transports||["polling","websocket"],e.readyState="",e.writeBuffer=[],e.prevBufferLen=0,e.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,jsonp:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),e.opts.path=e.opts.path.replace(/\/$/,"")+"/","string"==typeof e.opts.query&&(e.opts.query=d.decode(e.opts.query)),e.id=null,e.upgrades=null,e.pingInterval=null,e.pingTimeout=null,e.pingTimeoutTimer=null,"function"==typeof addEventListener&&(e.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){e.transport&&(e.transport.removeAllListeners(),e.transport.close())}),!1),"localhost"!==e.hostname&&(e.offlineEventListener=function(){e.onClose("transport close")},addEventListener("offline",e.offlineEventListener,!1))),e.open(),e}return e=g,(n=[{key:"createTransport",value:function(t){l('creating transport "%s"',t);var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=f.protocol,e.transport=t,this.id&&(e.sid=this.id);var n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return l("options: %j",n),new c[t](n)}},{key:"open",value:function(){var t,e=this;if(this.opts.rememberUpgrade&&g.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void setTimeout((function(){e.emit("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return l("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;l("setting transport %s",t.name),this.transport&&(l("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){e.onClose("transport close")}))}},{key:"probe",value:function(t){var e=this;l('probing transport "%s"',t);var n=this.createTransport(t,{probe:1}),r=!1;g.priorWebsocketSuccess=!1;var i=function(){r||(l('probe transport "%s" opened',t),n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(i){if(!r)if("pong"===i.type&&"probe"===i.data){if(l('probe transport "%s" pong',t),e.upgrading=!0,e.emit("upgrading",n),!n)return;g.priorWebsocketSuccess="websocket"===n.name,l('pausing current transport "%s"',e.transport.name),e.transport.pause((function(){r||"closed"!==e.readyState&&(l("changing transport and sending upgrade packet"),h(),e.setTransport(n),n.send([{type:"upgrade"}]),e.emit("upgrade",n),n=null,e.upgrading=!1,e.flush())}))}else{l('probe transport "%s" failed',t);var o=new Error("probe error");o.transport=n.name,e.emit("upgradeError",o)}})))};function o(){r||(r=!0,h(),n.close(),n=null)}var s=function(r){var i=new Error("probe error: "+r);i.transport=n.name,o(),l('probe transport "%s" failed because of error: %s',t,r),e.emit("upgradeError",i)};function a(){s("transport closed")}function u(){s("socket closed")}function c(t){n&&t.name!==n.name&&(l('"%s" works - aborting "%s"',t.name,n.name),o())}var h=function(){n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),e.removeListener("close",u),e.removeListener("upgrading",c)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",u),this.once("upgrading",c),n.open()}},{key:"onOpen",value:function(){if(l("socket open"),this.readyState="open",g.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){l("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(l('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emit("ping"),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else l('packet received with socket readyState "%s"',this.readyState)}},{key:"onHandshake",value:function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;clearTimeout(this.pingTimeoutTimer),this.pingTimeoutTimer=setTimeout((function(){t.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(l("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),l("socket closing - telling transport to close"),t.transport.close()},n=function n(){t.removeListener("upgrade",n),t.removeListener("upgradeError",n),e()},r=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){t.upgrading?r():e()})):this.upgrading?r():e()),this}},{key:"onError",value:function(t){l("socket error %j",t),g.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(l('socket close with reason: "%s"',t),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}])&&o(e.prototype,n),g}(h);v.priorWebsocketSuccess=!1,v.protocol=f.protocol,t.exports=v},1675:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=n(1870),c=n(2326),h=n(3571)("engine.io-client:transport"),l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(f,t);var e,n,r,c,l=(r=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(r);if(c){var n=a(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return s(this,t)});function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=l.call(this)).opts=t,e.query=t.query,e.readyState="",e.socket=t.socket,e}return e=f,(n=[{key:"onError",value:function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState?this.write(t):h("transport is not open, discarding packets")}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,this.emit("open")}},{key:"onData",value:function(t){var e=u.decodePacket(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){this.emit("packet",t)}},{key:"onClose",value:function(){this.readyState="closed",this.emit("close")}}])&&i(e.prototype,n),f}(c);t.exports=l},141:(t,e,n)=>{var r=n(9593),i=n(4864),o=n(2166),s=n(3819);e.polling=function(t){var e=!1,n=!1,s=!1!==t.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,u=location.port;u||(u=a?443:80),e=t.hostname!==location.hostname||u!==t.port,n=t.secure!==a}if(t.xdomain=e,t.xscheme=n,"open"in new r(t)&&!t.forceJSONP)return new i(t);if(!s)throw new Error("JSONP disabled");return new o(t)},e.websocket=s},2166:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h,l=n(3674),f=n(9826),p=/\n/g,d=/\\n/g,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(y,t);var e,n,r,l,v=(r=y,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(r);if(l){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function y(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(e=v.call(this,t)).query=e.query||{},h||(h=f.___eio=f.___eio||[]),e.index=h.length,h.push(e.onData.bind(u(e))),e.query.j=e.index,e}return e=y,(n=[{key:"supportsBinary",get:function(){return!1}},{key:"doClose",value:function(){this.script&&(this.script.onerror=function(){},this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o(c(y.prototype),"doClose",this).call(this)}},{key:"doPoll",value:function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)}},{key:"doWrite",value:function(t,e){var n,r=this;if(!this.form){var i=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=s,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function a(){u(),e()}this.form.action=this.uri();var u=function(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(t)}catch(t){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n};u(),t=t.replace(d,"\\\n"),this.area.value=t.replace(p,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&a()}:this.iframe.onload=a}}])&&i(e.prototype,n),y}(l);t.exports=v},4864:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=n(9593),p=n(3674),d=n(2326),v=n(8297).pick,y=n(9826),g=n(3571)("engine.io-client:polling-xhr");function m(){}var b=null!=new f({xdomain:!1}).responseType,w=function(t){a(n,t);var e=c(n);function n(t){var r;if(i(this,n),r=e.call(this,t),"undefined"!=typeof location){var o="https:"===location.protocol,s=location.port;s||(s=o?443:80),r.xd="undefined"!=typeof location&&t.hostname!==location.hostname||s!==t.port,r.xs=t.secure!==o}var a=t&&t.forceBase64;return r.supportsBinary=b&&!a,r}return s(n,[{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new _(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(function(t){n.onError("xhr post error",t)}))}},{key:"doPoll",value:function(){var t=this;g("xhr poll");var e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),n}(p),_=function(t){a(n,t);var e=c(n);function n(t,r){var o;return i(this,n),(o=e.call(this)).opts=r,o.method=r.method||"GET",o.uri=t,o.async=!1!==r.async,o.data=void 0!==r.data?r.data:null,o.create(),o}return s(n,[{key:"create",value:function(){var t=this,e=v(this.opts,"agent","enablesXDR","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var r=this.xhr=new f(e);try{g("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(t){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{r.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),this.hasXDR()?(r.onload=function(){t.onLoad()},r.onerror=function(){t.onError(r.responseText)}):r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?t.onLoad():setTimeout((function(){t.onError("number"==typeof r.status?r.status:0)}),0))},g("xhr data %s",this.data),r.send(this.data)}catch(e){return void setTimeout((function(){t.onError(e)}),0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(t){this.emit("data",t),this.onSuccess()}},{key:"onError",value:function(t){this.emit("error",t),this.cleanup(!0)}},{key:"cleanup",value:function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=m:this.xhr.onreadystatechange=m,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&this.onData(t)}},{key:"hasXDR",value:function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR}},{key:"abort",value:function(){this.cleanup()}}]),n}(d);function E(){for(var t in _.requests)_.requests.hasOwnProperty(t)&&_.requests[t].abort()}_.requestsCount=0,_.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",E):"function"==typeof addEventListener&&addEventListener("onpagehide"in y?"pagehide":"unload",E,!1)),t.exports=w,t.exports.Request=_},3674:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=n(1675),h=n(5903),l=n(1870),f=n(8272),p=n(3571)("engine.io-client:polling"),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(v,t);var e,n,r,c,d=(r=v,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(r);if(c){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function v(){return i(this,v),d.apply(this,arguments)}return e=v,(n=[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){p("paused"),e.readyState="paused",t()};if(this.polling||!this.writable){var r=0;this.polling&&(p("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){p("pre-pause polling complete"),--r||n()}))),this.writable||(p("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){p("pre-pause writing complete"),--r||n()})))}else n()}},{key:"poll",value:function(){p("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(t){var e=this;p("polling got data %s",t),l.decodePayload(t,this.socket.binaryType).forEach((function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))}},{key:"doClose",value:function(){var t=this,e=function(){p("writing close packet"),t.write([{type:"close"}])};"open"===this.readyState?(p("transport open - closing"),e()):(p("transport not open - deferring close"),this.once("open",e))}},{key:"write",value:function(t){var e=this;this.writable=!1,l.encodePayload(t,(function(t){e.doWrite(t,(function(){e.writable=!0,e.emit("drain")}))}))}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"https":"http",n="";return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=f()),this.supportsBinary||t.sid||(t.b64=1),t=h.encode(t),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),t.length&&(t="?"+t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}}])&&o(e.prototype,n),v}(c);t.exports=d},4673:(t,e,n)=>{var r=n(9826),i="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t){return setTimeout(t,0)};t.exports={WebSocket:r.WebSocket||r.MozWebSocket,usingBrowserWebSocket:!0,defaultBinaryType:"arraybuffer",nextTick:i}},3819:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=n(1675),c=n(1870),h=n(5903),l=n(8272),f=n(8297).pick,p=n(4673),d=p.WebSocket,v=p.usingBrowserWebSocket,y=p.defaultBinaryType,g=p.nextTick,m=n(3571)("engine.io-client:websocket"),b="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(_,t);var e,n,r,p,w=(r=_,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(r);if(p){var n=a(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return s(this,t)});function _(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),(e=w.call(this,t)).supportsBinary=!t.forceBase64,e}return e=_,(n=[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=b?{}:f(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=v&&!b?e?new d(t,e):new d(t):new d(t,e,n)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||y,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var r=t[n],i=n===t.length-1;c.encodePacket(r,e.supportsBinary,(function(t){var n={};v||(r.options&&(n.compress=r.options.compress),e.opts.perMessageDeflate&&("string"==typeof t?Buffer.byteLength(t):t.length)<e.opts.perMessageDeflate.threshold&&(n.compress=!1));try{v?e.ws.send(t):e.ws.send(t,n)}catch(t){m("websocket closed before onclose event")}i&&g((function(){e.writable=!0,e.emit("drain")}))}))},r=0;r<t.length;r++)n(r)}},{key:"onClose",value:function(){u.prototype.onClose.call(this)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"wss":"ws",n="";return this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=l()),this.supportsBinary||(t.b64=1),(t=h.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+t}},{key:"check",value:function(){return!(!d||"__initialize"in d&&this.name===_.prototype.name)}}])&&i(e.prototype,n),_}(u);t.exports=w},8297:t=>{t.exports.pick=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})}},9593:(t,e,n)=>{var r=n(3369),i=n(9826);t.exports=function(t){var e=t.xdomain,n=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(t){}if(!e)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},3571:(t,e,n)=>{var r;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t="MISSING_ENV_VAR".DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=n(6596)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},6596:(t,e,n)=>{function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){function e(t){var n,r,o,s=null;function a(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(a.enabled){var o=a,s=Number(new Date),u=s-(n||s);o.diff=u,o.prev=n,o.curr=s,n=s,r[0]=e.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return"%";c++;var i=e.formatters[n];if("function"==typeof i){var s=r[c];t=i.call(o,s),r.splice(c,1),c--}return t})),e.formatArgs.call(o,r);var h=o.log||e.log;h.apply(o,r)}}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=i,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==s?s:(r!==e.namespaces&&(r=e.namespaces,o=e.enabled(t)),o)},set:function(t){s=t}}),"function"==typeof e.init&&e.init(a),a}function i(t,n){var r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[].concat(r(e.names.map(o)),r(e.skips.map(o).map((function(t){return"-"+t})))).join(",");return e.enable(""),t},e.enable=function(t){var n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(7462),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((function(n){e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},7462:t=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=1e3,r=60*n,i=60*r,o=24*i;function s(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,a){a=a||{};var u,c,h=e(t);if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===h&&isFinite(t))return a.long?(u=t,(c=Math.abs(u))>=o?s(u,c,o,"day"):c>=i?s(u,c,i,"hour"):c>=r?s(u,c,r,"minute"):c>=n?s(u,c,n,"second"):u+" ms"):function(t){var e=Math.abs(t);return e>=o?Math.round(t/o)+"d":e>=i?Math.round(t/i)+"h":e>=r?Math.round(t/r)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},8590:t=>{var e=Object.create(null);e.open="0",e.close="1",e.ping="2",e.pong="3",e.message="4",e.upgrade="5",e.noop="6";var n=Object.create(null);Object.keys(e).forEach((function(t){n[e[t]]=t})),t.exports={PACKET_TYPES:e,PACKET_TYPES_REVERSE:n,ERROR_PACKET:{type:"error",data:"parser error"}}},355:(t,e,n)=>{var r,i=n(8590),o=i.PACKET_TYPES_REVERSE,s=i.ERROR_PACKET;"function"==typeof ArrayBuffer&&(r=n(295));var a=function(t,e){if(r){var n=r.decode(t);return u(n,e)}return{base64:!0,data:t}},u=function(t,e){switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}};t.exports=function(t,e){if("string"!=typeof t)return{type:"message",data:u(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:a(t.substring(1),e)}:o[n]?t.length>1?{type:o[n],data:t.substring(1)}:{type:o[n]}:s}},8001:(t,e,n)=>{var r=n(8590).PACKET_TYPES,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),o="function"==typeof ArrayBuffer,s=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)};t.exports=function(t,e,n){var a,u=t.type,c=t.data;return i&&c instanceof Blob?e?n(c):s(c,n):o&&(c instanceof ArrayBuffer||(a=c,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer))?e?n(c instanceof ArrayBuffer?c:c.buffer):s(new Blob([c]),n):n(r[u]+(c||""))}},1870:(t,e,n)=>{var r=n(8001),i=n(355),o=String.fromCharCode(30);t.exports={protocol:4,encodePacket:r,encodePayload:function(t,e){var n=t.length,i=new Array(n),s=0;t.forEach((function(t,a){r(t,!1,(function(t){i[a]=t,++s===n&&e(i.join(o))}))}))},decodePacket:i,decodePayload:function(t,e){for(var n=t.split(o),r=[],s=0;s<n.length;s++){var a=i(n[s],e);if(r.push(a),"error"===a.type)break}return r}}},3369:t=>{try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},3815:function(t,e){var n,r,i,o;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),s(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),s(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})},"object"===s(e)?o(e):(r=[e],void 0===(i="function"==typeof(n=o)?n.apply(e,r):n)||(t.exports=i))},5903:(t,e)=>{e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},6771:t=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var r,i,o=t,s=t.indexOf("["),a=t.indexOf("]");-1!=s&&-1!=a&&(t=t.substring(0,s)+t.substring(s,a).replace(/:/g,";")+t.substring(a,t.length));for(var u,c,h=e.exec(t||""),l={},f=14;f--;)l[n[f]]=h[f]||"";return-1!=s&&-1!=a&&(l.source=o,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=(r=l.path,i=r.replace(/\/{2,9}/g,"/").split("/"),"/"!=r.substr(0,1)&&0!==r.length||i.splice(0,1),"/"==r.substr(r.length-1,1)&&i.splice(i.length-1,1),i),l.queryKey=(u=l.query,c={},u.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,n){e&&(c[e]=n)})),c),l}},4536:(t,e,n)=>{var r,i,o,s;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=n.nmd(t),self,s=function(){return function(){var t={192:function(t,e){var n,r,i=function(){var t=function(t,e){var n=t,r=s[e],i=null,o=0,c=null,g=[],m={},w=function(t,e){i=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var r=0;r<t;r+=1)e[n][r]=null}return e}(o=4*n+17),_(0,0),_(o-7,0),_(0,o-7),S(),E(),T(t,e),n>=7&&I(t),null==c&&(c=k(n,r,g)),C(c,e)},_=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||o<=t+n))for(var r=-1;r<=7;r+=1)e+r<=-1||o<=e+r||(i[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},E=function(){for(var t=8;t<o-8;t+=1)null==i[t][6]&&(i[t][6]=t%2==0);for(var e=8;e<o-8;e+=1)null==i[6][e]&&(i[6][e]=e%2==0)},S=function(){for(var t=u.getPatternPosition(n),e=0;e<t.length;e+=1)for(var r=0;r<t.length;r+=1){var o=t[e],s=t[r];if(null==i[o][s])for(var a=-2;a<=2;a+=1)for(var c=-2;c<=2;c+=1)i[o+a][s+c]=-2==a||2==a||-2==c||2==c||0==a&&0==c}},I=function(t){for(var e=u.getBCHTypeNumber(n),r=0;r<18;r+=1){var s=!t&&1==(e>>r&1);i[Math.floor(r/3)][r%3+o-8-3]=s}for(r=0;r<18;r+=1)s=!t&&1==(e>>r&1),i[r%3+o-8-3][Math.floor(r/3)]=s},T=function(t,e){for(var n=r<<3|e,s=u.getBCHTypeInfo(n),a=0;a<15;a+=1){var c=!t&&1==(s>>a&1);a<6?i[a][8]=c:a<8?i[a+1][8]=c:i[o-15+a][8]=c}for(a=0;a<15;a+=1)c=!t&&1==(s>>a&1),a<8?i[8][o-a-1]=c:a<9?i[8][15-a-1+1]=c:i[8][15-a-1]=c;i[o-8][8]=!t},C=function(t,e){for(var n=-1,r=o-1,s=7,a=0,c=u.getMaskFunction(e),h=o-1;h>0;h-=2)for(6==h&&(h-=1);;){for(var l=0;l<2;l+=1)if(null==i[r][h-l]){var f=!1;a<t.length&&(f=1==(t[a]>>>s&1)),c(r,h-l)&&(f=!f),i[r][h-l]=f,-1==(s-=1)&&(a+=1,s=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}},k=function(t,e,n){for(var r=l.getRSBlocks(t,e),i=f(),o=0;o<n.length;o+=1){var s=n[o];i.put(s.getMode(),4),i.put(s.getLength(),u.getLengthInBits(s.getMode(),t)),s.write(i)}var a=0;for(o=0;o<r.length;o+=1)a+=r[o].dataCount;if(i.getLengthInBits()>8*a)throw"code length overflow. ("+i.getLengthInBits()+">"+8*a+")";for(i.getLengthInBits()+4<=8*a&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*a||(i.put(236,8),i.getLengthInBits()>=8*a));)i.put(17,8);return function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),s=new Array(e.length),a=0;a<e.length;a+=1){var c=e[a].dataCount,l=e[a].totalCount-c;r=Math.max(r,c),i=Math.max(i,l),o[a]=new Array(c);for(var f=0;f<o[a].length;f+=1)o[a][f]=255&t.getBuffer()[f+n];n+=c;var p=u.getErrorCorrectPolynomial(l),d=h(o[a],p.getLength()-1).mod(p);for(s[a]=new Array(p.getLength()-1),f=0;f<s[a].length;f+=1){var v=f+d.getLength()-s[a].length;s[a][f]=v>=0?d.getAt(v):0}}var y=0;for(f=0;f<e.length;f+=1)y+=e[f].totalCount;var g=new Array(y),m=0;for(f=0;f<r;f+=1)for(a=0;a<e.length;a+=1)f<o[a].length&&(g[m]=o[a][f],m+=1);for(f=0;f<i;f+=1)for(a=0;a<e.length;a+=1)f<s[a].length&&(g[m]=s[a][f],m+=1);return g}(i,r)};m.addData=function(t,e){var n=null;switch(e=e||"Byte"){case"Numeric":n=p(t);break;case"Alphanumeric":n=d(t);break;case"Byte":n=v(t);break;case"Kanji":n=y(t);break;default:throw"mode:"+e}g.push(n),c=null},m.isDark=function(t,e){if(t<0||o<=t||e<0||o<=e)throw t+","+e;return i[t][e]},m.getModuleCount=function(){return o},m.make=function(){if(n<1){for(var t=1;t<40;t++){for(var e=l.getRSBlocks(t,r),i=f(),o=0;o<g.length;o++){var s=g[o];i.put(s.getMode(),4),i.put(s.getLength(),u.getLengthInBits(s.getMode(),t)),s.write(i)}var a=0;for(o=0;o<e.length;o++)a+=e[o].dataCount;if(i.getLengthInBits()<=8*a)break}n=t}w(!1,function(){for(var t=0,e=0,n=0;n<8;n+=1){w(!0,n);var r=u.getLostPoint(m);(0==n||t>r)&&(t=r,e=n)}return e}())},m.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var r=0;r<m.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<m.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=m.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return(n+="</tbody>")+"</table>"},m.createSvgTag=function(t,e,n,r){var i={};"object"==a(arguments[0])&&(t=(i=arguments[0]).cellSize,e=i.margin,n=i.alt,r=i.title),t=t||2,e=void 0===e?4*t:e,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var o,s,u,c,h=m.getModuleCount()*t+2*e,l="";for(c="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=i.scalable?"":' width="'+h+'px" height="'+h+'px"',l+=' viewBox="0 0 '+h+" "+h+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=r.text||n.text?' role="img" aria-labelledby="'+A([r.id,n.id].join(" ").trim())+'"':"",l+=">",l+=r.text?'<title id="'+A(r.id)+'">'+A(r.text)+"</title>":"",l+=n.text?'<description id="'+A(n.id)+'">'+A(n.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="',s=0;s<m.getModuleCount();s+=1)for(u=s*t+e,o=0;o<m.getModuleCount();o+=1)m.isDark(s,o)&&(l+="M"+(o*t+e)+","+u+c);return(l+='" stroke="transparent" fill="black"/>')+"</svg>"},m.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=m.getModuleCount()*t+2*e,r=e,i=n-e;return b(n,n,(function(e,n){if(r<=e&&e<i&&r<=n&&n<i){var o=Math.floor((e-r)/t),s=Math.floor((n-r)/t);return m.isDark(s,o)?0:1}return 1}))},m.createImgTag=function(t,e,n){t=t||2,e=void 0===e?4*t:e;var r=m.getModuleCount()*t+2*e,i="";return i+="<img",i+=' src="',i+=m.createDataURL(t,e),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=A(n),i+='"'),i+"/>"};var A=function(t){for(var e="",n=0;n<t.length;n+=1){var r=t.charAt(n);switch(r){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=r}}return e};return m.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,n,r,i,o,s=1*m.getModuleCount()+2*t,a=t,u=s-t,c={"":""," ":""," ":"","  ":" "},h={"":""," ":""," ":" ","  ":" "},l="";for(e=0;e<s;e+=2){for(r=Math.floor((e-a)/1),i=Math.floor((e+1-a)/1),n=0;n<s;n+=1)o="",a<=n&&n<u&&a<=e&&e<u&&m.isDark(r,Math.floor((n-a)/1))&&(o=" "),a<=n&&n<u&&a<=e+1&&e+1<u&&m.isDark(i,Math.floor((n-a)/1))?o+=" ":o+="",l+=t<1&&e+1>=u?h[o]:c[o];l+="\n"}return s%2&&t>0?l.substring(0,l.length-s-1)+Array(s+1).join(""):l.substring(0,l.length-1)}(e);t-=1,e=void 0===e?2*t:e;var n,r,i,o,s=m.getModuleCount()*t+2*e,a=e,u=s-e,c=Array(t+1).join(""),h=Array(t+1).join("  "),l="",f="";for(n=0;n<s;n+=1){for(i=Math.floor((n-a)/t),f="",r=0;r<s;r+=1)o=1,a<=r&&r<u&&a<=n&&n<u&&m.isDark(i,Math.floor((r-a)/t))&&(o=0),f+=o?c:h;for(i=0;i<t;i+=1)l+=f+"\n"}return l.substring(0,l.length-1)},m.renderTo2dContext=function(t,e){e=e||2;for(var n=m.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)t.fillStyle=m.isDark(r,i)?"black":"white",t.fillRect(r*e,i*e,e,e)},m};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e.push(255&r)}return e}}).default,t.createStringToBytes=function(t,e){var n=function(){for(var n=m(t),r=function(){var t=n.read();if(-1==t)throw"eof";return t},i=0,o={};;){var s=n.read();if(-1==s)break;var a=r(),u=r()<<8|r();o[String.fromCharCode(s<<8|a)]=u,i+=1}if(i!=e)throw i+" != "+e;return o}(),r="?".charCodeAt(0);return function(t){for(var e=[],i=0;i<t.length;i+=1){var o=t.charCodeAt(i);if(o<128)e.push(o);else{var s=n[t.charAt(i)];"number"==typeof s?(255&s)==s?e.push(s):(e.push(s>>>8),e.push(255&s)):e.push(r)}}return e}};var e,n,r,i,o,s={L:1,M:0,Q:3,H:2},u=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,o=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(i={}).getBCHTypeInfo=function(t){for(var e=t<<10;o(e)-o(n)>=0;)e^=n<<o(e)-o(n);return 21522^(t<<10|e)},i.getBCHTypeNumber=function(t){for(var e=t<<12;o(e)-o(r)>=0;)e^=r<<o(e)-o(r);return t<<12|e},i.getPatternPosition=function(t){return e[t-1]},i.getMaskFunction=function(t){switch(t){case 0:return function(t,e){return(t+e)%2==0};case 1:return function(t,e){return t%2==0};case 2:return function(t,e){return e%3==0};case 3:return function(t,e){return(t+e)%3==0};case 4:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case 5:return function(t,e){return t*e%2+t*e%3==0};case 6:return function(t,e){return(t*e%2+t*e%3)%2==0};case 7:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},i.getErrorCorrectPolynomial=function(t){for(var e=h([1],0),n=0;n<t;n+=1)e=e.multiply(h([1,c.gexp(n)],0));return e},i.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+t}}},i.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r+=1)for(var i=0;i<e;i+=1){for(var o=0,s=t.isDark(r,i),a=-1;a<=1;a+=1)if(!(r+a<0||e<=r+a))for(var u=-1;u<=1;u+=1)i+u<0||e<=i+u||0==a&&0==u||s==t.isDark(r+a,i+u)&&(o+=1);o>5&&(n+=3+o-5)}for(r=0;r<e-1;r+=1)for(i=0;i<e-1;i+=1){var c=0;t.isDark(r,i)&&(c+=1),t.isDark(r+1,i)&&(c+=1),t.isDark(r,i+1)&&(c+=1),t.isDark(r+1,i+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(r=0;r<e;r+=1)for(i=0;i<e-6;i+=1)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i+=1)for(r=0;r<e-6;r+=1)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var h=0;for(i=0;i<e;i+=1)for(r=0;r<e;r+=1)t.isDark(r,i)&&(h+=1);return n+Math.abs(100*h/e/e-50)/5*10},i),c=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;return{glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}}}();function h(t,e){if(void 0===t.length)throw t.length+"/"+e;var n=function(){for(var n=0;n<t.length&&0==t[n];)n+=1;for(var r=new Array(t.length-n+e),i=0;i<t.length-n;i+=1)r[i]=t[i+n];return r}(),r={getAt:function(t){return n[t]},getLength:function(){return n.length},multiply:function(t){for(var e=new Array(r.getLength()+t.getLength()-1),n=0;n<r.getLength();n+=1)for(var i=0;i<t.getLength();i+=1)e[n+i]^=c.gexp(c.glog(r.getAt(n))+c.glog(t.getAt(i)));return h(e,0)},mod:function(t){if(r.getLength()-t.getLength()<0)return r;for(var e=c.glog(r.getAt(0))-c.glog(t.getAt(0)),n=new Array(r.getLength()),i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(i=0;i<t.getLength();i+=1)n[i]^=c.gexp(c.glog(t.getAt(i))+e);return h(n,0).mod(t)}};return r}var l=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n};return{getRSBlocks:function(n,r){var i=function(e,n){switch(n){case s.L:return t[4*(e-1)+0];case s.M:return t[4*(e-1)+1];case s.Q:return t[4*(e-1)+2];case s.H:return t[4*(e-1)+3];default:return}}(n,r);if(void 0===i)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var o=i.length/3,a=[],u=0;u<o;u+=1)for(var c=i[3*u+0],h=i[3*u+1],l=i[3*u+2],f=0;f<c;f+=1)a.push(e(h,l));return a}}}(),f=function(){var t=[],e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var r=0;r<e;r+=1)n.putBit(1==(t>>>e-r-1&1))},getLengthInBits:function(){return e},putBit:function(n){var r=Math.floor(e/8);t.length<=r&&t.push(0),n&&(t[r]|=128>>>e%8),e+=1}};return n},p=function(t){var e=t,n={getMode:function(){return 1},getLength:function(t){return e.length},write:function(t){for(var n=e,i=0;i+2<n.length;)t.put(r(n.substring(i,i+3)),10),i+=3;i<n.length&&(n.length-i==1?t.put(r(n.substring(i,i+1)),4):n.length-i==2&&t.put(r(n.substring(i,i+2)),7))}},r=function(t){for(var e=0,n=0;n<t.length;n+=1)e=10*e+i(t.charAt(n));return e},i=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return n},d=function(t){var e=t,n={getMode:function(){return 2},getLength:function(t){return e.length},write:function(t){for(var n=e,i=0;i+1<n.length;)t.put(45*r(n.charAt(i))+r(n.charAt(i+1)),11),i+=2;i<n.length&&t.put(r(n.charAt(i)),6)}},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return n},v=function(e){var n=t.stringToBytes(e);return{getMode:function(){return 4},getLength:function(t){return n.length},write:function(t){for(var e=0;e<n.length;e+=1)t.put(n[e],8)}}},y=function(e){var n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(t,e){var r=n("");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var r=n(e);return{getMode:function(){return 8},getLength:function(t){return~~(r.length/2)},write:function(t){for(var e=r,n=0;n+1<e.length;){var i=(255&e[n])<<8|255&e[n+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(n+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),n+=2}if(n<e.length)throw"illegal char at "+(n+1)}}},g=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,r){n=n||0,r=r||t.length;for(var i=0;i<r;i+=1)e.writeByte(t[i+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+"]"}};return e},m=function(t){var e=t,n=0,r=0,i=0,o={read:function(){for(;i<8;){if(n>=e.length){if(0==i)return-1;throw"unexpected end of file./"+i}var t=e.charAt(n);if(n+=1,"="==t)return i=0,-1;t.match(/^\s$/)||(r=r<<6|s(t.charCodeAt(0)),i+=6)}var o=r>>>i-8&255;return i-=8,o}},s=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return o},b=function(t,e,n){for(var r=function(t,e){var n=t,r=e,i=new Array(t*e),o={setPixel:function(t,e,r){i[e*n+t]=r},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(r),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(r),t.writeByte(0);var e=s(2);t.writeByte(2);for(var i=0;e.length-i>255;)t.writeByte(255),t.writeBytes(e,i,255),i+=255;t.writeByte(e.length-i),t.writeBytes(e,i,e.length-i),t.writeByte(0),t.writeString(";")}},s=function(t){for(var e=1<<t,n=1+(1<<t),r=t+1,o=a(),s=0;s<e;s+=1)o.add(String.fromCharCode(s));o.add(String.fromCharCode(e)),o.add(String.fromCharCode(n));var u,c,h,l=g(),f=(u=l,c=0,h=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;c+e>=8;)u.writeByte(255&(t<<c|h)),e-=8-c,t>>>=8-c,h=0,c=0;h|=t<<c,c+=e},flush:function(){c>0&&u.writeByte(h)}});f.write(e,r);var p=0,d=String.fromCharCode(i[p]);for(p+=1;p<i.length;){var v=String.fromCharCode(i[p]);p+=1,o.contains(d+v)?d+=v:(f.write(o.indexOf(d),r),o.size()<4095&&(o.size()==1<<r&&(r+=1),o.add(d+v)),d=v)}return f.write(o.indexOf(d),r),f.write(n,r),f.flush(),l.toByteArray()},a=function(){var t={},e=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;t[r]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return n};return o}(t,e),i=0;i<e;i+=1)for(var o=0;o<t;o+=1)r.setPixel(o,i,n(o,i));var s=g();r.write(s);for(var a=function(){var t=0,e=0,n=0,r="",i={},o=function(t){r+=String.fromCharCode(s(63&t))},s=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return i.writeByte=function(r){for(t=t<<8|255&r,e+=8,n+=1;e>=6;)o(t>>>e-6),e-=6},i.flush=function(){if(e>0&&(o(t<<6-e),t=0,e=0),n%3!=0)for(var i=3-n%3,s=0;s<i;s+=1)r+="="},i.toString=function(){return r},i}(),u=s.toByteArray(),c=0;c<u.length;c+=1)a.writeByte(u[c]);return a.flush(),"data:image/gif;base64,"+a};return t}();i.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e.push(r):r<2048?e.push(192|r>>6,128|63&r):r<55296||r>=57344?e.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return e}(t)},void 0===(r="function"==typeof(n=function(){return i})?n.apply(e,[]):n)||(t.exports=r)},676:function(t,e,n){"use strict";n.d(e,{default:function(){return D}});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},o=function(t){return!!t&&"object"==a(t)&&!Array.isArray(t)};function s(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!e.length)return t;var a=e.shift();return void 0!==a&&o(t)&&o(a)?(t=r({},t),Object.keys(a).forEach((function(e){var n=t[e],r=a[e];Array.isArray(n)&&Array.isArray(r)?t[e]=r:o(n)&&o(r)?t[e]=s(Object.assign({},n),r):t[e]=r})),s.apply(void 0,i([t],e))):t}function u(t,e){var n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function c(t){return e=this,r=function(){return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(e){return[2,new Promise((function(e){var n=new XMLHttpRequest;n.onload=function(){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n.response)},n.open("GET",t),n.responseType="blob",n.send()}))]}))},new((n=void 0)||(n=Promise))((function(t,i){function o(t){try{a(r.next(t))}catch(t){i(t)}}function s(t){try{a(r.throw(t))}catch(t){i(t)}}function a(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(o,s)}a((r=r.apply(e,[])).next())}));var e,n,r}for(var h={L:.07,M:.15,Q:.25,H:.3},l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},f=function(){function t(t){var e=t.svg,n=t.type;this._svg=e,this._type=n}return t.prototype.draw=function(t,e,n,r){var i;switch(this._type){case"dots":i=this._drawDot;break;case"classy":i=this._drawClassy;break;case"classy-rounded":i=this._drawClassyRounded;break;case"rounded":i=this._drawRounded;break;case"extra-rounded":i=this._drawExtraRounded;break;case"square":default:i=this._drawSquare}i.call(this,{x:t,y:e,size:n,getNeighbor:r})},t.prototype._rotateFigure=function(t){var e,n=t.x,r=t.y,i=t.size,o=t.rotation,s=void 0===o?0:o,a=n+i/2,u=r+i/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*s/Math.PI+","+a+","+u+")")},t.prototype._basicDot=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(l(l({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(r+n/2)),e._element.setAttribute("cy",String(i+n/2)),e._element.setAttribute("r",String(n/2))}}))},t.prototype._basicSquare=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(l(l({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(r)),e._element.setAttribute("y",String(i)),e._element.setAttribute("width",String(n)),e._element.setAttribute("height",String(n))}}))},t.prototype._basicSideRounded=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(l(l({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+r+" "+i+"v "+n+"h "+n/2+"a "+n/2+" "+n/2+", 0, 0, 0, 0 "+-n)}}))},t.prototype._basicCornerRounded=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(l(l({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+r+" "+i+"v "+n+"h "+n+"v "+-n/2+"a "+n/2+" "+n/2+", 0, 0, 0, "+-n/2+" "+-n/2)}}))},t.prototype._basicCornerExtraRounded=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(l(l({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+r+" "+i+"v "+n+"h "+n+"a "+n+" "+n+", 0, 0, 0, "+-n+" "+-n)}}))},t.prototype._basicCornersRounded=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(l(l({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("d","M "+r+" "+i+"v "+n/2+"a "+n/2+" "+n/2+", 0, 0, 0, "+n/2+" "+n/2+"h "+n/2+"v "+-n/2+"a "+n/2+" "+n/2+", 0, 0, 0, "+-n/2+" "+-n/2)}}))},t.prototype._drawDot=function(t){var e=t.x,n=t.y,r=t.size;this._basicDot({x:e,y:n,size:r,rotation:0})},t.prototype._drawSquare=function(t){var e=t.x,n=t.y,r=t.size;this._basicSquare({x:e,y:n,size:r,rotation:0})},t.prototype._drawRounded=function(t){var e=t.x,n=t.y,r=t.size,i=t.getNeighbor,o=i?+i(-1,0):0,s=i?+i(1,0):0,a=i?+i(0,-1):0,u=i?+i(0,1):0,c=o+s+a+u;if(0!==c)if(c>2||o&&s||a&&u)this._basicSquare({x:e,y:n,size:r,rotation:0});else{if(2===c){var h=0;return o&&a?h=Math.PI/2:a&&s?h=Math.PI:s&&u&&(h=-Math.PI/2),void this._basicCornerRounded({x:e,y:n,size:r,rotation:h})}if(1===c)return h=0,a?h=Math.PI/2:s?h=Math.PI:u&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:n,size:r,rotation:h})}else this._basicDot({x:e,y:n,size:r,rotation:0})},t.prototype._drawExtraRounded=function(t){var e=t.x,n=t.y,r=t.size,i=t.getNeighbor,o=i?+i(-1,0):0,s=i?+i(1,0):0,a=i?+i(0,-1):0,u=i?+i(0,1):0,c=o+s+a+u;if(0!==c)if(c>2||o&&s||a&&u)this._basicSquare({x:e,y:n,size:r,rotation:0});else{if(2===c){var h=0;return o&&a?h=Math.PI/2:a&&s?h=Math.PI:s&&u&&(h=-Math.PI/2),void this._basicCornerExtraRounded({x:e,y:n,size:r,rotation:h})}if(1===c)return h=0,a?h=Math.PI/2:s?h=Math.PI:u&&(h=-Math.PI/2),void this._basicSideRounded({x:e,y:n,size:r,rotation:h})}else this._basicDot({x:e,y:n,size:r,rotation:0})},t.prototype._drawClassy=function(t){var e=t.x,n=t.y,r=t.size,i=t.getNeighbor,o=i?+i(-1,0):0,s=i?+i(1,0):0,a=i?+i(0,-1):0,u=i?+i(0,1):0;0!==o+s+a+u?o||a?s||u?this._basicSquare({x:e,y:n,size:r,rotation:0}):this._basicCornerRounded({x:e,y:n,size:r,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:n,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:n,size:r,rotation:Math.PI/2})},t.prototype._drawClassyRounded=function(t){var e=t.x,n=t.y,r=t.size,i=t.getNeighbor,o=i?+i(-1,0):0,s=i?+i(1,0):0,a=i?+i(0,-1):0,u=i?+i(0,1):0;0!==o+s+a+u?o||a?s||u?this._basicSquare({x:e,y:n,size:r,rotation:0}):this._basicCornerExtraRounded({x:e,y:n,size:r,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:n,size:r,rotation:-Math.PI/2}):this._basicCornersRounded({x:e,y:n,size:r,rotation:Math.PI/2})},t}(),p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},d=function(){function t(t){var e=t.svg,n=t.type;this._svg=e,this._type=n}return t.prototype.draw=function(t,e,n,r){var i;switch(this._type){case"square":i=this._drawSquare;break;case"extra-rounded":i=this._drawExtraRounded;break;case"dot":default:i=this._drawDot}i.call(this,{x:t,y:e,size:n,rotation:r})},t.prototype._rotateFigure=function(t){var e,n=t.x,r=t.y,i=t.size,o=t.rotation,s=void 0===o?0:o,a=n+i/2,u=r+i/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*s/Math.PI+","+a+","+u+")")},t.prototype._basicDot=function(t){var e=this,n=t.size,r=t.x,i=t.y,o=n/7;this._rotateFigure(p(p({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+(r+n/2)+" "+i+"a "+n/2+" "+n/2+" 0 1 0 0.1 0zm 0 "+o+"a "+(n/2-o)+" "+(n/2-o)+" 0 1 1 -0.1 0Z")}}))},t.prototype._basicSquare=function(t){var e=this,n=t.size,r=t.x,i=t.y,o=n/7;this._rotateFigure(p(p({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+r+" "+i+"v "+n+"h "+n+"v "+-n+"zM "+(r+o)+" "+(i+o)+"h "+(n-2*o)+"v "+(n-2*o)+"h "+(2*o-n)+"z")}}))},t.prototype._basicExtraRounded=function(t){var e=this,n=t.size,r=t.x,i=t.y,o=n/7;this._rotateFigure(p(p({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","path"),e._element.setAttribute("clip-rule","evenodd"),e._element.setAttribute("d","M "+r+" "+(i+2.5*o)+"v "+2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*o+" "+2.5*o+"h "+2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*o+" "+2.5*-o+"v "+-2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*-o+" "+2.5*-o+"h "+-2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*-o+" "+2.5*o+"M "+(r+2.5*o)+" "+(i+o)+"h "+2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*o+" "+1.5*o+"v "+2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*-o+" "+1.5*o+"h "+-2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*-o+" "+1.5*-o+"v "+-2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*o+" "+1.5*-o)}}))},t.prototype._drawDot=function(t){var e=t.x,n=t.y,r=t.size,i=t.rotation;this._basicDot({x:e,y:n,size:r,rotation:i})},t.prototype._drawSquare=function(t){var e=t.x,n=t.y,r=t.size,i=t.rotation;this._basicSquare({x:e,y:n,size:r,rotation:i})},t.prototype._drawExtraRounded=function(t){var e=t.x,n=t.y,r=t.size,i=t.rotation;this._basicExtraRounded({x:e,y:n,size:r,rotation:i})},t}(),v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},y=function(){function t(t){var e=t.svg,n=t.type;this._svg=e,this._type=n}return t.prototype.draw=function(t,e,n,r){var i;switch(this._type){case"square":i=this._drawSquare;break;case"dot":default:i=this._drawDot}i.call(this,{x:t,y:e,size:n,rotation:r})},t.prototype._rotateFigure=function(t){var e,n=t.x,r=t.y,i=t.size,o=t.rotation,s=void 0===o?0:o,a=n+i/2,u=r+i/2;(0,t.draw)(),null===(e=this._element)||void 0===e||e.setAttribute("transform","rotate("+180*s/Math.PI+","+a+","+u+")")},t.prototype._basicDot=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(v(v({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),e._element.setAttribute("cx",String(r+n/2)),e._element.setAttribute("cy",String(i+n/2)),e._element.setAttribute("r",String(n/2))}}))},t.prototype._basicSquare=function(t){var e=this,n=t.size,r=t.x,i=t.y;this._rotateFigure(v(v({},t),{draw:function(){e._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),e._element.setAttribute("x",String(r)),e._element.setAttribute("y",String(i)),e._element.setAttribute("width",String(n)),e._element.setAttribute("height",String(n))}}))},t.prototype._drawDot=function(t){var e=t.x,n=t.y,r=t.size,i=t.rotation;this._basicDot({x:e,y:n,size:r,rotation:i})},t.prototype._drawSquare=function(t){var e=t.x,n=t.y,r=t.size,i=t.rotation;this._basicSquare({x:e,y:n,size:r,rotation:i})},t}(),g="circle",m=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},b=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},w=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],_=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],E=function(){function t(t){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(t.width)),this._element.setAttribute("height",String(t.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=t}return Object.defineProperty(t.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),t.prototype.getElement=function(){return this._element},t.prototype.drawQR=function(t){return m(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,f=this;return b(this,(function(p){switch(p.label){case 0:return e=t.getModuleCount(),n=Math.min(this._options.width,this._options.height)-2*this._options.margin,r=this._options.shape===g?n/Math.sqrt(2):n,i=Math.floor(r/e),o={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=t,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(p.sent(),!this._image)return[2];s=this._options,a=s.imageOptions,u=s.qrOptions,c=a.imageSize*h[u.errorCorrectionLevel],l=Math.floor(c*e*e),o=function(t){var e=t.originalHeight,n=t.originalWidth,r=t.maxHiddenDots,i=t.maxHiddenAxisDots,o=t.dotSize,s={x:0,y:0},a={x:0,y:0};if(e<=0||n<=0||r<=0||o<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var u=e/n;return s.x=Math.floor(Math.sqrt(r/u)),s.x<=0&&(s.x=1),i&&i<s.x&&(s.x=i),s.x%2==0&&s.x--,a.x=s.x*o,s.y=1+2*Math.ceil((s.x*u-1)/2),a.y=Math.round(a.x*u),(s.y*s.x>r||i&&i<s.y)&&(i&&i<s.y?(s.y=i,s.y%2==0&&s.x--):s.y-=2,a.y=s.y*o,s.x=1+2*Math.ceil((s.y/u-1)/2),a.x=Math.round(a.y/u)),{height:a.y,width:a.x,hideYDots:s.y,hideXDots:s.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:l,maxHiddenAxisDots:e-14,dotSize:i}),p.label=2;case 2:return this.drawBackground(),this.drawDots((function(t,n){var r,i,s,a,u,c;return!(f._options.imageOptions.hideBackgroundDots&&t>=(e-o.hideXDots)/2&&t<(e+o.hideXDots)/2&&n>=(e-o.hideYDots)/2&&n<(e+o.hideYDots)/2||(null===(r=w[t])||void 0===r?void 0:r[n])||(null===(i=w[t-e+7])||void 0===i?void 0:i[n])||(null===(s=w[t])||void 0===s?void 0:s[n-e+7])||(null===(a=_[t])||void 0===a?void 0:a[n])||(null===(u=_[t-e+7])||void 0===u?void 0:u[n])||(null===(c=_[t])||void 0===c?void 0:c[n-e+7]))})),this.drawCorners(),this._options.image?[4,this.drawImage({width:o.width,height:o.height,count:e,dotSize:i})]:[3,4];case 3:p.sent(),p.label=4;case 4:return[2]}}))}))},t.prototype.drawBackground=function(){var t,e,n,r=this._element,i=this._options;if(r){var o=null===(t=i.backgroundOptions)||void 0===t?void 0:t.gradient,s=null===(e=i.backgroundOptions)||void 0===e?void 0:e.color;if((o||s)&&this._createColor({options:o,color:s,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:"background-color"}),null===(n=i.backgroundOptions)||void 0===n?void 0:n.round){var a=Math.min(i.width,i.height),u=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),u.setAttribute("x",String((i.width-a)/2)),u.setAttribute("y",String((i.height-a)/2)),u.setAttribute("width",String(a)),u.setAttribute("height",String(a)),u.setAttribute("rx",String(a/2*i.backgroundOptions.round)),this._backgroundClipPath.appendChild(u)}}},t.prototype.drawDots=function(t){var e,n,r=this;if(!this._qr)throw"QR code is not defined";var i=this._options,o=this._qr.getModuleCount();if(o>i.width||o>i.height)throw"The canvas is too small.";var s=Math.min(i.width,i.height)-2*i.margin,a=i.shape===g?s/Math.sqrt(2):s,u=Math.floor(a/o),c=Math.floor((i.width-o*u)/2),h=Math.floor((i.height-o*u)/2),l=new f({svg:this._element,type:i.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(e=i.dotsOptions)||void 0===e?void 0:e.gradient,color:i.dotsOptions.color,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:"dot-color"});for(var p=function(e){for(var i=function(i){return t&&!t(e,i)?"continue":(null===(n=d._qr)||void 0===n?void 0:n.isDark(e,i))?(l.draw(c+e*u,h+i*u,u,(function(n,s){return!(e+n<0||i+s<0||e+n>=o||i+s>=o)&&!(t&&!t(e+n,i+s))&&!!r._qr&&r._qr.isDark(e+n,i+s)})),void(l._element&&d._dotsClipPath&&d._dotsClipPath.appendChild(l._element))):"continue"},s=0;s<o;s++)i(s)},d=this,v=0;v<o;v++)p(v);if(i.shape===g){var y=Math.floor((s/u-o)/2),m=o+2*y,b=c-y*u,w=h-y*u,_=[],E=Math.floor(m/2);for(v=0;v<m;v++){_[v]=[];for(var S=0;S<m;S++)v>=y-1&&v<=m-y&&S>=y-1&&S<=m-y||Math.sqrt((v-E)*(v-E)+(S-E)*(S-E))>E?_[v][S]=0:_[v][S]=this._qr.isDark(S-2*y<0?S:S>=o?S-2*y:S-y,v-2*y<0?v:v>=o?v-2*y:v-y)?1:0}var I=function(t){for(var e=function(e){if(!_[t][e])return"continue";l.draw(b+t*u,w+e*u,u,(function(n,r){var i;return!!(null===(i=_[t+n])||void 0===i?void 0:i[e+r])})),l._element&&T._dotsClipPath&&T._dotsClipPath.appendChild(l._element)},n=0;n<m;n++)e(n)},T=this;for(v=0;v<m;v++)I(v)}},t.prototype.drawCorners=function(){var t=this;if(!this._qr)throw"QR code is not defined";var e=this._element,n=this._options;if(!e)throw"Element code is not defined";var r=this._qr.getModuleCount(),i=Math.min(n.width,n.height)-2*n.margin,o=n.shape===g?i/Math.sqrt(2):i,s=Math.floor(o/r),a=7*s,u=3*s,c=Math.floor((n.width-r*s)/2),h=Math.floor((n.height-r*s)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(e){var i,o,l,p,v,g,m,b,E,S,I,T,C=e[0],k=e[1],A=e[2],N=c+C*s*(r-7),x=h+k*s*(r-7),O=t._dotsClipPath,P=t._dotsClipPath;if(((null===(i=n.cornersSquareOptions)||void 0===i?void 0:i.gradient)||(null===(o=n.cornersSquareOptions)||void 0===o?void 0:o.color))&&((O=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+C+"-"+k),t._defs.appendChild(O),t._cornersSquareClipPath=t._cornersDotClipPath=P=O,t._createColor({options:null===(l=n.cornersSquareOptions)||void 0===l?void 0:l.gradient,color:null===(p=n.cornersSquareOptions)||void 0===p?void 0:p.color,additionalRotation:A,x:N,y:x,height:a,width:a,name:"corners-square-color-"+C+"-"+k})),null===(v=n.cornersSquareOptions)||void 0===v?void 0:v.type){var R=new d({svg:t._element,type:n.cornersSquareOptions.type});R.draw(N,x,a,A),R._element&&O&&O.appendChild(R._element)}else for(var D=new f({svg:t._element,type:n.dotsOptions.type}),M=function(t){for(var e=function(e){if(!(null===(g=w[t])||void 0===g?void 0:g[e]))return"continue";D.draw(N+t*s,x+e*s,s,(function(n,r){var i;return!!(null===(i=w[t+n])||void 0===i?void 0:i[e+r])})),D._element&&O&&O.appendChild(D._element)},n=0;n<w[t].length;n++)e(n)},L=0;L<w.length;L++)M(L);if(((null===(m=n.cornersDotOptions)||void 0===m?void 0:m.gradient)||(null===(b=n.cornersDotOptions)||void 0===b?void 0:b.color))&&((P=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+C+"-"+k),t._defs.appendChild(P),t._cornersDotClipPath=P,t._createColor({options:null===(E=n.cornersDotOptions)||void 0===E?void 0:E.gradient,color:null===(S=n.cornersDotOptions)||void 0===S?void 0:S.color,additionalRotation:A,x:N+2*s,y:x+2*s,height:u,width:u,name:"corners-dot-color-"+C+"-"+k})),null===(I=n.cornersDotOptions)||void 0===I?void 0:I.type){var F=new y({svg:t._element,type:n.cornersDotOptions.type});F.draw(N+2*s,x+2*s,u,A),F._element&&P&&P.appendChild(F._element)}else{D=new f({svg:t._element,type:n.dotsOptions.type});var j=function(t){for(var e=function(e){if(!(null===(T=_[t])||void 0===T?void 0:T[e]))return"continue";D.draw(N+t*s,x+e*s,s,(function(n,r){var i;return!!(null===(i=_[t+n])||void 0===i?void 0:i[e+r])})),D._element&&P&&P.appendChild(D._element)},n=0;n<_[t].length;n++)e(n)};for(L=0;L<_.length;L++)j(L)}}))},t.prototype.loadImage=function(){var t=this;return new Promise((function(e,n){var r=t._options,i=new Image;if(!r.image)return n("Image is not defined");"string"==typeof r.imageOptions.crossOrigin&&(i.crossOrigin=r.imageOptions.crossOrigin),t._image=i,i.onload=function(){e()},i.src=r.image}))},t.prototype.drawImage=function(t){var e=t.width,n=t.height,r=t.count,i=t.dotSize;return m(this,void 0,void 0,(function(){var t,o,s,a,u,h,l,f,p;return b(this,(function(d){switch(d.label){case 0:return t=this._options,o=Math.floor((t.width-r*i)/2),s=Math.floor((t.height-r*i)/2),a=o+t.imageOptions.margin+(r*i-e)/2,u=s+t.imageOptions.margin+(r*i-n)/2,h=e-2*t.imageOptions.margin,l=n-2*t.imageOptions.margin,(f=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(a)),f.setAttribute("y",String(u)),f.setAttribute("width",h+"px"),f.setAttribute("height",l+"px"),[4,c(t.image||"")];case 1:return p=d.sent(),f.setAttribute("href",p||""),this._element.appendChild(f),[2]}}))}))},t.prototype._createColor=function(t){var e=t.options,n=t.color,r=t.additionalRotation,i=t.x,o=t.y,s=t.height,a=t.width,u=t.name,c=a>s?a:s,h=document.createElementNS("http://www.w3.org/2000/svg","rect");if(h.setAttribute("x",String(i)),h.setAttribute("y",String(o)),h.setAttribute("height",String(s)),h.setAttribute("width",String(a)),h.setAttribute("clip-path","url('#clip-path-"+u+"')"),e){var l;if("radial"===e.type)(l=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",u),l.setAttribute("gradientUnits","userSpaceOnUse"),l.setAttribute("fx",String(i+a/2)),l.setAttribute("fy",String(o+s/2)),l.setAttribute("cx",String(i+a/2)),l.setAttribute("cy",String(o+s/2)),l.setAttribute("r",String(c/2));else{var f=((e.rotation||0)+r)%(2*Math.PI),p=(f+2*Math.PI)%(2*Math.PI),d=i+a/2,v=o+s/2,y=i+a/2,g=o+s/2;p>=0&&p<=.25*Math.PI||p>1.75*Math.PI&&p<=2*Math.PI?(d-=a/2,v-=s/2*Math.tan(f),y+=a/2,g+=s/2*Math.tan(f)):p>.25*Math.PI&&p<=.75*Math.PI?(v-=s/2,d-=a/2/Math.tan(f),g+=s/2,y+=a/2/Math.tan(f)):p>.75*Math.PI&&p<=1.25*Math.PI?(d+=a/2,v+=s/2*Math.tan(f),y-=a/2,g-=s/2*Math.tan(f)):p>1.25*Math.PI&&p<=1.75*Math.PI&&(v+=s/2,d+=a/2/Math.tan(f),g-=s/2,y-=a/2/Math.tan(f)),(l=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",u),l.setAttribute("gradientUnits","userSpaceOnUse"),l.setAttribute("x1",String(Math.round(d))),l.setAttribute("y1",String(Math.round(v))),l.setAttribute("x2",String(Math.round(y))),l.setAttribute("y2",String(Math.round(g)))}e.colorStops.forEach((function(t){var e=t.offset,n=t.color,r=document.createElementNS("http://www.w3.org/2000/svg","stop");r.setAttribute("offset",100*e+"%"),r.setAttribute("stop-color",n),l.appendChild(r)})),h.setAttribute("fill","url('#"+u+"')"),this._defs.appendChild(l)}else n&&h.setAttribute("fill",n);this._element.appendChild(h)},t}(),S="canvas",I={},T=0;T<=40;T++)I[T]=T;var C={type:S,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:I[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}},k=function(){return(k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function A(t){var e=k({},t);if(!e.colorStops||!e.colorStops.length)throw"Field 'colorStops' is required in gradient";return e.rotation?e.rotation=Number(e.rotation):e.rotation=0,e.colorStops=e.colorStops.map((function(t){return k(k({},t),{offset:Number(t.offset)})})),e}function N(t){var e=k({},t);return e.width=Number(e.width),e.height=Number(e.height),e.margin=Number(e.margin),e.imageOptions=k(k({},e.imageOptions),{hideBackgroundDots:Boolean(e.imageOptions.hideBackgroundDots),imageSize:Number(e.imageOptions.imageSize),margin:Number(e.imageOptions.margin)}),e.margin>Math.min(e.width,e.height)&&(e.margin=Math.min(e.width,e.height)),e.dotsOptions=k({},e.dotsOptions),e.dotsOptions.gradient&&(e.dotsOptions.gradient=A(e.dotsOptions.gradient)),e.cornersSquareOptions&&(e.cornersSquareOptions=k({},e.cornersSquareOptions),e.cornersSquareOptions.gradient&&(e.cornersSquareOptions.gradient=A(e.cornersSquareOptions.gradient))),e.cornersDotOptions&&(e.cornersDotOptions=k({},e.cornersDotOptions),e.cornersDotOptions.gradient&&(e.cornersDotOptions.gradient=A(e.cornersDotOptions.gradient))),e.backgroundOptions&&(e.backgroundOptions=k({},e.backgroundOptions),e.backgroundOptions.gradient&&(e.backgroundOptions.gradient=A(e.backgroundOptions.gradient))),e}var x=n(192),O=n.n(x),P=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},R=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},D=function(){function t(t){this._options=t?N(s(C,t)):C,this.update()}return t._clearContainer=function(t){t&&(t.innerHTML="")},t.prototype._setupSvg=function(){var t=this;if(this._qr){var e=new E(this._options);this._svg=e.getElement(),this._svgDrawingPromise=e.drawQR(this._qr).then((function(){var n;t._svg&&(null===(n=t._extension)||void 0===n||n.call(t,e.getElement(),t._options))}))}},t.prototype._setupCanvas=function(){var t,e=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=null===(t=this._svgDrawingPromise)||void 0===t?void 0:t.then((function(){if(e._svg){var t=e._svg,n=(new XMLSerializer).serializeToString(t),r="data:image/svg+xml;base64,"+btoa(n),i=new Image;return new Promise((function(t){i.onload=function(){var n,r;null===(r=null===(n=e._canvas)||void 0===n?void 0:n.getContext("2d"))||void 0===r||r.drawImage(i,0,0),t()},i.src=r}))}})))},t.prototype._getElement=function(t){return void 0===t&&(t="png"),P(this,void 0,void 0,(function(){return R(this,(function(e){switch(e.label){case 0:if(!this._qr)throw"QR code is empty";return"svg"!==t.toLowerCase()?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return e.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return e.sent(),[2,this._canvas]}}))}))},t.prototype.update=function(e){t._clearContainer(this._container),this._options=e?N(s(this._options,e)):this._options,this._options.data&&(this._qr=O()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(t){switch(!0){case/^[0-9]*$/.test(t):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(t):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===S?this._setupCanvas():this._setupSvg(),this.append(this._container))},t.prototype.append=function(t){if(t){if("function"!=typeof t.appendChild)throw"Container should be a single DOM node";this._options.type===S?this._canvas&&t.appendChild(this._canvas):this._svg&&t.appendChild(this._svg),this._container=t}},t.prototype.applyExtension=function(t){if(!t)throw"Extension function should be defined.";this._extension=t,this.update()},t.prototype.deleteExtension=function(){this._extension=void 0,this.update()},t.prototype.getRawData=function(t){return void 0===t&&(t="png"),P(this,void 0,void 0,(function(){var e,n,r;return R(this,(function(i){switch(i.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(t)];case 1:return(e=i.sent())?"svg"===t.toLowerCase()?(n=new XMLSerializer,r=n.serializeToString(e),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+r],{type:"image/svg+xml"})]):[2,new Promise((function(n){return e.toBlob(n,"image/"+t,1)}))]:[2,null]}}))}))},t.prototype.download=function(t){return P(this,void 0,void 0,(function(){var e,n,r,i,o;return R(this,(function(s){switch(s.label){case 0:if(!this._qr)throw"QR code is empty";return e="png",n="qr","string"==typeof t?(e=t,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):"object"==a(t)&&null!==t&&(t.name&&(n=t.name),t.extension&&(e=t.extension)),[4,this._getElement(e)];case 1:return(r=s.sent())?("svg"===e.toLowerCase()?(i=new XMLSerializer,o='<?xml version="1.0" standalone="no"?>\r\n'+(o=i.serializeToString(r)),u("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o),n+".svg")):u(r.toDataURL("image/"+e),n+"."+e),[2]):[2]}}))}))},t}()}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}return n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(676)}().default},"object"==a(e)&&"object"==a(t)?t.exports=s():(i=[],void 0===(o="function"==typeof(r=s)?r.apply(e,i):r)||(t.exports=o))},7823:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.io=e.Socket=e.Manager=e.protocol=void 0;var i=n(4782),o=n(3424),s=n(6436)("socket.io-client");t.exports=e=u;var a=e.managers={};function u(t,e){"object"===r(t)&&(e=t,t=void 0),e=e||{};var n,u=i.url(t,e.path||"/socket.io"),c=u.source,h=u.id,l=u.path,f=a[h]&&l in a[h].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||f?(s("ignoring socket cache for %s",c),n=new o.Manager(c,e)):(a[h]||(s("new io instance for %s",c),a[h]=new o.Manager(c,e)),n=a[h]),u.query&&!e.query&&(e.query=u.queryKey),n.socket(u.path,e)}e.io=u;var c=n(2428);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return c.protocol}}),e.connect=u;var h=n(3424);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return h.Manager}});var l=n(1249);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return l.Socket}}),e.default=u},3424:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;var u=n(8006),c=n(1249),h=n(2428),l=n(6623),f=n(8884),p=n(9812),d=n(6436)("socket.io-client:manager"),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(g,t);var e,n,p,v,y=(p=g,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(p);if(v){var n=a(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return s(this,t)});function g(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),(n=y.call(this)).nsps={},n.subs=[],t&&"object"===r(t)&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",n.opts=e,n.reconnection(!1!==e.reconnection),n.reconnectionAttempts(e.reconnectionAttempts||1/0),n.reconnectionDelay(e.reconnectionDelay||1e3),n.reconnectionDelayMax(e.reconnectionDelayMax||5e3),n.randomizationFactor(e.randomizationFactor||.5),n.backoff=new f({min:n.reconnectionDelay(),max:n.reconnectionDelayMax(),jitter:n.randomizationFactor()}),n.timeout(null==e.timeout?2e4:e.timeout),n._readyState="closed",n.uri=t;var i=e.parser||h;return n.encoder=new i.Encoder,n.decoder=new i.Decoder,n._autoConnect=!1!==e.autoConnect,n._autoConnect&&n.open(),n}return e=g,(n=[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(d("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;d("opening %s",this.uri),this.engine=u(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=l.on(n,"open",(function(){r.onopen(),t&&t()})),o=l.on(n,"error",(function(n){d("error"),r.cleanup(),r._readyState="closed",e.emitReserved("error",n),t?t(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;d("connect attempt will timeout after %d",s),0===s&&i();var a=setTimeout((function(){d("connect attempt timed out after %d",s),i(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){d("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(l.on(t,"ping",this.onping.bind(this)),l.on(t,"data",this.ondata.bind(this)),l.on(t,"error",this.onerror.bind(this)),l.on(t,"close",this.onclose.bind(this)),l.on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){this.decoder.add(t)}},{key:"ondecoded",value:function(t){this.emitReserved("packet",t)}},{key:"onerror",value:function(t){d("error",t),this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n||(n=new c.Socket(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var r=n[e];if(this.nsps[r].active)return void d("socket %s is still active, skipping close",r)}this._close()}},{key:"_packet",value:function(t){d("writing packet %j",t);for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){d("cleanup"),this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){d("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t){d("onclose"),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)d("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();d("will wait %dms before reconnect attempt",n),this._reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(d("attempting reconnect"),t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(d("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):(d("reconnect success"),e.onreconnect())})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}])&&i(e.prototype,n),g}(p.StrictEventEmitter);e.Manager=v},6623:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,n){return t.on(e,n),function(){t.off(e,n)}}},1249:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;var h=n(2428),l=n(6623),f=n(9812),p=n(6436)("socket.io-client:socket"),d=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(y,t);var e,n,r,f,v=(r=y,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(r);if(f){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function y(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(r=v.call(this)).receiveBuffer=[],r.sendBuffer=[],r.ids=0,r.acks={},r.flags={},r.io=t,r.nsp=e,r.ids=0,r.acks={},r.receiveBuffer=[],r.sendBuffer=[],r.connected=!1,r.disconnected=!0,r.flags={},n&&n.auth&&(r.auth=n.auth),r.io._autoConnect&&r.open(),r}return e=y,(n=[{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[l.on(t,"open",this.onopen.bind(this)),l.on(t,"packet",this.onpacket.bind(this)),l.on(t,"error",this.onerror.bind(this)),l.on(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(d.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.unshift(t);var i={type:h.PacketType.EVENT,data:n,options:{}};i.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]&&(p("emitting packet with ack id %d",this.ids),this.acks[this.ids]=n.pop(),i.id=this.ids++);var o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,s=this.flags.volatile&&(!o||!this.connected);return s?p("discard packet as the transport is not currently writable"):this.connected?this.packet(i):this.sendBuffer.push(i),this.flags={},this}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;p("transport is open - connecting"),"function"==typeof this.auth?this.auth((function(e){t.packet({type:h.PacketType.CONNECT,data:e})})):this.packet({type:h.PacketType.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t){p("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case h.PacketType.CONNECT:if(t.data&&t.data.sid){var e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case h.PacketType.EVENT:case h.PacketType.BINARY_EVENT:this.onevent(t);break;case h.PacketType.ACK:case h.PacketType.BINARY_ACK:this.onack(t);break;case h.PacketType.DISCONNECT:this.ondisconnect();break;case h.PacketType.CONNECT_ERROR:var n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(t){var e=t.data||[];p("emitting event %j",e),null!=t.id&&(p("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw s}}}}(this._anyListeners.slice());try{for(n.s();!(e=n.n()).done;)e.value.apply(this,t)}catch(t){n.e(t)}finally{n.f()}}s(c(y.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];p("sending ack %j",i),e.packet({type:h.PacketType.ACK,id:t,data:i})}}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e?(p("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):p("bad ack %s",t.id)}},{key:"onconnect",value:function(t){p("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){return t.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){p("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&(p("performing disconnect (%s)",this.nsp),this.packet({type:h.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}])&&o(e.prototype,n),y}(f.StrictEventEmitter);e.Socket=v},9812:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.StrictEventEmitter=void 0;var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(f,t);var e,n,r,h,l=(r=f,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(r);if(h){var n=c(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return u(this,t)});function f(){return i(this,f),l.apply(this,arguments)}return e=f,(n=[{key:"on",value:function(t,e){return s(c(f.prototype),"on",this).call(this,t,e),this}},{key:"once",value:function(t,e){return s(c(f.prototype),"once",this).call(this,t,e),this}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=s(c(f.prototype),"emit",this)).call.apply(e,[this,t].concat(r)),this}},{key:"emitReserved",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(e=s(c(f.prototype),"emit",this)).call.apply(e,[this,t].concat(r)),this}},{key:"listeners",value:function(t){return s(c(f.prototype),"listeners",this).call(this,t)}}])&&o(e.prototype,n),f}(n(2326));e.StrictEventEmitter=h},4782:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;var r=n(6771),i=n(6436)("socket.io-client:url");e.url=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),o=r(t)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var s=-1!==o.host.indexOf(":"),a=s?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+a+":"+o.port+e,o.href=o.protocol+"://"+a+(n&&n.port===o.port?"":":"+o.port),o}},6436:(t,e,n)=>{var r;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t="MISSING_ENV_VAR".DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=n(1383)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},1383:(t,e,n)=>{function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){function e(t){var n,r,o,s=null;function a(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(a.enabled){var o=a,s=Number(new Date),u=s-(n||s);o.diff=u,o.prev=n,o.curr=s,n=s,r[0]=e.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return"%";c++;var i=e.formatters[n];if("function"==typeof i){var s=r[c];t=i.call(o,s),r.splice(c,1),c--}return t})),e.formatArgs.call(o,r);var h=o.log||e.log;h.apply(o,r)}}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=i,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==s?s:(r!==e.namespaces&&(r=e.namespaces,o=e.enabled(t)),o)},set:function(t){s=t}}),"function"==typeof e.init&&e.init(a),a}function i(t,n){var r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[].concat(r(e.names.map(o)),r(e.skips.map(o).map((function(t){return"-"+t})))).join(",");return e.enable(""),t},e.enable=function(t){var n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(5088),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((function(n){e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},5088:t=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=1e3,r=60*n,i=60*r,o=24*i;function s(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,a){a=a||{};var u,c,h=e(t);if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===h&&isFinite(t))return a.long?(u=t,(c=Math.abs(u))>=o?s(u,c,o,"day"):c>=i?s(u,c,i,"hour"):c>=r?s(u,c,r,"minute"):c>=n?s(u,c,n,"second"):u+" ms"):function(t){var e=Math.abs(t);return e>=o?Math.round(t/o)+"d":e>=i?Math.round(t/i)+"h":e>=r?Math.round(t/r)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},5695:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;var i=n(2092);function o(t,e){if(!t)return t;if(i.isBinary(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=o(t[a],e);return s}if("object"===r(t)&&!(t instanceof Date)){var u={};for(var c in t)t.hasOwnProperty(c)&&(u[c]=o(t[c],e));return u}return t}function s(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=s(t[n],e);else if("object"===r(t))for(var i in t)t.hasOwnProperty(i)&&(t[i]=s(t[i],e));return t}e.deconstructPacket=function(t){var e=[],n=t.data,r=t;return r.data=o(n,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=s(t.data,e),t.attachments=void 0,t}},2428:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;var l,f=n(2326),p=n(5695),d=n(2092),v=n(1991)("socket.io-parser");e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(l=e.PacketType||(e.PacketType={}));var y=function(){function t(){u(this,t)}return h(t,[{key:"encode",value:function(t){return v("encoding packet %j",t),t.type!==l.EVENT&&t.type!==l.ACK||!d.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===l.EVENT?l.BINARY_EVENT:l.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==l.BINARY_EVENT&&t.type!==l.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),v("encoded %j as %s",t,e),e}},{key:"encodeAsBinary",value:function(t){var e=p.deconstructPacket(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}]),t}();e.Encoder=y;var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(f,t);var e,n,c=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=a(e);if(n){var i=a(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function f(){return u(this,f),c.call(this)}return h(f,[{key:"add",value:function(t){var e;if("string"==typeof t)(e=this.decodeString(t)).type===l.BINARY_EVENT||e.type===l.BINARY_ACK?(this.reconstructor=new m(e),0===e.attachments&&i(a(f.prototype),"emit",this).call(this,"decoded",e)):i(a(f.prototype),"emit",this).call(this,"decoded",e);else{if(!d.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,i(a(f.prototype),"emit",this).call(this,"decoded",e))}}},{key:"decodeString",value:function(t){var e=0,n={type:Number(t.charAt(0))};if(void 0===l[n.type])throw new Error("unknown packet type "+n.type);if(n.type===l.BINARY_EVENT||n.type===l.BINARY_ACK){for(var r=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var i=t.substring(r,e);if(i!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===t.charAt(e+1)){for(var o=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(o,e)}else n.nsp="/";var s=t.charAt(e+1);if(""!==s&&Number(s)==s){for(var a=e+1;++e;){var u=t.charAt(e);if(null==u||Number(u)!=u){--e;break}if(e===t.length)break}n.id=Number(t.substring(a,e+1))}if(t.charAt(++e)){var c=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!f.isPayloadValid(n.type,c))throw new Error("invalid payload");n.data=c}return v("decoded %s as %j",t,n),n}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case l.CONNECT:return"object"===r(e);case l.DISCONNECT:return void 0===e;case l.CONNECT_ERROR:return"string"==typeof e||"object"===r(e);case l.EVENT:case l.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case l.ACK:case l.BINARY_ACK:return Array.isArray(e)}}}]),f}(f);e.Decoder=g;var m=function(){function t(e){u(this,t),this.packet=e,this.buffers=[],this.reconPack=e}return h(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}()},2092:(t,e)=>{"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;var r="function"==typeof ArrayBuffer,i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);function a(t){return r&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||o&&t instanceof Blob||s&&t instanceof File}e.isBinary=a,e.hasBinary=function t(e,r){if(!e||"object"!==n(e))return!1;if(Array.isArray(e)){for(var i=0,o=e.length;i<o;i++)if(t(e[i]))return!0;return!1}if(a(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0;return!1}},1991:(t,e,n)=>{var r;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)}},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t="MISSING_ENV_VAR".DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=n(1541)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},1541:(t,e,n)=>{function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){function e(t){var n,r,o,s=null;function a(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(a.enabled){var o=a,s=Number(new Date),u=s-(n||s);o.diff=u,o.prev=n,o.curr=s,n=s,r[0]=e.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return"%";c++;var i=e.formatters[n];if("function"==typeof i){var s=r[c];t=i.call(o,s),r.splice(c,1),c--}return t})),e.formatArgs.call(o,r);var h=o.log||e.log;h.apply(o,r)}}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=i,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==s?s:(r!==e.namespaces&&(r=e.namespaces,o=e.enabled(t)),o)},set:function(t){s=t}}),"function"==typeof e.init&&e.init(a),a}function i(t,n){var r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){var t=[].concat(r(e.names.map(o)),r(e.skips.map(o).map((function(t){return"-"+t})))).join(",");return e.enable(""),t},e.enable=function(t){var n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];var r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(3870),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((function(n){e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},3870:t=>{function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=1e3,r=60*n,i=60*r,o=24*i;function s(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,a){a=a||{};var u,c,h=e(t);if("string"===h&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===h&&isFinite(t))return a.long?(u=t,(c=Math.abs(u))>=o?s(u,c,o,"day"):c>=i?s(u,c,i,"hour"):c>=r?s(u,c,r,"minute"):c>=n?s(u,c,n,"second"):u+" ms"):function(t){var e=Math.abs(t);return e>=o?Math.round(t/o)+"d":e>=i?Math.round(t/i)+"h":e>=r?Math.round(t/r)+"m":e>=n?Math.round(t/n)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},7480:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,fl:()=>h,pr:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},8272:t=>{"use strict";var e,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},i=0,o=0;function s(t){var e="";do{e=n[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function a(){var t=s(+new Date);return t!==e?(i=0,e=t):t+"."+s(i++)}for(;o<64;o++)r[n[o]]=o;a.encode=s,a.decode=function(t){var e=0;for(o=0;o<t.length;o++)e=64*e+r[t.charAt(o)];return e},t.exports=a}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";n(2354);var t,e=(t=n(4019))&&t.__esModule?t:{default:t};e.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),e.default._babelPolyfill=!0})(),(()=>{"use strict";var t=n(6425);function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(){var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},o=function(t){t=["object"==("undefined"==typeof window?"undefined":e(window))&&window,"object"==("undefined"==typeof self?"undefined":e(self))&&self,"object"==(void 0===n.g?"undefined":e(n.g))&&n.g,t];for(var r=0;r<t.length;++r){var i=t[r];if(i&&i.Math==Math)return i}return globalThis}(this);function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}!function(t,e){if(e){var n=o;t=t.split(".");for(var r=0;r<t.length-1;r++){var s=t[r];s in n||(n[s]={}),n=n[s]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&i(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function n(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function i(t){return t instanceof n?t:new n((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=o.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},n.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},n.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof n)this.s(t);else{t:switch(e(t)){case"object":var r=null!=t;break t;case"function":r=!0;break t;default:r=!1}r?this.v(t):this.h(t)}},n.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},n.prototype.g=function(t){this.i(2,t)},n.prototype.h=function(t){this.i(1,t)},n.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},n.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)u.b(this.a[t]);this.a=null}};var u=new r;return n.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},n.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},n.prototype.then=function(t,e){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new n((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(e,o)),s},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?u.b(n):this.a.push(n)},n.resolve=i,n.reject=function(t){return new n((function(e,n){n(t)}))},n.race=function(t){return new n((function(e,n){for(var r=a(t),o=r.next();!o.done;o=r.next())i(o.value).Qa(e,n)}))},n.all=function(t){var e=a(t),r=e.next();return r.done?i([]):new n((function(t,n){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Qa(o(s.length-1),n),r=e.next()}while(!r.done)}))},n}));var u=u||{},c=this||self,h=/^[\w+/_-]+[=]{0,2}$/,l=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""}function p(){}function d(t){var n=e(t);return"object"!=n?n:t?Array.isArray(t)?"array":n:"null"}function v(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function y(t){return"function"==d(t)}function g(t){var n=e(t);return"object"==n&&null!=t||"function"==n}function m(t){return Object.prototype.hasOwnProperty.call(t,b)&&t[b]||(t[b]=++w)}var b="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function E(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function S(t,e,n){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:E).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function C(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function k(t){return t}function A(t,e,n){this.code=O+t,this.message=e||P[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(O.length),t.message,t.serverResponse):null}C(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var x,O="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function M(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function F(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function j(t,e){throw new F("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function U(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function B(){this.b=this.a=null}x=D("__EID__")?"__EID__":void 0,C(L,Error),L.prototype.name="CustomError",C(F,L),F.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new U((function(){return new z}),(function(t){t.reset()}));function G(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function z(){this.next=this.b=this.a=null}B.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},z.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},z.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},W=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},K=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},J=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=H(t,e)}function X(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Z(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function $(t){return Array.prototype.concat.apply([],arguments)}function tt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var et,nt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},rt=/&/g,it=/</g,ot=/>/g,st=/"/g,at=/'/g,ut=/\x00/g,ct=/[\x00&<>"']/;function ht(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ft=c.navigator;if(ft){var pt=ft.userAgent;if(pt){et=pt;break t}}et=""}function dt(t){return ht(et,t)}function vt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function yt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function wt(t,n){t:{try{var r=t&&t.ownerDocument,i=r&&(r.defaultView||r.parentWindow);if((i=i||c).Element&&i.Location){var o=i;break t}}catch(t){}o=null}if(o&&void 0!==o[n]&&(!t||!(t instanceof o[n])&&(t instanceof o.Location||t instanceof o.Element))){if(g(t))try{var s=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){s="<object could not be stringified>"}else s=void 0===t?"undefined":null===t?"null":e(t);j("Argument is not a %s (or a non-Element, non-Location mock); got: %s",n,s)}}function _t(t,e){this.a=t===Tt&&e||"",this.b=It}function Et(t){return t instanceof _t&&t.constructor===_t&&t.b===It?t.a:(j("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var St,It={},Tt={};function Ct(){if(void 0===St){var t=null,e=c.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(t){c.console&&c.console.error(t.message)}St=t}else St=t}return St}function kt(t,e){this.a=e===Pt?t:""}function At(t){return t instanceof kt&&t.constructor===kt?t.a:(j("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function Nt(t,e){var n=Et(t);if(!Ot.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Ct();return new kt(t=e?e.createScriptURL(t):t,Pt)}(t=n.replace(xt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?Et(t):encodeURIComponent(String(t))})))}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var xt=/%{(\w+)}/g,Ot=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function Rt(t,e){this.a=e===Vt?t:""}function Dt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(j("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Mt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ft=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function jt(t){if(t instanceof Rt)return t;if(t="object"==e(t)&&t.sa?t.ra():String(t),Ft.test(t))t=new Rt(t,Vt);else{var n=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=n&&Mt.test(n[1])?new Rt(t,Vt):null}return t}function Ut(t){return t instanceof Rt?t:(t="object"==e(t)&&t.sa?t.ra():String(t),Ft.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Vt))}var Vt={},Bt=new Rt("about:invalid#zClosurez",Vt);function qt(t,e,n){this.a=n===Gt?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Gt={};function zt(t,e,n,r){return t=t instanceof Rt?t:Ut(t),e=e||c,n=n instanceof _t?Et(n):n||"",e.open(Dt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Wt(t){return ct.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(rt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(it,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(ot,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(st,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ut,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=p;var Jt,Qt,Yt=dt("Opera"),Xt=dt("Trident")||dt("MSIE"),Zt=dt("Edge"),$t=Zt||Xt,te=dt("Gecko")&&!(ht(et.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),ee=ht(et.toLowerCase(),"webkit")&&!dt("Edge");function ne(){var t=c.document;return t?t.documentMode:void 0}t:{var re="",ie=(Qt=et,te?/rv:([^\);]+)(\)|;)/.exec(Qt):Zt?/Edge\/([\d\.]+)/.exec(Qt):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qt):ee?/WebKit\/(\S+)/.exec(Qt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Qt):void 0);if(ie&&(re=ie?ie[1]:""),Xt){var oe=ne();if(null!=oe&&oe>parseFloat(re)){Jt=String(oe);break t}}Jt=re}var se,ae={};function ue(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=nt(String(Jt)).split("."),r=nt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=lt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||lt(0==s[2].length,0==a[2].length)||lt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}c.document&&Xt?se=ne()||parseInt(Jt,10)||void 0:se=void 0;var ce=se;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Qt){}var he=!Xt||9<=Number(ce);function le(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function fe(t,n){vt(n,(function(n,r){n&&"object"==e(n)&&n.sa&&(n=n.ra()),"style"==r?t.style.cssText=n:"class"==r?t.className=n:"for"==r?t.htmlFor=n:ve.hasOwnProperty(r)?t.setAttribute(ve[r],n):0==r.lastIndexOf("aria-",0)||0==r.lastIndexOf("data-",0)?t.setAttribute(r,n):t[r]=n}))}var pe,de,ve={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ye(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!v(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(y(o)){s="function"==typeof o.item;break t}}s=!1}W(s?tt(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){c.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(c.Promise&&c.Promise.resolve){var t=c.Promise.resolve(void 0);de=function(){t.then(Ee)}}else de=function(){var t=Ee;!y(c.setImmediate)||c.Window&&c.Window.prototype&&!dt("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(pe||(pe=function(){var t=c.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=S((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){c.setTimeout(t,0)}}()),pe(t)):c.setImmediate(t)}}(),we||(de(),we=!0),_e.add(t,e)}var we=!1,_e=new B;function Ee(){for(var t;t=G();){try{t.a.call(t.b)}catch(t){me(t)}V(q,t)}we=!1}function Se(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=p)try{var n=this;t.call(e,(function(t){Fe(n,Te,t)}),(function(t){if(!(t instanceof ze))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Fe(n,Ce,t)}))}catch(t){Fe(this,Ce,t)}}var Ie=0,Te=2,Ce=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new U((function(){return new ke}),(function(t){t.reset()}));function Ne(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function xe(t){if(t instanceof Se)return t;var e=new Se(p);return Fe(e,Te,t),e}function Oe(t){return new Se((function(e,n){n(t)}))}function Pe(t,e,n){je(t,e,n,null)||be(I(e,t))}function Re(t){return new Se((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Pe(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function De(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ie&&1==r?De(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),Be(n,i,Ce,e)))}t.c=null}else Fe(t,Ce,e)}function Me(t,e){t.b||t.a!=Te&&t.a!=Ce||Ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Ne(null,null,null);return i.a=new Se((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ze?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Me(t,i),i.a}function Fe(t,e,n){t.a==Ie&&(t===n&&(e=Ce,n=new TypeError("Promise cannot resolve to itself")),t.a=1,je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ue(t),e!=Ce||n instanceof ze||function(t,e){t.g=!0,be((function(){t.g&&Ge.call(null,e)}))}(t,n)))}function je(t,e,n,r){if(t instanceof Se)return Me(t,Ne(e||p,n||null,r)),!0;if(M(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(y(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ue(t){t.h||(t.h=!0,be(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Be(t,e,n,r){if(n==Ce&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Ge.call(null,t)}V(Ae,e)}function qe(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Se.prototype.then=function(t,e,n){return Le(this,y(t)?t:null,y(e)?e:null,n)},Se.prototype.$goog_Thenable=!0,(r=Se.prototype).oa=function(t,e){return(t=Ne(t,t,e)).c=!0,Me(this,t),this},r.o=function(t,e){return Le(this,null,t,e)},r.cancel=function(t){if(this.a==Ie){var e=new ze(t);be((function(){De(this,e)}),this)}},r.$c=function(t){this.a=Ie,Fe(this,Te,t)},r.ad=function(t){this.a=Ie,Fe(this,Ce,t)},r.gc=function(){for(var t;t=Ve(this);)Be(this,t,this.a,this.i);this.h=!1};var Ge=me;function ze(t){L.call(this,t)}function He(){0!=We&&(Ke[m(this)]=this),this.xa=this.xa,this.pa=this.pa}C(ze,L),ze.prototype.name="cancel";var We=0,Ke={};function Je(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=We)){var e=m(t);if(0!=We&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ke[e]}}He.prototype.xa=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},Ye=!Xt||9<=Number(ce),Xe=Xt&&!ue("9"),Ze=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",p,e),c.removeEventListener("test",p,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(te){t:{try{Kt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},C(tn,$e);var en=Qe({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++rn,this.va=this.Pa=!1}function sn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(sn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=cn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new on(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),ln={};function fn(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=Sn(n),t&&t[nn]?Tn(t,e,n,g(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=_n(t);if(a||(t[hn]=a=new an(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=wn,e=Ye?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ze||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Sn(n),t&&t[nn]?Cn(t,e,n,g(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=Sn(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=cn(o=t.a[e],n,r,i))&&(sn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=_n(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&yn(n))}function yn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_n(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):sn(t)}}}function gn(t){return t in ln?ln[t]:ln[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&yn(t),n.call(r,e)}function wn(t,e){if(t.va)return!0;if(!Ye){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function _n(t){return(t=t[hn])instanceof an?t:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sn(t){return y(t)?t:(t[En]||(t[En]=function(e){return t.handleEvent(e)}),t[En])}function In(){He.call(this),this.v=new an(this),this.ac=this,this.gb=null}function Tn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Cn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&un(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function An(t,e,n){if(y(t))n&&(t=S(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=S(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Nn(t){var e=null;return new Se((function(n,r){-1==(e=An((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw c.clearTimeout(e),t}))}function xn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(v(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}C(In,He),In.prototype[nn]=!0,In.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},In.prototype.removeEventListener=function(t,e,n,r){vn(this,t,e,n,r)},In.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;bt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=kn(s,r,!0,t)&&i}if(i=kn(s=t.b=n,r,!0,t)&&i,i=kn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(s=t.b=e[o],r,!1,t)&&i;return i},In.prototype.Da=function(){if(In.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)sn(n[r]);delete e.a[t],e.b--}}this.gb=null},(r=Pn.prototype).W=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.Y=function(){return Rn(this),this.a.concat()},r.clear=function(){this.b={},this.c=this.a.length=0},r.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},r.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Fn(this,t.c),this.l=t.l,this.a=t.a,jn(this,t.g),this.f=t.f,Un(this,ir(t.b)),this.h=t.h):t&&(n=String(t).match(Mn))?(this.i=!!e,Fn(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),jn(this,n[4]),this.f=zn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!e,this.b=new Zn(null,this.i))}function Fn(t,e,n){t.c=n?zn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Un(t,e,n){e instanceof Zn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(er(this,e),rr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Yn)),t.b=new Zn(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function Bn(t,e){return t.b.get(e)}function qn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Gn(t,e,n,r){var i=new Ln(null,void 0);return t&&Fn(i,t),e&&(i.a=e),n&&jn(i,n),r&&(i.f=r),i}function zn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Wn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Wn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Qn:Jn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Xn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Fn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)jn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ht(i,"./")||ht(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Un(e,ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,Jn=/[#\?:]/g,Qn=/[#\?]/g,Yn=/[#\?@]/g,Xn=/#/g;function Zn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new Pn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tr(t){var e=On(t);if(void 0===e)throw Error("Keys are undefined");var n=new Zn(null,void 0);t=xn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?rr(n,i,o):n.add(i,o)}return n}function er(t,e){$n(t),e=or(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function nr(t,e){return $n(t),e=or(t,e),Dn(t.a.b,e)}function rr(t,e,n){er(t,e),0<n.length&&(t.c=null,t.a.set(or(t,e),tt(n)),t.b+=n.length)}function ir(t){var e=new Zn;return e.c=t.c,t.a&&(e.a=new Pn(t.a),e.b=t.b),e}function or(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function sr(t){var e=[];return ur(new ar,t,e),e.join("")}function ar(){}function ur(t,n,r){if(null==n)r.push("null");else{if("object"==e(n)){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),ur(t,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),lr(i,r),r.push(":"),ur(t,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(e(n)){case"string":lr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+e(n))}}}(r=Zn.prototype).add=function(t,e){$n(this),this.c=null,t=or(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.clear=function(){this.a=this.c=null,this.b=0},r.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){W(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.W=function(t){$n(this);var e=[];if("string"==typeof t)nr(this,t)&&(e=$(e,this.a.get(or(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},r.set=function(t,e){return $n(this),this.c=null,nr(this,t=or(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(hr,(function(t){var e=cr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),cr[t]=e),e})),'"')}function fr(){var t=Pr();return Xt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function pr(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||c.window;var n="about:blank";t&&(n=Dt(jt(t)||Bt)),e.location.href=n}function vr(t,n){var r,i=[];for(r in t)r in n?e(t[r])!=e(n[r])?i.push(r):"object"==e(t[r])&&null!=t[r]&&null!=n[r]?0<vr(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}function yr(t){return!!((t=(t||Pr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||c.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(e.target=r,ht(n,"crios/")&&(e.target="_blank")),Nr(Pr())==kr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:jt(void 0!==n.href?n.href:String(n))||Bt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(wt(s=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Ut(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=zt("",r,n,s),t=Dt(e),s&&($t&&ht(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Wt(t)+'">',t=new qt(t=(r=Ct())?r.createHTML(t):t,null,Gt),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(j("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}(t)),r.close())):(s=zt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wr=/^[^@]+@[^@]+$/;function _r(){var t=null;return new Se((function(e){"complete"==c.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw vn(window,"load",t),e}))}function Er(t){return t=t||Pr(),!("file:"!==Fr()&&"ionic:"!==Fr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sr(){var t=c.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Ir(){return void 0!==c.WorkerGlobalScope&&"function"==typeof c.importScripts}function Tr(){return t.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.Z.INTERNAL.hasOwnProperty("node")?"Node":Ir()?"Worker":"Browser"}function Cr(){var t=Tr();return"ReactNative"===t||"Node"===t}var kr="Firefox",Ar="Chrome";function Nr(t){var e=t.toLowerCase();return ht(e,"opera/")||ht(e,"opr/")||ht(e,"opios/")?"Opera":ht(e,"iemobile")?"IEMobile":ht(e,"msie")||ht(e,"trident/")?"IE":ht(e,"edge/")?"Edge":ht(e,"firefox/")?kr:ht(e,"silk/")?"Silk":ht(e,"blackberry")?"Blackberry":ht(e,"webos")?"Webos":!ht(e,"safari/")||ht(e,"chrome/")||ht(e,"crios/")||ht(e,"android")?!ht(e,"chrome/")&&!ht(e,"crios/")||ht(e,"edge/")?ht(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ar:"Safari"}var xr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in xr)i[xr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=Nr(i=Pr()):"Worker"===r&&(r=Nr(i=Pr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Pr(){return c.navigator&&c.navigator.userAgent||""}function Rr(t,n){t=t.split("."),n=n||c;for(var r=0;r<t.length&&"object"==e(n)&&null!=n;r++)n=n[t[r]];return r!=t.length&&(n=void 0),n}function Dr(){try{var t=c.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!fr()||!!c.indexedDB}catch(t){return Ir()&&!!c.indexedDB}return!1}function Mr(){return(Lr()||"chrome-extension:"===Fr()||Er())&&!Cr()&&Dr()&&!Ir()}function Lr(){return"http:"===Fr()||"https:"===Fr()}function Fr(){return c.location&&c.location.protocol||null}function jr(t){return!yr(t=t||Pr())&&Nr(t)!=kr}function Ur(t){return void 0===t?null:sr(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Br(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Gr(t){return"Safari"!=Nr(t=t||Pr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var t=c.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Pr(),e=Tr(),this.b=yr(t)||"ReactNative"===e}function Wr(){var t=c.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Jr(){return!(!Rr("fireauth.oauthhelper",c)&&!Rr("fireauth.iframe",c))}Hr.prototype.get=function(){var t=c.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Fr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Yr={};function Xr(t){Yr[t]||(Yr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Zr={};Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==Zr.abcd}catch(Qt){Qr=!1}function $r(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ti(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function ei(t){var e={};return ti(e,t),e}function ni(t){var n=t;if("object"==e(t)&&null!=t)for(var r in n="length"in t?[]:{},t)$r(n,r,ni(t[r]));return n}function ri(t){var e=t&&(t[ui]?"phone":null);if(!(e&&t&&t[ai]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ai]),$r(this,"displayName",t[oi]||null);var n=null;t[si]&&(n=new Date(t[si]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ii(t){try{var e=new ci(t)}catch(t){e=null}return e}ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var oi="displayName",si="enrolledAt",ai="mfaEnrollmentId",ui="phoneInfo";function ci(t){ri.call(this,t),$r(this,"phoneNumber",t[ui])}function hi(t){var e={},n=t[di],r=t[yi],i=t[gi];if(t=ii(t[vi]),!i||i!=fi&&i!=pi&&!n||i==pi&&!r||i==li&&!t)throw Error("Invalid checkActionCode response!");i==pi?(e[bi]=n||null,e[_i]=n||null,e[mi]=r):(e[bi]=r||null,e[_i]=r||null,e[mi]=n||null),e[wi]=t||null,$r(this,Si,i),$r(this,Ei,ni(e))}C(ci,ri),ci.prototype.w=function(){var t=ci.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var li="REVERT_SECOND_FACTOR_ADDITION",fi="EMAIL_SIGNIN",pi="VERIFY_AND_CHANGE_EMAIL",di="email",vi="mfaInfo",yi="newEmail",gi="requestType",mi="email",bi="fromEmail",wi="multiFactorInfo",_i="previousEmail",Ei="data",Si="operation";function Ii(t){var e=Bn(t=qn(t),Ti)||null,n=Bn(t,Ci)||null,r=Bn(t,Ni)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new A("argument-error",Ti+", "+Ci+"and "+Ni+" are required in a valid action code URL.");ti(this,{apiKey:e,operation:r,code:n,continueUrl:Bn(t,ki)||null,languageCode:Bn(t,Ai)||null,tenantId:Bn(t,xi)||null})}var Ti="apiKey",Ci="oobCode",ki="continueUrl",Ai="languageCode",Ni="mode",xi="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:fi,verifyAndChangeEmail:pi,verifyEmail:"VERIFY_EMAIL"};function Pi(t){try{return new Ii(t)}catch(t){return null}}function Ri(t){var n=t[ji];if(void 0===n)throw new A("missing-continue-uri");if("string"!=typeof n||"string"==typeof n&&!n.length)throw new A("invalid-continue-uri");this.h=n,this.b=this.a=null,this.g=!1;var r=t[Di];if(r&&"object"===e(r)){n=r[Bi];var i=r[Ui];if(r=r[Vi],"string"==typeof n&&n.length){if(this.a=n,void 0!==i&&"boolean"!=typeof i)throw new A("argument-error",Ui+" property must be a boolean when specified.");if(this.g=!!i,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new A("argument-error",Vi+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==n)throw new A("argument-error",Bi+" property must be a non empty string when specified.");if(void 0!==i||void 0!==r)throw new A("missing-android-pkg-name")}}else if(void 0!==r)throw new A("argument-error",Di+" property must be a non null object when specified.");if(this.f=null,(n=t[Fi])&&"object"===e(n)){if("string"==typeof(n=n[qi])&&n.length)this.f=n;else if(void 0!==n)throw new A("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==n)throw new A("argument-error",Fi+" property must be a non null object when specified.");if(void 0!==(n=t[Li])&&"boolean"!=typeof n)throw new A("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!n,void 0!==(t=t[Mi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Mi+" property must be a non empty string when specified.");this.i=t||null}var Di="android",Mi="dynamicLinkDomain",Li="handleCodeInApp",Fi="iOS",ji="url",Ui="installApp",Vi="minimumVersion",Bi="packageName",qi="bundleId";function Gi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var zi=null;function Hi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Wi(t){try{return new Hi(t)}catch(t){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=zi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!zi){zi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===zi[o]&&(zi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var Ji="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Qi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Qi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Qi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Ji},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Xi(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function Zi(t){var e={};e["facebook.com"]=ro,e["google.com"]=oo,e["github.com"]=io,e["twitter.com"]=so;var n=t&&t[to];try{if(n)return e[n]?new e[n](t):new no(t);if(void 0!==t[$i])return new eo(t)}catch(t){}return null}var $i="idToken",to="providerId";function eo(t){var e=t[to];if(!e&&t[$i]){var n=Wi(t[$i]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function no(t){eo.call(this,t),$r(this,"profile",ni((t=Br(t.rawUserInfo||"{}"))||{}))}function ro(t){if(no.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(no.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function oo(t){if(no.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function so(t){if(no.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function ao(t){var e=qn(t),n=Bn(e,"link"),r=Bn(qn(n),"link");return e=Bn(e,"deep_link_id"),Bn(qn(e),"link")||e||r||n||t}function uo(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?co:ho}C(no,eo),C(ro,no),C(io,no),C(oo,no),C(so,no);var co="enroll",ho="signin";function lo(){}function fo(t,e){return t.then((function(t){if(t[ta]){var n=Wi(t[ta]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==O+"user-not-found"?new A("user-mismatch"):t}))}function po(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function vo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function yo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new po(t.providerId,t.pendingToken)}catch(t){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:tr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function bo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(t){}}return null}function wo(t,e){this.Qc=e||[],ti(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Xi(t)||{}).Ja||null,this.ob=null}function _o(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');wo.call(this,t,[])}function Eo(t){wo.call(this,t,Qi),this.a=[]}function So(){Eo.call(this,"facebook.com")}function Io(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function To(){Eo.call(this,"github.com")}function Co(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function ko(){Eo.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new ko).credential({idToken:n,accessToken:e})}function No(){wo.call(this,"twitter.com",Ji)}function xo(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function Ro(){ti(this,{providerId:"password",isOAuthProvider:!1})}function Do(t,e){if(!(e=Mo(e)))throw new A("argument-error","Invalid email link!");return new Oo(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function Mo(t){return(t=Pi(t=ao(t)))&&t.operation===fi?t:null}function Lo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new A("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Fo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function jo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Uo(e){try{this.a=e||t.Z.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ti(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Lo({eb:t,cb:e})}function Bo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return Io(n);case"github.com":return Co(n);case"twitter.com":return xo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new po(e,s):new go(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Eo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Go(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function zo(t){return(t=t||{}).type?new Go(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Ho(){this.b=null,this.a=[]}uo.prototype.Ha=function(){return this.a?xe(this.a):xe(this.b)},uo.prototype.w=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ka=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.w=function(){},po.prototype.ka=function(t){return _a(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Ea(t,n)},po.prototype.c=function(t,e){return fo(Sa(t,vo(this)),e)},po.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(t){return _a(t,mo(this))},go.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,Ea(t,n)},go.prototype.c=function(t,e){return fo(Sa(t,mo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},wo.prototype.Ka=function(t){return this.Ib=gt(t),this},C(_o,wo),C(Eo,wo),Eo.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},Eo.prototype.Qb=function(){return tt(this.a)},Eo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},C(So,Eo),$r(So,"PROVIDER_ID","facebook.com"),$r(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(To,Eo),$r(To,"PROVIDER_ID","github.com"),$r(To,"GITHUB_SIGN_IN_METHOD","github.com"),C(ko,Eo),$r(ko,"PROVIDER_ID","google.com"),$r(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),C(No,wo),$r(No,"PROVIDER_ID","twitter.com"),$r(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?iu(t,Oa,{email:this.a,oobCode:this.f}):iu(t,$a,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?iu(t,Pa,{idToken:e,email:this.a,oobCode:this.f}):iu(t,Ha,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return fo(this.ka(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ti(Ro,{PROVIDER_ID:"password"}),ti(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ti(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(t){return t.fb(jo(this))},Lo.prototype.b=function(t,e){var n=jo(this);return n.idToken=e,iu(t,eu,n)},Lo.prototype.c=function(t,e){var n=jo(this);return n.operation="REAUTH",fo(t=iu(t,nu,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Uo.prototype.fb=function(t,e){var n=this.a.a;return xe(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==co?i.Ha().then((function(t){return function(t,e){return iu(t,Ka,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ho?i.Ha().then((function(e){return function(t,e){return iu(t,Ja,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return iu(t,Ga,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ti(Uo,{PROVIDER_ID:"phone"}),ti(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),Go.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Go.prototype.T=function(){return this.h},Go.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Ko=null;function Jo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Qo(t,e,n){A.call(this,t,n),(t=e||{}).Jb&&$r(this,"email",t.Jb),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Zb&&$r(this,"tenantId",t.Zb)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(O)&&(e=e.substring(O.length));var n={credential:Bo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function Xo(){}function Zo(t){return t.c||(t.c=t.b())}function $o(){}function ts(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function es(){}function ns(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.qc,this),this.a.onerror=S(this.Sb,this),this.a.onprogress=S(this.rc,this),this.a.ontimeout=S(this.vc,this)}function rs(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function is(t,e,n){this.reset(t,e,n,void 0,void 0)}function os(t){this.f=t,this.b=this.c=this.a=null}function ss(t,e){this.name=t,this.value=e}C(Jo,A),C(Qo,A),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&bt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},Xo.prototype.c=null,C($o,Xo),$o.prototype.a=function(){var t=ts(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return ts(this)&&(t[0]=!0,t[1]=!0),t},Wo=new $o,C(es,Xo),es.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ns;throw Error("Unsupported browser")},es.prototype.b=function(){return{}},(r=ns.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},r.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},r.abort=function(){this.a.abort()},r.setRequestHeader=function(){},r.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},r.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,rs(this,4)},r.Sb=function(){this.status=500,this.response=this.responseText="",rs(this,4)},r.vc=function(){this.Sb()},r.rc=function(){this.status=200,rs(this,1)},r.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},is.prototype.a=null,is.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},ss.prototype.toString=function(){return this.name};var as=new ss("SEVERE",1e3),us=new ss("WARNING",900),cs=new ss("CONFIG",700),hs=new ss("FINE",500);function ls(t){return t.c?t.c:t.a?ls(t.a):(j("Root logger has no level set."),null)}os.prototype.log=function(t,e,n){if(t.value>=ls(this).value)for(y(e)&&(e=e()),t=new is(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var fs={},ps=null;function ds(t){var e;if(ps||(ps=new os(""),fs[""]=ps,ps.c=cs),!(e=fs[t])){e=new os(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ds(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,fs[t]=e}return e}function vs(t,e){t&&t.log(hs,e,void 0)}function ys(t){this.f=t}function gs(t){In.call(this),this.u=t,this.h=void 0,this.readyState=ms,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ds("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}C(ys,Xo),ys.prototype.a=function(){return new gs(this.f)},ys.prototype.b=function(t){return function(){return t}}({}),C(gs,In);var ms=0;function bs(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ws(t){t.readyState=4,t.g=null,t.c=null,t.m=null,_s(t)}function _s(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Es(t){In.call(this),this.headers=new Pn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ss,this.u=this.S=!1}(r=gs.prototype).open=function(t,e){if(this.readyState!=ms)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,_s(this)},r.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},r.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ws(this)),this.readyState=ms},r.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,_s(this)),this.a&&(this.readyState=3,_s(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==c.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,bs(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},r.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ws(this):_s(this),3==this.readyState&&bs(this)}},r.tc=function(t){this.a&&(this.response=this.responseText=t,ws(this))},r.sc=function(t){this.a&&(this.response=t,ws(this))},r.Ua=function(t){var e=this.i;e&&e.log(us,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ws(this)},r.setRequestHeader=function(t,e){this.l.append(t,e)},r.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(us,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},r.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(us,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),C(Es,In);var Ss="";Es.prototype.b=ds("goog.net.XhrIo");var Is=/^https?$/i,Ts=["POST","PUT"];function Cs(t){return"content-type"==t.toLowerCase()}function ks(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,As(t),xs(t)}function As(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==u)if(t.C[1]&&4==Ps(t)&&2==Rs(t))vs(t.b,Ds(t,"Local request error detected and ignored"));else if(t.i&&4==Ps(t))An(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ps(t)){vs(t.b,Ds(t,"Request complete")),t.c=!1;try{var e,n=Rs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Mn)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!Is.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<Ps(t)?t.a.statusText:""}catch(e){vs(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+Rs(t)+"]",As(t)}}finally{xs(t)}}}function xs(t,e){if(t.a){Os(t);var n=t.a,r=t.C[0]?p:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(as,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Os(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(c.clearTimeout(t.s),t.s=null)}function Ps(t){return t.a?t.a.readyState:0}function Rs(t){try{return 2<Ps(t)?t.a.status:-1}catch(t){return-1}}function Ds(t,e){return e+" ["+t.R+" "+t.l+" "+Rs(t)+"]"}function Ms(t){var e=Ws;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ls(t,e,n){t.a=!0,t.c=n,t.f=!e,Vs(t)}function Fs(t){if(t.a){if(!t.v)throw new Bs(t);t.v=!1}}function js(t,e,n,r){t.g.push([e,n,r]),t.a&&Vs(t)}function Us(t){return Q(t.g,(function(t){return y(t[1])}))}function Vs(t){if(t.h&&t.a&&Us(t)){var e=t.h,n=zs[e];n&&(c.clearTimeout(n.a),delete zs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(M(e)||"function"==typeof c.Promise&&e instanceof c.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Us(t)||(n=!0)}}t.c=e,r&&(a=S(t.m,t,!0),r=S(t.m,t,!1),e instanceof Ms?(js(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new Gs(e),zs[e.a]=e,t.h=e.a)}function Bs(){L.call(this)}function qs(){L.call(this)}function Gs(t){this.a=c.setTimeout(S(this.c,this),0),this.b=t}(r=Es.prototype).Ma=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",vs(this.b,Ds(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(){this.a&&this.c&&(vs(this.b,Ds(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xs(this))},r.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xs(this,!0)),Es.ab.Da.call(this)},r.Vb=function(){this.xa||(this.O||this.i||this.f?Ns(this):this.Jc())},r.Jc=function(){Ns(this)},r.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ss:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(as,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return vs(this.b,"Can not get response: "+t.message),null}},Ms.prototype.cancel=function(t){if(this.a)this.c instanceof Ms&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qs(this),Fs(this),Ls(this,!1,t))}},Ms.prototype.m=function(t,e){this.i=!1,Ls(this,t,e)},Ms.prototype.then=function(t,e,n){var r,i,o=new Se((function(t,e){r=t,i=e}));return js(this,r,(function(t){t instanceof qs?o.cancel():i(t)})),o.then(t,e,n)},Ms.prototype.$goog_Thenable=!0,C(Bs,L),Bs.prototype.message="Deferred has already fired",Bs.prototype.name="AlreadyCalledError",C(qs,L),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Gs.prototype.c=function(){throw delete zs[this.a],this.b};var zs={};function Hs(t){var e={},n=e.document||document,r=At(t).toString(),i=ge(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Ms(o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout((function(){Ks(i,!0);var t=new Ys(Qs,"Timeout reached for loading script "+r);Fs(s),Ls(s,!1,t)}),u),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ks(i,e.xd||!1,a),Fs(s),Ls(s,!0,null))},i.onerror=function(){Ks(i,!0,a);var t=new Ys(Js,"Error while loading script "+r);Fs(s),Ls(s,!1,t)},bt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){wt(t,"HTMLScriptElement"),t.src=At(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=c?e=f(e.document):(null===l&&(l=f(c.document)),e=l),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ws(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ks(t,!0,this.Ma)}}function Ks(t,e,n){null!=n&&c.clearTimeout(n),t.onload=p,t.onerror=p,t.onreadystatechange=p,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Js=0,Qs=1;function Ys(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Xs(t){this.f=t}function Zs(e,n,r){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||ea,this.g=gt(e.secureTokenHeaders||na),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||ra,this.a=gt(e.firebaseHeaders||ia),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Tr(),!(r=c.XMLHttpRequest||r&&t.Z.INTERNAL.node&&t.Z.INTERNAL.node.XMLHttpRequest)&&!Ir())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ir()?this.f=new ys(self):Cr()?this.f=new Xs(r):this.f=new es,this.b=null}C(Ys,L),C(Xs,Xo),Xs.prototype.a=function(){return new this.f},Xs.prototype.b=function(){return{}};var $s,ta="idToken",ea=new Hr(3e4,6e4),na={"Content-Type":"application/x-www-form-urlencoded"},ra=new Hr(3e4,6e4),ia={"Content-Type":"application/json"};function oa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function sa(t,e){e&&(t.l=aa("https://securetoken.googleapis.com/v1/token",e),t.h=aa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=aa("https://identitytoolkit.googleapis.com/v2/",e))}function aa(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Fn(t,e.c),t.a=e.a,jn(t,e.g),t.toString()}function ua(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ca(t,e,n,r,i,o,s){(function(){var t=Pr();return!((t=Nr(t)!=Ar?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Xt&&ce&&!(9<ce))})()||Ir()?t=S(t.u,t):($s||($s=new Se((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(c[la]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){js(t,null,e,void 0)}(Hs(Nt(ha,{onload:la})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=S(t.s,t)),t(e,n,r,i,o,s)}Zs.prototype.T=function(){return this.b},Zs.prototype.u=function(t,e,n,r,i,o){if(Ir()&&(void 0===c.fetch||void 0===c.Headers||void 0===c.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Es(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}Tn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return vs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Cn(s,"ready",(function(){a&&clearTimeout(a),Je(this)})),Cn(s,"timeout",(function(){a&&clearTimeout(a),Je(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Wo.a(),t.C=t.D?Zo(t.D):Zo(Wo),t.a.onreadystatechange=S(t.Vb,t);try{vs(t.b,Ds(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return vs(t.b,Ds(t,"Error opening Xhr: "+e.message)),void ks(t,e)}e=r||"";var o=new Pn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"==typeof t)W(t,e,void 0);else for(var n=On(t),r=xn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Cs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=c.FormData&&e instanceof c.FormData,!Y(Ts,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Os(t),0<t.g&&(t.u=function(t){return Xt&&ue(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),vs(t.b,Ds(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=S(t.Ma,t)):t.s=An(t.Ma,t.g,t)),vs(t.b,Ds(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){vs(t.b,Ds(t,"Send error: "+e.message)),ks(t,e)}}(s,t,n,r,i)};var ha=new _t(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),la="__fcb"+Math.floor(1e6*Math.random()).toString();function fa(t){if("string"!=typeof(t=t.email)||!wr.test(t))throw new A("invalid-email")}function pa(t){"email"in t&&fa(t)}function da(t){if(!t[ta]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,gt(t));throw new A("internal-error")}}function va(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Zs.prototype.s=function(t,e,n,r,i){var o=this;$s.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Zs.prototype.zb=function(){return iu(this,Wa,{})},Zs.prototype.Bb=function(t,e){return iu(this,za,{idToken:t,email:e})},Zs.prototype.Cb=function(t,e){return iu(this,Ha,{idToken:t,password:e})};var ya={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ba(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&nr(t=new Zn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function wa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=ou(t.errorMessage)),e)throw e;da(t)}function _a(t,e){return e.returnIdpCredential=!0,iu(t,Qa,e)}function Ea(t,e){return e.returnIdpCredential=!0,iu(t,Xa,e)}function Sa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,iu(t,Ya,e)}function Ia(t){if(!t.oobCode)throw new A("invalid-action-code")}(r=Zs.prototype).Db=function(t,e){var n={idToken:t},r=[];return vt(ya,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),iu(this,za,n)},r.vb=function(t,e){return bt(t={requestType:"PASSWORD_RESET",email:t},e),iu(this,Ua,t)},r.wb=function(t,e){return bt(t={requestType:"EMAIL_SIGNIN",email:t},e),iu(this,La,t)},r.ub=function(t,e){return bt(t={requestType:"VERIFY_EMAIL",idToken:t},e),iu(this,Fa,t)},r.Eb=function(t,e,n){return bt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),iu(this,ja,t)},r.fb=function(t){return iu(this,tu,t)},r.nb=function(t,e){return iu(this,qa,{oobCode:t,newPassword:e})},r.Ra=function(t){return iu(this,Ca,{oobCode:t})},r.jb=function(t){return iu(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",A:Ia,Z:"email",B:!0},Ca={endpoint:"resetPassword",A:Ia,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},ka={endpoint:"signupNewUser",A:function(t){if(fa(t),!t.password)throw new A("weak-password")},G:da,V:!0,B:!0},Aa={endpoint:"createAuthUri",B:!0},Na={endpoint:"deleteAccount",N:["idToken"]},xa={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Oa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:fa,G:da,V:!0,B:!0},Pa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:fa,G:da,V:!0},Ra={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ga,G:da,B:!0,Na:!0},Da={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:da,B:!0,Na:!0},Ma={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");fa(t)},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},ja={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");fa(t)},Z:"email",B:!0},Va={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ba={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},qa={endpoint:"resetPassword",A:Ia,Z:"email",B:!0},Ga={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},za={endpoint:"setAccountInfo",N:["idToken"],A:pa,V:!0},Ha={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(pa(t),!t.password)throw new A("weak-password")},G:da,V:!0},Wa={endpoint:"signupNewUser",G:da,V:!0,B:!0},Ka={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Ja={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Qa={endpoint:"verifyAssertion",A:ma,Ya:ba,G:wa,V:!0,B:!0},Ya={endpoint:"verifyAssertion",A:ma,Ya:ba,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw ou(t.errorMessage);da(t)},V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new A("internal-error")},Ya:ba,G:wa,V:!0},Za={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:da,V:!0,B:!0},$a={endpoint:"verifyPassword",A:function(t){if(fa(t),!t.password)throw new A("wrong-password")},G:da,V:!0,B:!0},tu={endpoint:"verifyPhoneNumber",A:va,G:da,B:!0},eu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");va(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);da(t)}},nu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:va,G:da,B:!0},ru={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[ta]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function iu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Oe(new A("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return xe(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=qn(e+n);Vn(a,"key",t.c),s&&Vn(a,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(a,c,i[c]);return new Se((function(e,n){ca(t,a.toString(),(function(t){t?t.error?n(su(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:sr(Vr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function ou(t){return su({error:{errors:[{message:t}],code:400,message:t}})}function su(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",bt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=Ur(t)),new A("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(lu||(lu=new Se((function(t,e){function n(){zr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){zr(),e(Error("Network Error"))},timeout:cu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},xe(Hs(r=Nt(uu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new Se((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),hu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var uu=new _t(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),cu=new Hr(3e4,6e4),hu=new Hr(5e3,15e3),lu=null;function fu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Gn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Gn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function pu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(e){try{return t.Z.app(e).auth().Ga()}catch(t){return[]}}function vu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function yu(t){var e=pr();return function(t){return iu(t,Va,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:br.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Jo(pr())}))}function gu(t){return t.m||(t.m=_r().then((function(){if(!t.u){var e=t.c,n=t.i,r=du(t.b),i=new fu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=tt(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=zo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",xe(n)}return n.status="ERROR",xe(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Or(t.c,du(t.b)):null,t.l=new Zs(t.g,D(t.i),t.C),t.f&&sa(t.l,t.f)),t.l}function bu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new pu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.yb(h).toString()}function wu(e){if(this.a=e||t.Z.INTERNAL.reactNative&&t.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=S(this.c,this)}fu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):er(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},pu.prototype.yb=function(t){return this.h=t,this},pu.prototype.toString=function(){if(this.v){var e=qn(this.v.url);e=Gn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Gn("https",this.u,null,"/__/auth/handler");if(Vn(e,"apiKey",this.s),Vn(e,"appName",this.c),Vn(e,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=t.Z.app(this.c).auth().la()}catch(t){r=null}for(var i in n.ob=r,Vn(e,"providerId",this.a.providerId),n=Vr((r=this.a).Ib))n[i]=n[i].toString();i=r.Qc,n=gt(n);for(var o=0;o<i.length;o++){var s=i[o];s in n&&delete n[s]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),yt(n)||Vn(e,"customParameters",Ur(n))}if("function"==typeof this.a.Qb&&(r=this.a.Qb()).length&&Vn(e,"scopes",r.join(",")),this.l?Vn(e,"redirectUrl",this.l):er(e.b,"redirectUrl"),this.g?Vn(e,"eventId",this.g):er(e.b,"eventId"),this.i?Vn(e,"v",this.i):er(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Bn(e,a)&&Vn(e,a,this.b[a]);return this.h?Vn(e,"tid",this.h):er(e.b,"tid"),this.f?Vn(e,"eid",this.f):er(e.b,"eid"),(a=du(this.c)).length&&Vn(e,"fw",a.join(",")),e.toString()},(r=vu.prototype).Ob=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Se((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new Se((function(e){return function n(){Nn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Nn(n).then((function(){e(r)}))}))},r.Xb=function(){var t=Pr();return!jr(t)&&!Gr(t)},r.Tb=function(){return!1},r.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Oe(new A("popup-blocked"));if(s&&!jr())return this.ma().o((function(e){gr(t),i(e)})),r(),xe();this.a||(this.a=yu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){qo(n),s||dr(bu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},r.Nb=function(t,e,n,r){this.a||(this.a=yu(mu(this)));var i=this;return this.a.then((function(){qo(e),dr(bu(i.s,i.g,i.b,t,e,pr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},r.ma=function(){var t=this;return gu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new A("network-request-failed")}))},r.$b=function(){return!0},r.Ea=function(t){this.h.push(t)},r.Sa=function(t){Z(this.h,(function(e){return e==t}))},(r=wu.prototype).get=function(t){return xe(this.a.getItem(t)).then((function(t){return t&&Br(t)}))},r.set=function(t,e){return xe(this.a.setItem(t,Ur(e)))},r.U=function(t){return xe(this.a.removeItem(t))},r.ca=function(){},r.ia=function(){};var Eu,Su=[];function Iu(t,e,n){yt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Cu(t){this.c=t,this.b=!1,this.a=[]}function ku(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Se((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Au(t,c),e})).o((function(e){throw Au(t,c),e}))}function Au(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Z(t.a,(function(t){return t==e}))}}function Nu(){if(!Ru())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=c.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Ir()&&self?(this.v=function(){var t=Ir()?self:null;if(W(Su,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Su.push(e)}return e}(),Iu(this.v,"keyChanged",(function(e,n){return ju(t).then((function(e){return 0<e.length&&W(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Iu(this.v,"ping",(function(){return xe(["keyChanged"])}))):function(){var t=c.navigator;return t&&t.serviceWorker?xe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):xe(null)}().then((function(e){(t.h=e)&&(t.g=new Cu(new Tu(e)),ku(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function xu(t){return new Se((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Se((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return xu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ou(t){return t.i||(t.i=xu(t)),t.i}function Pu(t,e){var n=0;return new Se((function r(i,o){Ou(t).then(e).then(i).o((function(e){if(!(3<++n))return Ou(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!c.indexedDB}catch(t){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function Mu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Se((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Fu(t,e){return t.g&&t.h&&function(){var t=c.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?ku(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):xe()}function ju(t){return Ou(t).then((function(t){var e=Du(Mu(t,!1));return e.getAll?Lu(e.getAll()):new Se((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=vr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=xe().then((function(){if(Ru()){var t=qr(),r="__sak"+t;return Eu||(Eu=new Nu),(n=Eu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){W(e.a,(function(e){e(t)}))})),t}))}function Bu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var e="Node"==Tr();if(!(e=Gu()||e&&t.Z.INTERNAL.node&&t.Z.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Gu()||t.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Gu(){try{var t=c.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){this.type="nullStorage"}function Hu(){if(!function(){var e="Node"==Tr();if(!(e=Wu()||e&&t.Z.INTERNAL.node&&t.Z.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Wu()||t.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var t=c.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){var t={};t.Browser=Yu,t.Node=Xu,t.ReactNative=Zu,t.Worker=$u,this.a=t[Tr()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];W(r,(function(e){i.push(xe().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];W(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),W(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Cu.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(r=Nu.prototype).set=function(t,e){var n=this,r=!1;return Pu(this,(function(e){return Lu((e=Du(Mu(e,!0))).get(t))})).then((function(i){return Pu(n,(function(o){if(o=Du(Mu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Fu(n,t)})).oa((function(){r&&n.b--}))},r.get=function(t){return Pu(this,(function(e){return Lu(Du(Mu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},r.U=function(t){var e=this,n=!1;return Pu(this,(function(r){return n=!0,e.b++,Lu(Du(Mu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Fu(e,t)})).oa((function(){n&&e.b--}))},r.ca=function(t){0==this.a.length&&function(t){Uu(t),function e(){t.f=setTimeout((function(){t.l=ju(t).then((function(e){0<e.length&&W(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},r.ia=function(t){Z(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(r=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},r.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},r.U=function(t){return this.b.then((function(e){return e.U(t)}))},r.ca=function(t){this.a.push(t)},r.ia=function(t){Z(this.a,(function(e){return e==t}))},(r=Bu.prototype).get=function(t){return xe(this.a[t])},r.set=function(t,e){return this.a[t]=e,xe()},r.U=function(t){return delete this.a[t],xe()},r.ca=function(){},r.ia=function(){},(r=qu.prototype).get=function(t){var e=this;return xe().then((function(){return Br(e.a.getItem(t))}))},r.set=function(t,e){var n=this;return xe().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},r.U=function(t){var e=this;return xe().then((function(){e.a.removeItem(t)}))},r.ca=function(t){c.window&&fn(c.window,"storage",t)},r.ia=function(t){c.window&&vn(c.window,"storage",t)},(r=zu.prototype).get=function(){return xe(null)},r.set=function(){return xe()},r.U=function(){return xe()},r.ca=function(){},r.ia=function(){},(r=Hu.prototype).get=function(t){var e=this;return xe().then((function(){return Br(e.a.getItem(t))}))},r.set=function(t,e){var n=this;return xe().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},r.U=function(t){var e=this;return xe().then((function(){e.a.removeItem(t)}))},r.ca=function(){},r.ia=function(){};var Ju,Qu,Yu={F:qu,bb:Hu},Xu={F:qu,bb:Hu},Zu={F:wu,bb:zu},$u={F:qu,bb:zu},tc={rd:"local",NONE:"none",td:"session"};function ec(){var t=!(Gr(Pr())||!Sr()),e=jr(),n=Dr();this.m=t,this.h=e,this.l=n,this.a={},Ju||(Ju=new Ku),t=Ju;try{this.g=!fr()&&Jr()||!c.indexedDB?new t.a.F:new Vu(Ir()?new Bu:new t.a.F)}catch(t){this.g=new Bu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Bu}this.v=new Bu,this.f=S(this.Yb,this),this.b={}}function nc(){return Qu||(Qu=new ec),Qu}function rc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ic(t,e){return"firebase:"+t.name+(e?":"+e:"")}function oc(t,e,n){return n=ic(e,n),"local"==e.F&&(t.b[n]=null),rc(t,e.F).U(n)}function sc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=nc()}(r=ec.prototype).get=function(t,e){return rc(this,t.F).get(ic(t,e))},r.set=function(t,e,n){var r=ic(t,n),i=this,o=rc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},r.addListener=function(t,e,n){t=ic(t,e),this.l&&(this.b[t]=c.localStorage.getItem(t)),yt(this.a)&&(rc(this,"local").ca(this.f),this.h||(fr()||!Jr())&&c.indexedDB||!this.l||function(t){sc(t),t.c=setInterval((function(){for(var e in t.a){var n=c.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},r.removeListener=function(t,e,n){t=ic(t,e),this.a[t]&&(Z(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),yt(this.a)&&(rc(this,"local").ia(this.f),sc(this))},r.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=c.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?rc(this,"local").ia(this.f):sc(this),this.m)if(n=c.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?c.localStorage.setItem(e,r):c.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===c.localStorage.getItem(e)||(o.b[e]=c.localStorage.getItem(e),o.mb(e))},Xt&&ce&&10==ce&&c.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else W(t,S(this.mb,this))},r.mb=function(t){this.a[t]&&W(this.a[t],(function(t){t()}))};var uc,cc={name:"authEvent",F:"local"};function hc(){this.a=nc()}function lc(t,e){this.b=fc,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0===uc&&(uc=c.Int32Array?new Int32Array(bc):bc),this.reset()}C(lc,(function(){this.b=-1}));for(var fc=64,pc=fc-1,dc=[],vc=0;vc<pc;vc++)dc[vc]=0;var yc=$(128,dc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|uc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!v(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):tt(this.h)};var bc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function wc(){lc.call(this,8,_c)}C(wc,lc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ec(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new hc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Sc(t){return new A("invalid-cordova-configuration",t)}function Ic(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Tc(t){return t.f||(t.f=t.ma().then((function(){return new Se((function(n){t.Ea((function e(r){return n(r),t.Sa(e),!1})),function(t){function n(n){i=!0,o&&o.cancel(),Cc(t).then((function(i){var o=r;if(i&&n&&n.url){var s=null;-1!=(o=ao(n.url)).indexOf("/__/auth/callback")&&(s=(s="object"===e(s=Br(Bn(s=qn(o),"firebaseError")||null))?N(s):null)?new Go(i.c,i.b,null,null,s,null,i.T()):new Go(i.c,i.b,o,i.f,null,null,i.T())),o=s||r}Ic(t,o)}))}var r=new Go("unknown",null,null,null,new A("no-auth-event")),i=!1,o=Nn(500).then((function(){return Cc(t).then((function(){i||Ic(t,r)}))})),s=c.handleOpenURL;c.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",c).toLowerCase()+"://")&&n({url:t}),"function"==typeof s)try{s(t)}catch(t){console.error(t)}},Ko||(Ko=new Ho),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",c))&&t(null,e.b))}(n)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(cc,t.a).then((function(t){return zo(t)}))}(t.g).then((function(n){return e=n,oc((n=t.g).b,cc,n.a)})).then((function(){return e}))}function kc(t){this.a=t,this.b=nc()}(r=Ec.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Er(void 0)?_r().then((function(){return new Se((function(t,e){var n=c.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",c))throw Sc("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",c))throw Sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",c))throw Sc("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",c))throw Sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},r.Ob=function(t,e){return e(new A("operation-not-supported-in-this-environment")),xe()},r.Mb=function(){return Oe(new A("operation-not-supported-in-this-environment"))},r.$b=function(){return!1},r.Xb=function(){return!0},r.Tb=function(){return!0},r.Nb=function(t,e,n,r){if(this.c)return Oe(new A("redirect-operation-pending"));var i=this,o=c.document,s=null,a=null,u=null,h=null;return this.c=xe().then((function(){return qo(e),Tc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Go(e,r,null,o,new A("no-auth-event"),null,i),a=Rr("BuildInfo.packageName",c);if("string"!=typeof a)throw new A("invalid-cordova-configuration");var u=Rr("BuildInfo.displayName",c),h={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!Pr().toLowerCase().match(/android/))return Oe(new A("operation-not-supported-in-this-environment"));h.apn=a}u&&(h.appDisplayName=u),o=function(t){var e=new wc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,yc,56-e.c):mc(e,yc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return J(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=bu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(cc,s.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",c);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",c)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",c)))throw new A("invalid-cordova-configuration");e=Pr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Se((function(t,e){a=function(){var e=Rr("cordova.plugins.browsertab.close",c);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s||(s=Nn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Wr()&&u()},o.addEventListener("resume",u,!1),Pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null}))},r.Ea=function(t){this.b.push(t),Tc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Go("unknown",null,null,null,new A("no-auth-event")),t(e))}))},r.Sa=function(t){Z(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",F:"session"};function Nc(t){return oc(t.b,Ac,t.a)}function xc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=S(this.s,this),this.b=new Hc,this.C=new Yc,this.g=new kc(Gc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,x,this.J)}function Oc(e,n,r,i,o){var s=t.Z.SDK_VERSION||null;return Er()?new Ec(e,n,r,s,i,o):new vu(e,n,r,s,i,o)}function Pc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&Pc(t).o((function(e){var n=new Go("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||Wc(t.b)}function Dc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Nc(t.g).then((function(){Pc(t).o((function(e){var n=new Go("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Mc(t,e){Z(t.h,(function(t){return t==e}))}xc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},xc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=T()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=T())),e=!0;break}}return Wc(this.b),e};var Lc=new Hr(2e3,1e4),Fc=new Hr(3e4,6e4);function jc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Se((function(){})):Nc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Bc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Lc.get())}xc.prototype.qa=function(){return this.b.qa()};var qc={};function Gc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function zc(t,e,n,r){var i=Gc(e,n,r);return qc[i]||(qc[i]=new xc(t,e,n,r)),qc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Wc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function Kc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function Jc(t,e){if(t.b=function(){return xe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Jc(t,n):Jc(t,{user:null}),t.f=[],t.c=[]}function Yc(){}function Xc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Zc(t,e){this.a=e,$r(this,"verificationId",t)}function $c(t,e,n,r){return new Uo(t).fb(e,n).then((function(t){return new Zc(t,r)}))}function th(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ti(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new uo(null,r),this.b=[];var i=this;W(e[nh]||[],(function(t){(t=ii(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),xe()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Qc(t,a,e,null)})).o((function(e){Qc(t,a,null,e)}))}(this,t,e):Oe(new A("invalid-auth-event")):(Qc(this,!1,null,null),xe())}else Oe(new A("invalid-auth-event"))},Hc.prototype.qa=function(){var t=this;return new Se((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=Nn(Fc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Yc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),xe()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Oe(new A("invalid-auth-event"))}else Oe(new A("invalid-auth-event"))},Zc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),$r(this,"resolver",this.b)}function oh(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function sh(){}function ah(t){$r(this,"factorId",t.fa),this.a=t}function uh(t){if(ah.call(this,t),this.a.fa!=Uo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=S(this.yc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&W(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[oi]=t.displayName),t.enrollmentTime&&(r[si]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ui]=t.phoneNumber);try{e=new ci(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,$r(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=Nn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=c.document,e=null;return Wr()||!t?xe():new Se((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function yh(t,e){t.b=Wi(e[ta]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gh(t,e){this.a=t||null,this.b=e||null,ti(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function mh(t,e,n,r,i,o){ti(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function bh(e,n,r){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var i=t.Z.SDK_VERSION?Or(t.Z.SDK_VERSION):null;this.a=new Zs(this.l,D(x),i),e.emulatorConfig&&sa(this.a,e.emulatorConfig),this.b=new dh(this.a),kh(this,n[ta]),yh(this.b,n),$r(this,"refreshToken",this.b.a),xh(this,r||{}),In.call(this),this.R=!1,this.s&&Mr()&&(this.i=zc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=S(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){sa(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Eh(o,t.f)},this.ba=null,this.O=new hh(this,r),$r(this,"multiFactor",this.O)}function wh(t,e){t.ja&&vn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&fn(e,"languageCodeChanged",t.Oa)}function _h(t,e){t.X&&vn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&fn(e,"emulatorConfigChanged",t.Aa)}function Eh(e,n){e.$=n,ua(e.a,t.Z.SDK_VERSION?Or(t.Z.SDK_VERSION,e.$):null)}function Sh(t,e){t.ba&&vn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&fn(e,"frameworkChanged",t.Ba)}function Ih(e){try{return t.Z.app(e.m).auth()}catch(t){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Th(t){t.D||t.u.b||(t.u.start(),vn(t,"tokenChanged",t.aa),fn(t,"tokenChanged",t.aa))}function Ch(t){vn(t,"tokenChanged",t.aa),t.u.stop()}function kh(t,e){t.za=e,$r(t,"_lat",e)}function Ah(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Re(e).then((function(){return t}))}function Nh(t){t.i&&!t.R&&(t.R=!0,Dc(t.i,t))}function xh(t,e){ti(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new gh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Oh(){}function Ph(t){return xe().then((function(){if(t.D)throw new A("app-deleted")}))}function Rh(t){return J(t.providerData,(function(t){return t.providerId}))}function Dh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){Z(t.providerData,(function(t){return t.providerId==e}))}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Fh(t,e){t!=e&&(ti(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new gh(t.a,t.b)}(e.metadata)):$r(t,"metadata",new gh),W(e.providerData,(function(e){Dh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),$r(t,"refreshToken",t.b.a),lh(t.O,e.O.b))}function jh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return iu(t.a,Ma,{idToken:e}).then(S(t.Kc,t))}(t,e).then((function(){return n||Lh(t,"isAnonymous",!1),e}))}))}function Uh(t,e){e[ta]&&t.za!=e[ta]&&(yh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),kh(t,e[ta]),Lh(t,"refreshToken",t.b.a))}function Vh(t,e){return jh(t).then((function(){if(Y(Rh(t),e))return Ah(t).then((function(){throw new A("provider-already-linked")}))}))}function Bh(t,e,n){return ei({user:t,credential:Bo(e),additionalUserInfo:e=Zi(e),operationType:n})}function qh(t,e){return Uh(t,e),t.reload().then((function(){return t}))}function Gh(e,n,r,i,o){if(!Mr())return Oe(new A("operation-not-supported-in-this-environment"));if(e.h&&!o)return Oe(e.h);var s=Xi(r.providerId),a=qr(e.uid+":::"),u=null;(!jr()||Sr())&&e.s&&r.isOAuthProvider&&(u=bu(e.s,e.l,e.m,n,r,null,a,t.Z.SDK_VERSION||null,null,null,e.tenantId));var c=mr(u,s&&s.ua,s&&s.ta);return i=i().then((function(){if(Hh(e),!o)return e.I().then((function(){}))})).then((function(){return jc(e.i,c,n,r,a,!!u,e.tenantId)})).then((function(){return new Se((function(t,r){e.na(n,null,new A("cancelled-popup-request"),e.g||null),e.f=t,e.C=r,e.g=a,e.c=Bc(e.i,e,n,c,a)}))})).then((function(t){return c&&gr(c),t?ei(t):null})).o((function(t){throw c&&gr(c),t})),Wh(e,i,o)}function zh(t,e,n,r,i){if(!Mr())return Oe(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return Oe(t.h);var o=null,s=qr(t.uid+":::");return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Ah(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Qh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yh(t.ha);throw o})).then((function(){if(o)throw o})),Wh(t,r,i)}function Hh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new A("internal-error");throw new A("auth-domain-config-required")}}function Wh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Oe(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ch("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){X(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Ih(t),S(t.jc,t))),n||e}))}function Kh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[ta]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bh(e,n,t);return t.providerData&&W(t.providerData,(function(t){t&&Dh(i,ei(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Jh(t){this.a=t,this.b=nc()}eh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[nh],delete n[rh],bt(n,t),e.g(n)}))},C(ih,A),sh.prototype.sb=function(t,e,n){return e.type==co?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),bt(n,{phoneVerificationInfo:jo(t.a)}),iu(e,Ra,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return bt(n={mfaPendingCredential:n},{phoneVerificationInfo:jo(t.a)}),iu(e,Da,n)}))}(this,t,e)},C(ah,sh),C(uh,ah),C(ch,$e),(r=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return W(t.mfaInfo||[],(function(t){(t=ii(t))&&e.push(t)})),e}(t.hd))},r.Rb=function(){return this.a.I().then((function(t){return new uo(t,null)}))},r.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Uh(n.a,t),n.a.reload()}))},r.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return iu(r,ru,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=K(e.b,(function(t){return t.uid!=n}));return lh(e,r),Uh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},r.w=function(){return{multiFactor:{enrolledFactors:J(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Se((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ca(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(su(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",tr(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Wi(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):xe(null):xe({accessToken:this.b.toString(),refreshToken:this.a})},gh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(bh,In),bh.prototype.wa=function(t){this.ya=t,oa(this.a,t)},bh.prototype.la=function(){return this.ya},bh.prototype.Ga=function(){return tt(this.$)},bh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(bh.prototype,"providerId","firebase"),(r=bh.prototype).reload=function(){var t=this;return Wh(this,Ph(this).then((function(){return jh(t).then((function(){return Ah(t)})).then(Oh)})))},r.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},r.I=function(t){var e=this;return Wh(this,Ph(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.za&&(kh(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken})))},r.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");xh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?J(t,(function(t){return new mh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Dh(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},r.Lc=function(t){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},r.tb=function(t){var e=this,n=null;return Wh(this,t.c(this.a,this.uid).then((function(t){return Uh(e,t),n=Bh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},r.Cc=function(t){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},r.qb=function(t){var e=this,n=null;return Wh(this,Vh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),qh(e,t)})).then((function(){return n})))},r.Dc=function(t,e){var n=this;return Wh(this,Vh(this,"phone").then((function(){return $c(Ih(n),t,e,S(n.qb,n))})))},r.Mc=function(t,e){var n=this;return Wh(this,xe().then((function(){return $c(Ih(n),t,e,S(n.tb,n))})),!0)},r.Bb=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},r.ed=function(t){var e=this;return Wh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Uh(e,t),e.reload()})))},r.Cb=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},r.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ph(this);var e=this;return Wh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Uh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),W(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),Ah(e)})).then(Oh))},r.cd=function(t){var e=this;return Wh(this,jh(this).then((function(n){return Y(Rh(e),t)?function(t,e,n){return iu(t,xa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return W(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),W(Rh(e),(function(t){n[t]||Mh(e,t)})),n[Uo.PROVIDER_ID]||$r(e,"phoneNumber",null),Ah(e)})):Ah(e).then((function(){throw new A("no-such-provider")}))})))},r.delete=function(){var t=this;return Wh(this,this.I().then((function(e){return iu(t.a,Na,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");wh(t,null),_h(t,null),Sh(t,null),t.J=[],t.D=!0,Ch(t),$r(t,"refreshToken",null),t.i&&Mc(t.i,t)}))},r.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},r.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},r.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?S(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?S(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?S(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?S(this.Lb,this):null},r.Ec=function(t){var e=this;return Gh(this,"linkViaPopup",t,(function(){return Vh(e,t.providerId).then((function(){return Ah(e)}))}),!1)},r.Nc=function(t){return Gh(this,"reauthViaPopup",t,(function(){return xe()}),!0)},r.Fc=function(t){var e=this;return zh(this,"linkViaRedirect",t,(function(){return Vh(e,t.providerId)}),!1)},r.Oc=function(t){return zh(this,"reauthViaRedirect",t,(function(){return xe()}),!0)},r.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,this.I().then((function(n){return Ea(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),qh(i,t)})).then((function(){return o})))},r.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,xe().then((function(){return fo(Sa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),Uh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},r.ub=function(t){var e=this,n=null;return Wh(this,this.I().then((function(e){return n=e,void 0===t||yt(t)?{}:Gi(new Ri(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},r.Eb=function(t,e){var n=this,r=null;return Wh(this,this.I().then((function(t){return r=t,void 0===e||yt(e)?{}:Gi(new Ri(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},r.jc=function(t){var e=null,n=this;return Wh(this,t=fo(xe(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),Uh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},r.toJSON=function(){return this.w()},r.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&bt(t,this.metadata.w()),W(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),bt(t,this.O.w()),t};var Qh={name:"redirectUser",F:"session"};function Yh(t){return oc(t.b,Qh,t.a)}function Xh(t){this.a=t,this.b=nc(),this.c=null,this.f=function(t){var e=tl("local"),n=tl("session"),r=tl("none");return function(t,e,n){var r=ic(e,n),i=rc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Br(c.localStorage.getItem(r))}catch(t){}if(s&&!o)return c.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&c.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get($h,t.a).then((function(t){return t?tl(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(tl("local"),this.a,S(this.g,this))}function Zh(t,e){var n,r=[];for(n in tc)tc[n]!==e&&r.push(oc(t.b,tl(tc[n]),t.a));return r.push(oc(t.b,$h,t.a)),function(t){return new Se((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Pe(t[a],I(o,a),s);else e(i)}))}(r)}Xh.prototype.g=function(){var t=this,e=tl("local");il(this,(function(){return xe().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var $h={name:"persistence",F:"session"};function tl(t){return{name:"authUser",F:t}}function el(t,e){return il(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function nl(t){return il(t,(function(){return oc(t.b,t.c,t.a)}))}function rl(t,e,n){return il(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Kh(t||{})}))}))}function il(t,e){return t.f=t.f.then(e,e),t.f}function ol(e){if(this.l=!1,$r(this,"settings",new Xc),$r(this,"app",e),!pl(this).options||!pl(this).options.apiKey)throw new A("invalid-api-key");e=t.Z.SDK_VERSION?Or(t.Z.SDK_VERSION):null,this.a=new Zs(pl(this).options&&pl(this).options.apiKey,D(x),e),this.R=[],this.s=[],this.O=[],this.hb=t.Z.INTERNAL.createSubscribe(S(this.zc,this)),this.X=void 0,this.bc=t.Z.INTERNAL.createSubscribe(S(this.Ac,this)),ll(this,null),this.i=new Xh(pl(this).options.apiKey+":"+pl(this).name),this.D=new Jh(pl(this).options.apiKey+":"+pl(this).name),this.$=gl(this,function(t){var e=pl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Qh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Kh(t||{})}))}(t.D,pl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Yh(t.D)}));return gl(t,e)}(t).then((function(){return rl(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return el(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:nl(t.i)}))):null})).then((function(e){ll(t,e||null)}));return gl(t,n)}(this)),this.h=gl(this,function(t){return t.$.then((function(){return hl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(tl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=S(this.Zc,this),this.Ba=S(this.da,this),this.ya=S(this.mc,this),this.za=S(this.wc,this),this.Aa=S(this.xc,this),this.b=null,function(t){var e=pl(t).options.authDomain,n=pl(t).options.apiKey;e&&Mr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=zc(e,n,pl(t).name,t.P),Dc(t.b,t),dl(t)&&Nh(dl(t)),t.m){Nh(t.m);var r=t.m;r.wa(t.la()),wh(r,t),Eh(r=t.m,t.J),Sh(r,t),sa((r=t.m).a,t.P),_h(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.Gc,this),this.u=0,In.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=qn(this.P.url);t=ei({protocol:t.c,host:t.a,port:t.g,options:ei({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function sl(t){$e.call(this,"languageCodeChanged"),this.h=t}function al(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function ul(t){$e.call(this,"frameworkChanged"),this.f=t}function cl(t){return t.Oa||Oe(new A("auth-domain-config-required"))}function hl(t){if(!Mr())return Oe(new A("operation-not-supported-in-this-environment"));var e=cl(t).then((function(){return t.b.qa()})).then((function(t){return t?ei(t):null}));return gl(t,e)}function ll(t,e){dl(t)&&(function(t,e){Z(t.S,(function(t){return t==e}))}(dl(t),t.Ba),vn(dl(t),"tokenChanged",t.ya),vn(dl(t),"userDeleted",t.za),vn(dl(t),"userInvalidated",t.Aa),Ch(dl(t))),e&&(e.S.push(t.Ba),fn(e,"tokenChanged",t.ya),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.u&&Th(e)),$r(t,"currentUser",e),e&&(e.wa(t.la()),wh(e,t),Eh(e,t.J),Sh(e,t),sa(e.a,t.P),_h(e,t))}function fl(t,e){var n=null,r=null;return gl(t,e.then((function(e){return n=Bo(e),r=Zi(e),function(t,e){var n={};return n.apiKey=pl(t).options.apiKey,n.authDomain=pl(t).options.authDomain,n.appName=pl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new bh(t,e);return n&&(i.ha=n),r&&Eh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return dl(t)&&e.uid==dl(t).uid?(Fh(dl(t),e),t.da(e)):(ll(t,e),Nh(e),t.da(e))})).then((function(){yl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,S(t.kc,t))),n||e})).then((function(){return ei({user:dl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function pl(t){return t.app}function dl(t){return t.currentUser}function vl(t){return dl(t)&&dl(t)._lat||null}function yl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](vl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](vl(t))}}function gl(t,e){return t.R.push(e),e.oa((function(){X(t.R,e)})),e}function ml(){}function bl(){this.a={},this.b=1e12}Xh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in tc)if(tc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Tr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),il(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=tl(t),e)return n.b.set(n.c,e,n.a)})):xe()}))},C(ol,In),C(sl,$e),C(al,$e),C(ul,$e),(r=ol.prototype).xb=function(t){return gl(this,t=this.i.xb(t))},r.wa=function(t){this.aa===t||this.l||(this.aa=t,oa(this.a,this.aa),this.dispatchEvent(new sl(this.la())))},r.la=function(){return this.aa},r.fd=function(){var t=c.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},r.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),c.document&&!t&&_r().then((function(){var t=c.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),c.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,sa(this.a,this.P),this.dispatchEvent(new al(this.P))}},r.Gc=function(e){this.J.push(e),ua(this.a,t.Z.SDK_VERSION?Or(t.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new ul(this.J))},r.Ga=function(){return tt(this.J)},r.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},r.T=function(){return this.S},r.toJSON=function(){return{apiKey:pl(this).options.apiKey,authDomain:pl(this).options.authDomain,appName:pl(this).name,currentUser:dl(this)&&dl(this).w()}},r.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},r.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},r.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?S(this.ic,this):null},r.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return fl(i,_a(i.a,o))}))},r.Xc=function(e){if(!Mr())return Oe(new A("operation-not-supported-in-this-environment"));var n=this,r=Xi(e.providerId),i=qr(),o=null;(!jr()||Sr())&&pl(this).options.authDomain&&e.isOAuthProvider&&(o=bu(pl(this).options.authDomain,pl(this).options.apiKey,pl(this).name,"signInViaPopup",e,null,i,t.Z.SDK_VERSION||null,null,null,this.T(),this.P));var s=mr(o,r&&r.ua,r&&r.ta);return gl(this,r=cl(this).then((function(t){return jc(t,s,"signInViaPopup",e,i,!!o,n.T())})).then((function(){return new Se((function(t,e){n.na("signInViaPopup",null,new A("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=i,n.c=Bc(n.b,n,"signInViaPopup",s,i)}))})).then((function(t){return s&&gr(s),t?ei(t):null})).o((function(t){throw s&&gr(s),t})))},r.Yc=function(t){if(!Mr())return Oe(new A("operation-not-supported-in-this-environment"));var e=this;return gl(this,cl(this).then((function(){return function(t){return il(t,(function(){return t.b.set($h,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())})))},r.qa=function(){var t=this;return hl(this).then((function(e){return t.b&&Kc(t.b.b),e})).o((function(e){throw t.b&&Kc(t.b.b),e}))},r.dd=function(t){if(!t)return Oe(new A("null-user"));if(this.S!=t.tenantId)return Oe(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=pl(this).options.apiKey,n.authDomain=pl(this).options.authDomain,n.appName=pl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[ta]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new bh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Eh(e,r),Fh(e,t),e}(t,n,e.D,e.Ga());return gl(this,this.h.then((function(){if(pl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return dl(e)&&t.uid==dl(e).uid?(Fh(dl(e),t),e.da(t)):(ll(e,r),Nh(r),e.da(r))})).then((function(){yl(e)})))},r.Ab=function(){var t=this;return gl(this,this.h.then((function(){return t.b&&Kc(t.b.b),dl(t)?(ll(t,null),nl(t.i).then((function(){yl(t)}))):xe()})))},r.Zc=function(){var t=this;return rl(this.i,pl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=dl(t)&&e){n=dl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Fh(dl(t),e),dl(t).I();(dl(t)||e)&&(ll(t,e),e&&(Nh(e),e.ha=t.D),t.b&&Dc(t.b,t),yl(t))}}))},r.da=function(t){return el(this.i,t)},r.mc=function(){yl(this),this.da(dl(this))},r.wc=function(){this.Ab()},r.xc=function(){this.Ab()},r.kc=function(t){var e=this;return this.h.then((function(){return fl(e,xe(t))}))},r.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(dl(e))}))},r.Ac=function(t){var e=this;!function(t,e){t.O.push(e),gl(t,t.h.then((function(){!t.l&&Y(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(vl(t)))})))}(this,(function(){t.next(dl(e))}))},r.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.hb(t,e,n)},r.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.bc(t,e,n)},r.nc=function(t){var e=this;return gl(this,this.h.then((function(){return dl(e)?dl(e).I(t).then((function(t){return{accessToken:t}})):null})))},r.Tc=function(t){var e=this;return this.h.then((function(){return fl(e,iu(e.a,Za,{token:t}))})).then((function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t}))},r.Uc=function(t,e){var n=this;return this.h.then((function(){return fl(n,iu(n.a,$a,{email:t,password:e}))}))},r.dc=function(t,e){var n=this;return this.h.then((function(){return fl(n,iu(n.a,ka,{email:t,password:e}))}))},r.$a=function(t){var e=this;return this.h.then((function(){return fl(e,t.ka(e.a))}))},r.Sc=function(t){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},r.zb=function(){var t=this;return this.h.then((function(){var e=dl(t);if(e&&e.isAnonymous){var n=ei({providerId:null,isNewUser:!1});return ei({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return fl(t,t.a.zb()).then((function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e}))}))},r.getUid=function(){return dl(this)&&dl(this).uid||null},r.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&dl(this)&&Th(dl(this))},r.Pc=function(t){var e=this;W(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&dl(this)&&Ch(dl(this)),this.removeAuthTokenListener(t)},r.addAuthTokenListener=function(t){var e=this;this.s.push(t),gl(this,this.h.then((function(){e.l||Y(e.s,t)&&t(vl(e))})))},r.removeAuthTokenListener=function(t){Z(this.s,(function(e){return e==t}))},r.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(tl("local"),t.a,this.ja),this.b&&(Mc(this.b,this),Kc(this.b.b)),Promise.resolve()},r.hc=function(t){return gl(this,function(t,e){return iu(t,Aa,{identifier:e,continueUri:Lr()?pr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},r.Bc=function(t){return!!Mo(t)},r.wb=function(t,e){var n=this;return gl(this,xe().then((function(){var t=new Ri(e);if(!t.c)throw new A("argument-error",Li+" must be true when sending sign in link to email");return Gi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},r.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},r.nb=function(t,e){return gl(this,this.a.nb(t,e).then((function(){})))},r.Ra=function(t){return gl(this,this.a.Ra(t).then((function(t){return new hi(t)})))},r.jb=function(t){return gl(this,this.a.jb(t).then((function(){})))},r.vb=function(t,e){var n=this;return gl(this,xe().then((function(){return void 0===e||yt(e)?{}:Gi(new Ri(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},r.Wc=function(t,e){return gl(this,$c(this,t,e,S(this.$a,this)))},r.Vc=function(t,e){var n=this;return gl(this,xe().then((function(){var r=e||pr(),i=Do(t,r);if(!(r=Mo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.$a(i)})))},ml.prototype.render=function(){},ml.prototype.reset=function(){},ml.prototype.getResponse=function(){},ml.prototype.execute=function(){};var wl=null;function _l(t,e){return(e=El(e))&&t.a[e]||null}function El(t){return(t=void 0===t?1e12:t)?t.toString():null}function Sl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():fn(this.f,"click",this.i)}function Il(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Tl(){}function Cl(){}bl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Sl(t,e),this.b++},bl.prototype.reset=function(t){var e=_l(this,t);t=El(t),e&&t&&(e.delete(),delete this.a[t])},bl.prototype.getResponse=function(t){return(t=_l(this,t))?t.getResponse():null},bl.prototype.execute=function(t){(t=_l(this,t))&&t.execute()},Sl.prototype.getResponse=function(){return Il(this),this.b},Sl.prototype.execute=function(){Il(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Sl.prototype.delete=function(){Il(this),this.g=!0,clearTimeout(this.a),this.a=null,vn(this.f,"click",this.i)},$r(Tl,"FACTOR_ID","phone"),Cl.prototype.g=function(){return wl||(wl=new bl),xe(wl)},Cl.prototype.c=function(){};var kl=null;function Al(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nl=new _t(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xl=new Hr(3e4,6e4);Al.prototype.g=function(t){var e=this;return new Se((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),xl.get());!c.grecaptcha||t!==e.f&&!e.b?(c[e.a]=function(){if(c.grecaptcha){e.f=t;var o=c.grecaptcha.render;c.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(c.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete c[e.a]},xe(Hs(Nt(Nl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(c.grecaptcha))}))},Al.prototype.c=function(){this.b--};var Ol=null;function Pl(t,e,n,r,i,o,s){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(kl||(kl=new Cl),s=kl):(Ol||(Ol=new Al),s=Ol),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ml])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ll],!c.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Zs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Rl];this.a[Rl]=function(t){if(Fl(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=Rr(u,c);"function"==typeof e&&e(t)}};var h=this.a[Dl];this.a[Dl]=function(){if(Fl(a,null),"function"==typeof h)h();else if("string"==typeof h){var t=Rr(h,c);"function"==typeof t&&t()}}}var Rl="callback",Dl="expired-callback",Ml="sitekey",Ll="size";function Fl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jl(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function Ul(t){if(t.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vl(e,n,r){var i=!1;try{this.b=r||t.Z.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");r=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=t.Z.SDK_VERSION?Or(t.Z.SDK_VERSION,s):null,Pl.call(this,r,e,n,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),s,D(x),i)}function Bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=ql.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=ql[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(r=Pl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jl(this,xe().then((function(){if(Lr()&&!Ir())return _r();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,iu(t.s,Ba,{})})).then((function(e){t.a[Ml]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},r.render=function(){Ul(this);var t=this;return jl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!he&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Wt(s.name),'"'),s.type){o.push(' type="',Wt(s.type),'"');var a={};bt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ge(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):fe(o,s)),2<r.length&&ye(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},r.verify=function(){Ul(this);var t=this;return jl(this,this.render().then((function(e){return new Se((function(n){var r=t.g.getResponse(e);r?n(r):(t.l.push((function e(r){r&&(function(t,e){Z(t.l,(function(t){return t==e}))}(t,e),n(r))})),t.i&&t.g.execute(t.c))}))})))},r.reset=function(){Ul(this),null!==this.c&&this.g.reset(this.c)},r.clear=function(){Ul(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},C(Vl,Pl);var ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Hl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Wl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Kl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Jl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Ql(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yl(t){return g(t)&&"string"==typeof t.uid}function Xl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Zl(t,e){for(var n in e){var r=e[n].name;t[r]=ef(r,t[n],e[n].j)}}function $l(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){Bl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function tf(t,e,n,r){t[e]=ef(e,n,r)}function ef(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Bl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Zl(ol.prototype,{jb:{name:"applyActionCode",j:[Gl("code")]},Ra:{name:"checkActionCode",j:[Gl("code")]},nb:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xl(Hl(),Wl(),"nextOrObserver"),Wl("opt_error",!0),Wl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xl(Hl(),Wl(),"nextOrObserver"),Wl("opt_error",!0),Wl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Gl("email"),Xl(Hl("opt_actionCodeSettings",!0),Kl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Gl("email"),Hl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Gl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Jl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Jl()]},Tc:{name:"signInWithCustomToken",j:[Gl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Vc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Xl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof bh)}},Kl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Gl("url"),Hl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),$l(ol.prototype,{lc:{name:"languageCode",kb:Xl(Gl(),Kl(),"languageCode")},ti:{name:"tenantId",kb:Xl(Gl(),Kl(),"tenantId")}}),ol.Persistence=tc,ol.Persistence.LOCAL="local",ol.Persistence.SESSION="session",ol.Persistence.NONE="none",Zl(bh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Jl()]},qb:{name:"linkWithCredential",j:[Jl()]},Dc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Jl()]},tb:{name:"reauthenticateWithCredential",j:[Jl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Xl(Hl("opt_actionCodeSettings",!0),Kl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},cd:{name:"unlink",j:[Gl("provider")]},Bb:{name:"updateEmail",j:[Gl("email")]},Cb:{name:"updatePassword",j:[Gl("password")]},ed:{name:"updatePhoneNumber",j:[Jl("phone")]},Db:{name:"updateProfile",j:[Hl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Gl("email"),Xl(Hl("opt_actionCodeSettings",!0),Kl(null,!0),"opt_actionCodeSettings",!0)]}}),Zl(bl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zl(ml.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zl(Se.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$l(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:zl("appVerificationDisabledForTesting")}}),Zl(Zc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),tf(lo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[bo,Po,Fo,yo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Xl(Gl(),Hl(),"json")]),tf(Ro,"credential",(function(t,e){return new Oo(t,e)}),[Gl("email"),Gl("password")]),Zl(Oo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(So.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(So,"credential",Io,[Xl(Gl(),Hl(),"token")]),tf(Ro,"credentialWithLink",Do,[Gl("email"),Gl("emailLink")]),Zl(To.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(To,"credential",Co,[Xl(Gl(),Hl(),"token")]),Zl(ko.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(ko,"credential",Ao,[Xl(Gl(),Xl(Hl(),Kl()),"idToken"),Xl(Gl(),Kl(),"accessToken",!0)]),Zl(No.prototype,{Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(No,"credential",xo,[Xl(Gl(),Hl(),"token"),Gl("secret",!0)]),Zl(Eo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[Xl(Gl(),Xl(Hl(),Kl()),"optionsOrIdToken"),Xl(Gl(),Kl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),Zl(go.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(po.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),tf(Uo,"credential",Vo,[Gl("verificationId"),Gl("verificationCode")]),Zl(Uo.prototype,{fb:{name:"verifyPhoneNumber",j:[Xl(Gl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Ql(t.session,co)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ql(t.session,ho)&&Yl(t.multiFactorHint):t.session&&t.multiFactorUid?Ql(t.session,ho)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Zl(Lo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(A.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(Qo.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(Jo.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(ih.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),Zl(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Zl(hh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Gl("displayName",!0)]},bd:{name:"unenroll",j:[Xl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yl},Gl(),"multiFactorInfoIdentifier")]}}),Zl(Vl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),tf(Ii,"parseLink",Pi,[Gl("link")]),tf(Tl,"assertion",(function(t){return new uh(t)}),[Jl("phone")]),function(){if(void 0===t.Z||!t.Z.INTERNAL||!t.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:pi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ol,AuthCredential:lo,Error:A};tf(e,"EmailAuthProvider",Ro,[]),tf(e,"FacebookAuthProvider",So,[]),tf(e,"GithubAuthProvider",To,[]),tf(e,"GoogleAuthProvider",ko,[]),tf(e,"TwitterAuthProvider",No,[]),tf(e,"OAuthProvider",Eo,[Gl("providerId")]),tf(e,"SAMLAuthProvider",_o,[Gl("providerId")]),tf(e,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ol)}}]),tf(e,"RecaptchaVerifier",Vl,[Xl(Gl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Hl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t.Z.app.App)}}]),tf(e,"ActionCodeURL",Ii,[]),tf(e,"PhoneMultiFactorGenerator",Tl,[]),t.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ol(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),t.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:S((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:S(t.nc,t),addAuthTokenListener:S(t.cc,t),removeAuthTokenListener:S(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t.Z.registerVersion("@firebase/auth","0.16.4"),t.Z.INTERNAL.extendNamespace({User:bh})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n(8897);var r=n(9628),i=n(1106);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h=h||{},l=c||self;function f(){}function p(t){var e=o(t);return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function d(t){var e=o(t);return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(){return Date.now()}function E(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}(this)},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function C(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var N,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function P(t,e){return t<e?-1:t>e?1:0}t:{var R=l.navigator;if(R){var D=R.userAgent;if(D){N=D;break t}}N=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=f;var V,B,q=O(N,"Opera"),G=O(N,"Trident")||O(N,"MSIE"),z=O(N,"Edge"),H=z||G,W=O(N,"Gecko")&&!(O(N.toLowerCase(),"webkit")&&!O(N,"Edge"))&&!(O(N,"Trident")||O(N,"MSIE"))&&!O(N,"Edge"),K=O(N.toLowerCase(),"webkit")&&!O(N,"Edge");function J(){var t=l.document;return t?t.documentMode:void 0}t:{var Q="",Y=(B=N,W?/rv:([^\);]+)(\)|;)/.exec(B):z?/Edge\/([\d\.]+)/.exec(B):G?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(B):K?/WebKit\/(\S+)/.exec(B):q?/(?:Version)[ \/]?(\S+)/.exec(B):void 0);if(Y&&(Q=Y?Y[1]:""),G){var X=J();if(null!=X&&X>parseFloat(Q)){V=String(X);break t}}V=Q}var Z,$={};function tt(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=x(String(V)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=P(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||P(0==s[2].length,0==a[2].length)||P(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}l.document&&G?Z=J()||parseInt(V,10)||void 0:Z=void 0;var et=Z,nt=!G||9<=Number(et),rt=G&&!tt("9"),it=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",f,e),l.removeEventListener("test",f,e)}catch(t){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{U(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.defaultPrevented=!0},E(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.b=function(){st.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ct,this.Y=this.Z=!1}function lt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=I(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(lt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=dt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ht(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function gt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=kt(n),t&&t[ut]?t.va(e,n,d(r)?!!r.capture:!!r,i):mt(t,e,n,!1,r,i)}function mt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i;if(s&&!nt)return null;var a=Tt(t);if(a||(t[vt]=a=new ft(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=It,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Et(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=kt(n),t&&t[ut]?t.wa(e,n,d(r)?!!r.capture:!!r,i):mt(t,e,n,!0,r,i)}function wt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=kt(n),t&&t[ut]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=dt(o=t.a[e],n,r,i))&&(lt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Tt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&_t(n))}function _t(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ut])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Et(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Tt(e))?(pt(n,t),0==n.b&&(n.src=null,e[vt]=null)):lt(t)}}}function Et(t){return t in yt?yt[t]:yt[t]="on"+t}function St(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&_t(t),n.call(r,e)}function It(t,e){if(t.Y)return!0;if(!nt){if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return St(t,e=new st(e,this))}return St(t,new st(e,this))}function Tt(t){return(t=t[vt])instanceof ft?t:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(t){return"function"==typeof t?t:(t[Ct]||(t[Ct]=function(e){return t.handleEvent(e)}),t[Ct])}function At(){S.call(this),this.c=new ft(this),this.J=this,this.C=null}function Nt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;j(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=xt(s,r,!0,e)&&i}if(i=xt(s=e.a=t,r,!0,e)&&i,i=xt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=xt(s=e.a=n[o],r,!1,e)&&i}function xt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&pt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}E(At,S),At.prototype[ut]=!0,(u=At.prototype).addEventListener=function(t,e,n,r){gt(this,t,e,n,r)},u.removeEventListener=function(t,e,n,r){wt(this,t,e,n,r)},u.G=function(){if(At.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)lt(n[r]);delete e.a[t],e.b--}}this.C=null},u.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},u.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ot=l.JSON.stringify;function Pt(){this.b=this.a=null}var Rt,Dt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Lt}),(function(t){t.reset()}));function Mt(){var t=Vt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lt(){this.next=this.b=this.a=null}function Ft(t){l.setTimeout((function(){throw t}),0)}function jt(t,e){Rt||function(){var t=l.Promise.resolve(void 0);Rt=function(){t.then(Bt)}}(),Ut||(Rt(),Ut=!0),Vt.add(t,e)}Pt.prototype.add=function(t,e){var n=Dt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lt.prototype.reset=function(){this.next=this.b=this.a=null};var Ut=!1,Vt=new Pt;function Bt(){for(var t;t=Mt();){try{t.a.call(t.b)}catch(t){Ft(t)}var e=Dt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ut=!1}function qt(t,e){At.call(this),this.b=t||1,this.a=e||l,this.f=b(this.Za,this),this.g=_()}function Gt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function zt(t,e,n){if("function"==typeof t)n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Ht(t){t.a=zt((function(){t.a=null,t.c&&(t.c=!1,Ht(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}E(qt,At),(u=qt.prototype).aa=!1,u.M=null,u.Za=function(){if(this.aa){var t=_()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Nt(this,"tick"),this.aa&&(Gt(this),this.start()))}},u.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_())},u.G=function(){qt.X.G.call(this),Gt(this),delete this.a};var Wt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ht(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(l.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(S);function Kt(t){S.call(this),this.b=t,this.a={}}E(Kt,S);var Jt=[];function Qt(t,e,n,r){Array.isArray(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var o=gt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Yt(t){M(t.a,(function(t,e){this.a.hasOwnProperty(e)&&_t(t)}),t),t.a={}}function Xt(){this.a=!0}function Zt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ot(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Kt.prototype.G=function(){Kt.X.G.call(this),Yt(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xt.prototype.info=function(){};var $t={},te=null;function ee(){return te=te||new At}function ne(t){ot.call(this,$t.Fa,t)}function re(t){var e=ee();Nt(e,new ne(e,t))}function ie(t,e){ot.call(this,$t.STAT_EVENT,t),this.stat=e}function oe(t){var e=ee();Nt(e,new ie(e,t))}function se(t){ot.call(this,$t.Ga,t)}function ae(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return l.setTimeout((function(){t()}),e)}$t.Fa="serverreachability",E(ne,ot),$t.STAT_EVENT="statevent",E(ie,ot),$t.Ga="timingevent",E(se,ot);var ue={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ce={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function he(){}function le(t){var e;return(e=t.a)||(e=t.a={}),e}function fe(){}he.prototype.a=null;var pe,de={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ve(){ot.call(this,"d")}function ye(){ot.call(this,"c")}function ge(){}function me(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Kt(this),this.P=be,t=H?125:void 0,this.R=new qt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}E(ve,ot),E(ye,ot),E(ge,he),pe=new ge;var be=45e3,we={},_e={};function Ee(t,e,n){t.H=1,t.i=ze(je(e)),t.j=n,t.I=!0,Se(t,null)}function Se(t,e){t.u=_(),Ce(t),t.l=je(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=Zn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Wt(b(t.Ca,t,t.a),t.O)),Qt(t.J,t.a,"readystatechange",t.Xa),e=t.B?L(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ie(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Te(t,n);if(i==_e){4==e&&(t.h=4,oe(14),r=!1),Zt(t.c,t.f,null,"[Incomplete Response]");break}if(i==we){t.h=4,oe(15),Zt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Zt(t.c,t.f,i,null),Oe(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zn(e),e.F=!0,oe(11))):(Zt(t.c,t.f,n,"[Invalid Chunked Response]"),xe(t),Ne(t))}function Te(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?_e:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?_e:(e=e.substr(r,n),t.D=r+n,e))}function Ce(t){t.T=_()+t.P,ke(t,t.P)}function ke(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ae(b(t.Va,t),e)}function Ae(t){t.o&&(l.clearTimeout(t.o),t.o=null)}function Ne(t){0==t.g.v||t.A||Kn(t.g,t)}function xe(t){Ae(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Gt(t.R),Yt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Oe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ln(n.b,t)))if(n.I=t.N,!t.C&&ln(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Wn(n),Mn(n)}Gn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ae(b(n.Sa,n),6e3));if(1>=hn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Qn(n,11)}else if((t.C||n.a==t)&&Wn(n),!A(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(O(h,"spdy")||O(h,"quic")||O(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(fn(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ge(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=_()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Xn(u,u.C?u.ga:null,u.fa),p.C){pn(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ae(d),Ce(d)),u.a=p}else qn(u);0<n.g.length&&jn(n)}else"stop"!=i[0]&&"close"!=i[0]||Qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Qn(n,7):Dn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(t){}}function Pe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)T(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Re(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Re)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function De(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Me(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Me(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Me(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(u=me.prototype).setTimeout=function(t){this.P=t},u.Xa=function(t){t=t.target;var e=this.F;e&&3==xn(t)?e.f():this.Ca(t)},u.Ca=function(t){try{if(t==this.a)t:{var e=xn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!H&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),Ae(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),xe(this),Ne(this);break t}Zt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Oe(this,u)}this.I?(Ie(this,e,o),H&&this.b&&3==e&&(Qt(this.J,this.R,"tick",this.Wa),this.R.start())):(Zt(this.c,this.f,o,null),Oe(this,o)),4==e&&xe(this),this.b&&!this.A&&(4==e?Kn(this.g,this):(this.b=!1,Ce(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),xe(this),Ne(this)}}}catch(t){}},u.Wa=function(){if(this.a){var t=xn(this.a),e=this.a.$();this.D<e.length&&(Ae(this),Ie(this,t,e),this.b&&4!=t&&Ce(this))}},u.cancel=function(){this.A=!0,xe(this)},u.Va=function(){this.o=null;var t=_();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),xe(this),this.h=2,Ne(this)):ke(this,this.T-t)},(u=Re.prototype).K=function(){De(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},u.L=function(){return De(this),this.a.concat()},u.get=function(t,e){return Me(this.b,t)?this.b[t]:e},u.set=function(t,e){Me(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},u.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Le=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fe){this.a=void 0!==e?e:t.a,Ue(this,t.f),this.j=t.j,Ve(this,t.c),Be(this,t.h),this.g=t.g,e=t.b;var n=new $e;n.c=e.c,e.a&&(n.a=new Re(e.a),n.b=e.b),qe(this,n),this.i=t.i}else t&&(n=String(t).match(Le))?(this.a=!!e,Ue(this,n[1]||"",!0),this.j=He(n[2]||""),Ve(this,n[3]||"",!0),Be(this,n[4]),this.g=He(n[5]||"",!0),qe(this,n[6]||"",!0),this.i=He(n[7]||"")):(this.a=!!e,this.b=new $e(null,this.a))}function je(t){return new Fe(t)}function Ue(t,e,n){t.f=n?He(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ve(t,e,n){t.c=n?He(e,!0):e}function Be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function qe(t,e,n){e instanceof $e?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=We(e,Xe)),t.b=new $e(e,t.a))}function Ge(t,e,n){t.b.set(e,n)}function ze(t){return Ge(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function He(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(We(e,Je,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(We(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Ye:Qe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",We(n,Ze)),t.join("")};var Je=/[#\/\?@]/g,Qe=/[#\?:]/g,Ye=/[#\?]/g,Xe=/[#\?@]/g,Ze=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Re,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Me(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Me((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&De(t)))}function nn(t,e){return tn(t),e=on(t,e),Me(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),k(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(u=$e.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},u.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){T(n,(function(n){t.call(e,n,r,this)}),this)}),this)},u.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},u.K=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=C(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},u.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},u.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},u.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sn=function(t,e){this.b=t,this.a=e};function an(t){this.g=t||un,t=l.PerformanceNavigationTiming?0<(t=l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(l.ia&&l.ia.ya&&l.ia.ya()&&l.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var un=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function hn(t){return t.b?1:t.a?t.a.size:0}function ln(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fn(t,e){t.a?t.a.add(e):t.b=e}function pn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function dn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=a(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return k(t.c)}function vn(){}function yn(){this.a=new vn}function gn(t,e,n){var r=n||"";try{Pe(t,(function(t,n){var i=t;d(t)&&(i=Ot(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function mn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}an.prototype.cancel=function(){var t,e;if(this.c=dn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=a(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return l.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return l.JSON.parse(t,void 0)};var bn=l.JSON.parse;function wn(t){At.call(this),this.headers=new Re,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}E(wn,At);var _n="",En=/^https?$/i,Sn=["POST","PUT"];function In(t){return"content-type"==t.toLowerCase()}function Tn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cn(t),An(t)}function Cn(t){t.u||(t.u=!0,Nt(t,"complete"),Nt(t,"error"))}function kn(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=xn(t)||2!=t.W()))if(t.l&&4==xn(t))zt(t.za,0,t);else if(Nt(t,"readystatechange"),4==xn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Le)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!En.test(o?o.toLowerCase():"")}e=i}if(e)Nt(t,"complete"),Nt(t,"success");else{t.h=6;try{var a=2<xn(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Cn(t)}}finally{An(t)}}}function An(t,e){if(t.a){Nn(t);var n=t.a,r=t.s[0]?f:null;t.a=null,t.s=null,e||Nt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Nn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(l.clearTimeout(t.m),t.m=null)}function xn(t){return t.a?t.a.readyState:0}function On(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ge(t,e,n))}function Pn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Rn(t){this.pa=0,this.g=[],this.c=new Xt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Pn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Pn("baseRetryDelayMs",5e3,t),this.Ra=Pn("retryDelaySeedMs",1e4,t),this.Ma=Pn("forwardChannelMaxRetries",2,t),this.ma=Pn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new an(t&&t.concurrentRequestLimit),this.ka=new yn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Dn(t){if(Ln(t),3==t.v){var e=t.R++,n=je(t.B);Ge(n,"SID",t.J),Ge(n,"RID",e),Ge(n,"TYPE","terminate"),Vn(t,n),(e=new me(t,t.c,e,void 0)).H=2,e.i=ze(je(n)),n=!1,l.navigator&&l.navigator.sendBeacon&&(n=l.navigator.sendBeacon(e.i.toString(),"")),!n&&l.Image&&((new Image).src=e.i,n=!0),n||(e.a=Zn(e.g,null),e.a.ba(e.i)),e.u=_(),Ce(e)}Yn(t)}function Mn(t){t.a&&(zn(t),t.a.cancel(),t.a=null)}function Ln(t){Mn(t),t.j&&(l.clearTimeout(t.j),t.j=null),Wn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&l.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.g.push(new sn(t.Oa++,e)),3==t.v&&jn(t)}function jn(t){cn(t.b)||t.h||(t.h=!0,jt(t.Ba,t),t.u=0)}function Un(t,e){var n;n=e?e.f:t.R++;var r=je(t.B);Ge(r,"SID",t.J),Ge(r,"RID",n),Ge(r,"AID",t.P),Vn(t,r),t.i&&t.l&&On(r,t.i,t.l),n=new me(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Bn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fn(t.b,n),Ee(n,r,e)}function Vn(t,e){t.f&&Pe({},(function(t,n){Ge(e,n,t)}))}function Bn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?b(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{gn(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function qn(t){t.a||t.j||(t.T=1,jt(t.Aa,t),t.o=0)}function Gn(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ae(b(t.Aa,t),Jn(t,t.o)),t.o++,0))}function zn(t){null!=t.s&&(l.clearTimeout(t.s),t.s=null)}function Hn(t){t.a=new me(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=je(t.la);Ge(e,"RID","rpc"),Ge(e,"SID",t.J),Ge(e,"CI",t.H?"0":"1"),Ge(e,"AID",t.P),Vn(t,e),Ge(e,"TYPE","xmlhttp"),t.i&&t.l&&On(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ze(je(e)),n.j=null,n.I=!0,Se(n,t)}function Wn(t){null!=t.m&&(l.clearTimeout(t.m),t.m=null)}function Kn(t,e){var n=null;if(t.a==e){Wn(t),zn(t),t.a=null;var r=2}else{if(!ln(t.b,e))return;n=e.s,pn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=_()-e.u;var i=t.u;Nt(r=ee(),new se(r,n,e,i)),jn(t)}else qn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ae(b(t.Ba,t,e),Jn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Gn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Qn(t,5);break;case 4:Qn(t,10);break;case 3:Qn(t,6);break;default:Qn(t,2)}}function Jn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Qn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=b(t.Ya,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||Ue(n,"https"),ze(n)),function(t,e){var n=new Xt;if(l.Image){var r=new Image;r.onload=w(mn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(mn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(mn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(mn,n,r,"TestLoadImage: timeout",!1,e),l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Yn(t),Ln(t)}function Yn(t){t.v=0,t.I=-1,t.f&&(0==dn(t.b).length&&0==t.g.length||(t.b.c.length=0,k(t.g),t.g.length=0),t.f.qa())}function Xn(t,e,n){var r=function(t){return t instanceof Fe?je(t):new Fe(t,void 0)}(n);if(""!=r.c)e&&Ve(r,e+"."+r.c),Be(r,r.h);else{var i=l.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&Ue(i,t),e&&Ve(i,e),n&&Be(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,(function(t,e){Ge(r,e,t)})),e=t.A,n=t.na,e&&n&&Ge(r,e,n),Ge(r,"VER",t.ha),Vn(t,r),r}function Zn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Na)).F=t.C,e}function $n(){}function tr(){if(G&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function er(t,e){At.call(this),this.a=new Rn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ir(this)}function nr(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){ye.call(this),this.status=1}function ir(t){this.a=t}(u=wn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?le(this.H):le(pe),this.a.onreadystatechange=b(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Tn(this,t)}t=n||"";var i=new Re(this.headers);r&&Pe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=In,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=l.FormData&&t instanceof l.FormData,!(0<=I(Sn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Nn(this),0<this.o&&((this.D=function(t){return G&&tt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.xa,this)):this.m=zt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Tn(this,t)}},u.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Nt(this,"timeout"),this.abort(8))},u.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Nt(this,"complete"),Nt(this,"abort"),An(this))},u.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),An(this,!0)),wn.X.G.call(this)},u.za=function(){this.j||(this.A||this.l||this.g?kn(this):this.Ua())},u.Ua=function(){kn(this)},u.W=function(){try{return 2<xn(this)?this.a.status:-1}catch(t){return-1}},u.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},u.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},u.ua=function(){return this.h},u.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(u=Rn.prototype).ha=8,u.v=1,u.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new me(this,this.c,t,void 0),r=this.l;if(this.O&&(r?j(r=L(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Bn(this,n,e),Ge(i=je(this.B),"RID",t),Ge(i,"CVER",22),this.A&&Ge(i,"X-HTTP-Session-Id",this.A),Vn(this,i),this.i&&r&&On(i,this.i,r),fn(this.b,n),this.Ia&&Ge(i,"TYPE","init"),this.da?(Ge(i,"$req",e),Ge(i,"SID","null"),n.U=!0,Ee(n,i,null)):Ee(n,i,e),this.v=2}}else 3==this.v&&(t?Un(this,t):0==this.g.length||cn(this.b)||Un(this))},u.Aa=function(){if(this.j=null,Hn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ae(b(this.Ta,this),t)}},u.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,oe(10),Mn(this),Hn(this))},u.Sa=function(){null!=this.m&&(this.m=null,Mn(this),Gn(this),oe(19))},u.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(u=$n.prototype).ta=function(){},u.sa=function(){},u.ra=function(){},u.qa=function(){},u.Ja=function(){},tr.prototype.a=function(t,e){return new er(t,e)},E(er,At),er.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Xn(t,null,t.fa),jn(t)},er.prototype.close=function(){Dn(this.a)},er.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Fn(this.a,e)}else this.l?((e={}).__data__=Ot(t),Fn(this.a,e)):Fn(this.a,t)},er.prototype.G=function(){this.a.f=null,delete this.f,Dn(this.a),delete this.a,er.X.G.call(this)},E(nr,ve),E(rr,ye),E(ir,$n),ir.prototype.ta=function(){Nt(this.a,"a")},ir.prototype.sa=function(t){Nt(this.a,new nr(t))},ir.prototype.ra=function(t){Nt(this.a,new rr(t))},ir.prototype.qa=function(){Nt(this.a,"b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.h,er.prototype.open=er.prototype.g,er.prototype.close=er.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",fe.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",At.prototype.listen=At.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.W,wn.prototype.getResponseJson=wn.prototype.Pa,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var or=ue,sr=ce,ar=$t,ur=10,cr=11,hr=fe,lr=wn,fr=n(7480);function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var dr=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},vr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),yr=new r.Yd("@firebase/firestore");function gr(){return yr.logLevel}function mr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=r.in.DEBUG){var i=e.map(_r);yr.debug.apply(yr,(0,fr.pr)(["Firestore (8.2.9): "+t],i))}}function br(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=r.in.ERROR){var i=e.map(_r);yr.error.apply(yr,(0,fr.pr)(["Firestore (8.2.9): "+t],i))}}function wr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=r.in.WARN){var i=e.map(_r);yr.warn.apply(yr,(0,fr.pr)(["Firestore (8.2.9): "+t],i))}}function _r(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Er(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw br(e),new Error(e)}function Sr(t,e){t||Er()}function Ir(t,e){return t}function Tr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Tr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function kr(t,e){return t<e?-1:t>e?1:0}function Ar(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Nr(t){return t+"\0"}var xr=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return kr(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();xr.T=new xr("");var Or={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Pr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,fr.ZT)(e,t),e}(Error),Rr=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(xr.fromBase64String(e))}catch(e){throw new Pr(Or.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(xr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Dr=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Dr.UNAUTHENTICATED=new Dr(null),Dr.R=new Dr("google-credentials-uid"),Dr.P=new Dr("first-party-uid");var Mr=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Lr=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Dr.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Fr=function(){function t(t){var e=this;this.D=null,this.currentUser=Dr.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(mr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Sr("string"==typeof n.accessToken),new Mr(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Sr(null===t||"string"==typeof t),new Dr(t)},t}(),jr=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Dr.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ur=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new jr(this.F,this.O))},t.prototype.v=function(t){t(Dr.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Vr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Vr.q=-1;var Br=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Pr(Or.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Pr(Or.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Pr(Or.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pr(Or.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?kr(this.nanoseconds,t.nanoseconds):kr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),qr=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Br(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Gr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Er(),void 0===n?n=t.length-e:n>t.length-e&&Er(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Pr(Or.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(Gr),Hr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Hr.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Pr(Or.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Pr(Or.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Pr(Or.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Pr(Or.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Gr),Kr=function(){function t(t){this.path=t}return t._t=function(e){return new t(zr.ot(e))},t.ft=function(e){return new t(zr.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===zr.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return zr.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new zr(e.slice()))},t}();function Jr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xr=function(){function t(t){this.fields=t,t.sort(Wr.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Ar(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Zr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(Sr(!!t),"string"==typeof t){var e=0,n=Zr.exec(t);if(Sr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ti(t.seconds),nanos:ti(t.nanos)}}function ti(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ei(t){return"string"==typeof t?xr.fromBase64String(t):xr.fromUint8Array(t)}function ni(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ri(t){var e=t.mapValue.fields.__previous_value__;return ni(e)?ri(e):e}function ii(t){var e=$r(t.mapValue.fields.__local_write_time__.timestampValue);return new Br(e.seconds,e.nanos)}function oi(t){return null==t}function si(t){return 0===t&&1/t==-1/0}function ai(t){return"number"==typeof t&&Number.isInteger(t)&&!si(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ni(t)?4:10:Er()}function ci(t,e){var n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ii(t).isEqual(ii(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$r(t.timestampValue),r=$r(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ei(t.bytesValue).isEqual(ei(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ti(t.geoPointValue.latitude)===ti(e.geoPointValue.latitude)&&ti(t.geoPointValue.longitude)===ti(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ti(t.integerValue)===ti(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ti(t.doubleValue),r=ti(e.doubleValue);return n===r?si(n)===si(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ar(t.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Jr(n)!==Jr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ci(n[i],r[i])))return!1;return!0}(t,e);default:return Er()}}function hi(t,e){return void 0!==(t.values||[]).find((function(t){return ci(t,e)}))}function li(t,e){var n=ui(t),r=ui(e);if(n!==r)return kr(n,r);switch(n){case 0:return 0;case 1:return kr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ti(t.integerValue||t.doubleValue),r=ti(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return fi(t.timestampValue,e.timestampValue);case 4:return fi(ii(t),ii(e));case 5:return kr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ei(t),r=ei(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=kr(n[i],r[i]);if(0!==o)return o}return kr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=kr(ti(t.latitude),ti(e.latitude));return 0!==n?n:kr(ti(t.longitude),ti(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=li(n[i],r[i]);if(o)return o}return kr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=kr(r[s],o[s]);if(0!==a)return a;var u=li(n[r[s]],i[o[s]]);if(0!==u)return u}return kr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Er()}}function fi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return kr(t,e);var n=$r(t),r=$r(e),i=kr(n.seconds,r.seconds);return 0!==i?i:kr(n.nanos,r.nanos)}function pi(t){return di(t)}function di(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$r(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ei(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Kr.ft(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=di(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+di(t.fields[o])}return e+"}"}(t.mapValue):Er();var e,n}function vi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function yi(t){return!!t&&"integerValue"in t}function gi(t){return!!t&&"arrayValue"in t}function mi(t){return!!t&&"nullValue"in t}function bi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wi(t){return!!t&&"mapValue"in t}var _i=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!wi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return ci(this.proto,t.proto)},t}(),Ei=function(){function t(t){void 0===t&&(t=_i.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ui(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Wr.ct(),this.At);return null!=t?new _i(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=wi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Si(t){var e=[];return Qr(t.fields||{},(function(t,n){var r=new Wr([t]);if(wi(n)){var i=Si(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Xr(e)}var Ii=function(t,e){this.key=t,this.version=e},Ti=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return(0,fr.ZT)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ii),Ci=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return(0,fr.ZT)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ii),ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ii),Ai=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Ni(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ai(t,e,n,r,i,o,s)}function xi(t){var e=Ir(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+pi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),oi(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Gi(e.startAt)),e.endAt&&(n+="|ub:",n+=Gi(e.endAt)),e.vt=n}return e.vt}function Oi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Hi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ci(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ki(t.startAt,e.startAt)&&Ki(t.endAt,e.endAt)}function Pi(t){return Kr.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ri=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,fr.ZT)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Di(t,n,r):"array-contains"===n?new ji(t,r):"in"===n?new Ui(t,r):"not-in"===n?new Vi(t,r):"array-contains-any"===n?new Bi(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Mi(t,n):new Li(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(li(e,this.value)):null!==e&&ui(this.value)===ui(e)&&this.Dt(li(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Er()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Di=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Kr.ft(r.referenceValue),i}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=Kr.H(t.key,this.key);return this.Dt(e)},e}(Ri),Mi=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Fi(0,n),r}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ri),Li=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Fi(0,n),r}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ri);function Fi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Kr.ft(t.referenceValue)}))}var ji=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return gi(e)&&hi(e.arrayValue,this.value)},e}(Ri),Ui=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&hi(this.value.arrayValue,e)},e}(Ri),Vi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){if(hi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!hi(this.value.arrayValue,e)},e}(Ri),Bi=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,fr.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!gi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return hi(e.value.arrayValue,t)}))},e}(Ri),qi=function(t,e){this.position=t,this.before=e};function Gi(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return pi(t)})).join(",")}var zi=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Kr.H(Kr.ft(s.referenceValue),n.key):li(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ki(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ci(t.position[n],e.position[n]))return!1;return!0}var Ji=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function Qi(t,e,n,r,i,o,s,a){return new Ji(t,e,n,r,i,o,s,a)}function Yi(t){return new Ji(t)}function Xi(t){return!oi(t.limit)&&"F"===t.limitType}function Zi(t){return!oi(t.limit)&&"L"===t.limitType}function $i(t){return t.xt.length>0?t.xt[0].field:null}function to(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function eo(t){return null!==t.collectionGroup}function no(t){var e=Ir(t);if(null===e.Nt){e.Nt=[];var n=to(e),r=$i(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new zi(n)),e.Nt.push(new zi(Wr.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new zi(Wr.ht(),u))}}}return e.Nt}function ro(t){var e=Ir(t);if(!e.$t)if("F"===e.limitType)e.$t=Ni(e.path,e.collectionGroup,no(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=no(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new zi(o.field,s))}var a=e.endAt?new qi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new qi(e.startAt.position,!e.startAt.before):null;e.$t=Ni(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.$t}function io(t,e,n){return new Ji(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oo(t,e){return Oi(ro(t),ro(e))&&t.limitType===e.limitType}function so(t){return xi(ro(t))+"|lt:"+t.limitType}function ao(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+pi(e.value);var e})).join(", ")+"]"),oi(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Gi(t.startAt)),t.endAt&&(e+=", endAt: "+Gi(t.endAt)),"Target("+e+")"}(ro(t))+"; limitType="+t.limitType+")"}function uo(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Kr.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Wi(t.startAt,no(t),e)||t.endAt&&Wi(t.endAt,no(t),e))}(t,e)}function co(t){return function(e,n){for(var r=!1,i=0,o=no(t);i<o.length;i++){var s=o[i],a=ho(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function ho(t,e,n){var r=t.field.ut()?Kr.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?li(r,i):Er()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Er()}}var lo=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=qr.min()),void 0===o&&(o=qr.min()),void 0===s&&(s=xr.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function fo(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:si(e)?"-0":e}}function po(t){return{integerValue:""+t}}function vo(t,e){return ai(e)?po(e):fo(t,e)}var yo=function(){this.qt=void 0};function go(t,e,n){return t instanceof wo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof _o?Eo(t,e):t instanceof So?Io(t,e):function(t,e){var n=bo(t,e),r=Co(n)+Co(t.Ut);return yi(n)&&yi(t.Ut)?po(r):fo(t.Qt,r)}(t,e)}function mo(t,e,n){return t instanceof _o?Eo(t,e):t instanceof So?Io(t,e):n}function bo(t,e){return t instanceof To?yi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e}(yo),_o=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,fr.ZT)(e,t),e}(yo);function Eo(t,e){for(var n=ko(e),r=function(t){n.some((function(e){return ci(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var So=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,fr.ZT)(e,t),e}(yo);function Io(t,e){for(var n=ko(e),r=function(t){n=n.filter((function(e){return!ci(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var To=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return(0,fr.ZT)(e,t),e}(yo);function Co(t){return ti(t.integerValue||t.doubleValue)}function ko(t){return gi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ao=function(t,e){this.field=t,this.transform=e},No=function(t,e){this.version=t,this.transformResults=e},xo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Oo(t,e){return void 0!==t.updateTime?e instanceof Ti&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Ti}var Po=function(){};function Ro(t,e,n){return t instanceof jo?function(t,e,n){var r=t.value;if(n.transformResults){var i=Bo(t.fieldTransforms,e,n.transformResults);r=Go(t.fieldTransforms,r,i)}return new Ti(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Uo?function(t,e,n){if(!Oo(t.jt,e))return new ki(t.key,n.version);var r=Vo(t,e,n.transformResults?Bo(t.fieldTransforms,e,n.transformResults):[]);return new Ti(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Ci(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Do(t,e,n){return t instanceof jo?function(t,e,n){if(!Oo(t.jt,e))return e;var r=t.value,i=qo(t.fieldTransforms,n,e);r=Go(t.fieldTransforms,r,i);var o=Fo(e);return new Ti(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Uo?function(t,e,n){if(!Oo(t.jt,e))return e;var r=Fo(e),i=Vo(t,e,qo(t.fieldTransforms,n,e));return new Ti(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return Oo(t.jt,e)?new Ci(t.key,qr.min()):e}(t,e)}function Mo(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Ti?e.field(o.field):void 0,a=bo(o.transform,s||null);null!=a&&(n=null==n?(new Ei).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function Lo(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ar(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof _o&&e instanceof _o||t instanceof So&&e instanceof So?Ar(t.elements,e.elements,ci):t instanceof To&&e instanceof To?ci(t.Ut,e.Ut):t instanceof wo&&e instanceof wo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Fo(t){return t instanceof Ti?t.version:qr.min()}var jo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return(0,fr.ZT)(e,t),e}(Po),Uo=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return(0,fr.ZT)(e,t),e}(Po);function Vo(t,e,n){var r;return r=function(t,e){var n=new Ei(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof Ti?e.data():_i.empty()),Go(t.fieldTransforms,r,n)}function Bo(t,e,n){var r=[];Sr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Ti&&(a=e.field(o.field)),r.push(mo(s,a,n[i]))}return r}function qo(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Ti&&(u=n.field(s.field)),r.push(go(a,u,e))}return r}function Go(t,e,n){for(var r=new Ei(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var zo,Ho,Wo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return(0,fr.ZT)(e,t),e}(Po),Ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return(0,fr.ZT)(e,t),e}(Po),Jo=function(t){this.count=t};function Qo(t){switch(t){case Or.OK:return Er();case Or.CANCELLED:case Or.UNKNOWN:case Or.DEADLINE_EXCEEDED:case Or.RESOURCE_EXHAUSTED:case Or.INTERNAL:case Or.UNAVAILABLE:case Or.UNAUTHENTICATED:return!1;case Or.INVALID_ARGUMENT:case Or.NOT_FOUND:case Or.ALREADY_EXISTS:case Or.PERMISSION_DENIED:case Or.FAILED_PRECONDITION:case Or.ABORTED:case Or.OUT_OF_RANGE:case Or.UNIMPLEMENTED:case Or.DATA_LOSS:return!0;default:return Er()}}function Yo(t){if(void 0===t)return br("GRPC error has no .code"),Or.UNKNOWN;switch(t){case zo.OK:return Or.OK;case zo.CANCELLED:return Or.CANCELLED;case zo.UNKNOWN:return Or.UNKNOWN;case zo.DEADLINE_EXCEEDED:return Or.DEADLINE_EXCEEDED;case zo.RESOURCE_EXHAUSTED:return Or.RESOURCE_EXHAUSTED;case zo.INTERNAL:return Or.INTERNAL;case zo.UNAVAILABLE:return Or.UNAVAILABLE;case zo.UNAUTHENTICATED:return Or.UNAUTHENTICATED;case zo.INVALID_ARGUMENT:return Or.INVALID_ARGUMENT;case zo.NOT_FOUND:return Or.NOT_FOUND;case zo.ALREADY_EXISTS:return Or.ALREADY_EXISTS;case zo.PERMISSION_DENIED:return Or.PERMISSION_DENIED;case zo.FAILED_PRECONDITION:return Or.FAILED_PRECONDITION;case zo.ABORTED:return Or.ABORTED;case zo.OUT_OF_RANGE:return Or.OUT_OF_RANGE;case zo.UNIMPLEMENTED:return Or.UNIMPLEMENTED;case zo.DATA_LOSS:return Or.DATA_LOSS;default:return Er()}}(Ho=zo||(zo={}))[Ho.OK=0]="OK",Ho[Ho.CANCELLED=1]="CANCELLED",Ho[Ho.UNKNOWN=2]="UNKNOWN",Ho[Ho.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ho[Ho.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ho[Ho.NOT_FOUND=5]="NOT_FOUND",Ho[Ho.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ho[Ho.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ho[Ho.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ho[Ho.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ho[Ho.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ho[Ho.ABORTED=10]="ABORTED",Ho[Ho.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ho[Ho.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ho[Ho.INTERNAL=13]="INTERNAL",Ho[Ho.UNAVAILABLE=14]="UNAVAILABLE",Ho[Ho.DATA_LOSS=15]="DATA_LOSS";var Xo=function(){function t(t,e){this.H=t,this.root=e||$o.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,$o.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,$o.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Zo(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Zo(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Zo(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Zo(this.root,t,this.H,!0)},t}(),Zo=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),$o=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Er();if(this.right.le())throw Er();var t=this.left.Ie();if(t!==this.right.Ie())throw Er();return t+(this.le()?0:1)},t}();$o.EMPTY=null,$o.RED=!0,$o.Ht=!1,$o.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Er()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Er()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Er()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Er()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Er()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new $o(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var ts=function(){function t(t){this.H=t,this.data=new Xo(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new es(this.data.te())},t.prototype.ee=function(t){return new es(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),es=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),ns=new Xo(Kr.H);function rs(){return ns}function is(){return rs()}var os=new Xo(Kr.H);function ss(){return os}var as=new Xo(Kr.H);function us(){return as}var cs=new ts(Kr.H);function hs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=cs,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ls=new ts(kr);function fs(){return ls}var ps=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Kr.H(e.key,n.key)}:function(t,e){return Kr.H(t.key,e.key)},this.ge=ss(),this.Ve=new Xo(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),ds=function(){function t(){this.be=new Xo(Kr.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Er():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),vs=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ps.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&oo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ys=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,gs.Le(e,n)),new t(qr.min(),r,fs(),rs(),hs())},t}(),gs=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(xr.T,n,hs(),hs(),hs())},t}(),ms=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},bs=function(t,e){this.targetId=t,this.je=e},ws=function(t,e,n,r){void 0===n&&(n=xr.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},_s=function(){function t(){this.Ge=0,this.ze=Is(),this.He=xr.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=hs(),e=hs(),n=hs();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Er()}})),new gs(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Is()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),Es=function(){function t(t){this.un=t,this.hn=new Map,this.ln=rs(),this._n=Ss(),this.fn=new ts(kr)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Ti?this.wn(r,t.We):t.We instanceof Ci&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Er()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Pi(i))if(0===n){var o=new Kr(i.path);this.En(e,o,new Ci(o,qr.min()))}else Sr(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Pi(o.target)){var s=new Kr(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Ci(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=hs();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ys(t,n,this.fn,this.ln,r);return this.ln=rs(),this._n=Ss(),this.fn=new ts(kr),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new _s,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new ts(kr),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||mr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new _s),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function Ss(){return new Xo(Kr.H)}function Is(){return new Xo(Kr.H)}var Ts={asc:"ASCENDING",desc:"DESCENDING"},Cs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ks=function(t,e){this.t=t,this.Bt=e};function As(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ns(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function xs(t,e){return As(t,e.j())}function Os(t){return Sr(!!t),qr.K(function(t){var e=$r(t);return new Br(e.seconds,e.nanos)}(t))}function Ps(t,e){return function(t){return new zr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Rs(t){var e=zr.ot(t);return Sr(ra(e)),e}function Ds(t,e){return Ps(t.t,e.path)}function Ms(t,e){var n=Rs(e);if(n.get(1)!==t.t.projectId)throw new Pr(Or.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Pr(Or.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Kr(Us(n))}function Ls(t,e){return Ps(t.t,e)}function Fs(t){var e=Rs(t);return 4===e.length?zr.ct():Us(e)}function js(t){return new zr(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Us(t){return Sr(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Vs(t,e,n){return{name:Ds(t,e),fields:n.proto.mapValue.fields}}function Bs(t,e,n){var r=Ms(t,e.name),i=Os(e.updateTime),o=new _i({mapValue:{fields:e.fields}});return new Ti(r,i,o,{hasCommittedMutations:!!n})}function qs(t,e){var n;if(e instanceof jo)n={update:Vs(t,e.key,e.value)};else if(e instanceof Wo)n={delete:Ds(t,e.key)};else if(e instanceof Uo)n={update:Vs(t,e.key,e.data),updateMask:na(e.Gt)};else{if(!(e instanceof Ko))return Er();n={verify:Ds(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof wo)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof _o)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof So)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof To)return{fieldPath:e.field.rt(),increment:n.Ut};throw Er()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:xs(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Er()}(t,e.jt)),n}function Gs(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?xo.updateTime(Os(t.updateTime)):void 0!==t.exists?xo.exists(t.exists):xo.Kt()}(e.currentDocument):xo.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Sr("REQUEST_TIME"===e.setToServerValue),n=new wo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new _o(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new So(i)}else"increment"in e?n=new To(t,e.increment):Er();var o=Wr.lt(e.fieldPath);return new Ao(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ms(t,e.update.name),o=new _i({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Xr(e.map((function(t){return Wr.lt(t)})))}(e.updateMask);return new Uo(i,o,s,n,r)}return new jo(i,o,n,r)}if(e.delete){var a=Ms(t,e.delete);return new Wo(a,n)}if(e.verify){var u=Ms(t,e.verify);return new Ko(u,n)}return Er()}function zs(t,e){return{documents:[Ls(t,e.path)]}}function Hs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ls(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ls(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(bi(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NAN"}};if(mi(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(bi(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NAN"}};if(mi(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(t.field),op:Xs(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Zs(t.field),direction:Ys(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||oi(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Js(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Js(e.endAt)),n}function Ws(t){var e=Fs(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Sr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ks(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new zi($s(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return oi(e="object"==pr(t)?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Qs(n.startAt));var h=null;return n.endAt&&(h=Qs(n.endAt)),Qi(e,i,a,s,u,"F",c,h)}function Ks(t){return t?void 0!==t.unaryFilter?[ea(t)]:void 0!==t.fieldFilter?[ta(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ks(t)})).reduce((function(t,e){return t.concat(e)})):Er():[]}function Js(t){return{before:t.before,values:t.position}}function Qs(t){var e=!!t.before,n=t.values||[];return new qi(n,e)}function Ys(t){return Ts[t]}function Xs(t){return Cs[t]}function Zs(t){return{fieldPath:t.rt()}}function $s(t){return Wr.lt(t.fieldPath)}function ta(t){return Ri.create($s(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Er()}}(t.fieldFilter.op),t.fieldFilter.value)}function ea(t){switch(t.unaryFilter.op){case"IS_NAN":var e=$s(t.unaryFilter.field);return Ri.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=$s(t.unaryFilter.field);return Ri.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$s(t.unaryFilter.field);return Ri.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$s(t.unaryFilter.field);return Ri.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Er()}}function na(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function ra(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var ia=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},oa=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Er(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),sa=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new ia,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new ca(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=da(e.target.error);n.Bn.reject(new ca(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ca(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(mr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new la(e)},t}(),aa=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn((0,i.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return mr("SimpleDb","Removing database:",t),fa(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=(0,i.z$)(),n=t.Qn(e),r=0<n&&n<10,o=t.jn(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.Wn=function(){return"undefined"!=typeof process&&"YES"===(null==="MISSING_ENV_VAR"?void 0:"MISSING_ENV_VAR".Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(mr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ca(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Pr(Or.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ca(t,n))},i.onupgradeneeded=function(t){mr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){mr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,s,a,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return(0,fr.Jh)(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=l.sent(),e=sa.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),oa.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,mr("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==pr(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ua=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return fa(this.Zn.delete())},t}(),ca=function(t){function e(e,n){var r=this;return(r=t.call(this,Or.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,fr.ZT)(e,t),e}(Pr);function ha(t){return"IndexedDbTransactionError"===t.name}var la=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(mr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(mr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),fa(n)},t.prototype.add=function(t){return mr("SimpleDb","ADD",this.store.name,t,t),fa(this.store.add(t))},t.prototype.get=function(t){var e=this;return fa(this.store.get(t)).next((function(n){return void 0===n&&(n=null),mr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return mr("SimpleDb","DELETE",this.store.name,t),fa(this.store.delete(t))},t.prototype.count=function(){return mr("SimpleDb","COUNT",this.store.name),fa(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){mr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new oa((function(n,r){e.onerror=function(t){var e=da(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new oa((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ua(i),s=e(i.primaryKey,i.value,o);if(s instanceof oa){var a=s.catch((function(t){return o.done(),oa.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return oa.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function fa(t){return new oa((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=da(t.target.error);n(e)}}))}var pa=!1;function da(t){var e=aa.Qn((0,i.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Pr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pa||(pa=!0,setTimeout((function(){throw r}),0)),r}}return t}var va=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new ia,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Pr(Or.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function ya(t,e){if(br("AsyncQueue",e+": "+t),ha(t))return new Pr(Or.UNAVAILABLE,e+": "+t);throw t}var ga="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ma=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();function ba(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=_a(e)),e=wa(t.get(n),e);return _a(e)}function wa(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function _a(t){return t+""}function Ea(t){var e=t.length;if(Sr(e>=2),2===e)return Sr(""===t.charAt(0)&&""===t.charAt(1)),zr.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Er(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Er()}o=s+2}return new zr(r)}var Sa=function(t,e){this.seconds=t,this.nanoseconds=e},Ia=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ia.store="owner",Ia.key="owner";var Ta=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ta.store="mutationQueues",Ta.keyPath="userId";var Ca=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ca.store="mutations",Ca.keyPath="batchId",Ca.userMutationsIndex="userMutationsIndex",Ca.userMutationsKeyPath=["userId","batchId"];var ka=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ba(e)]},t.key=function(t,e,n){return[t,ba(e),n]},t}();ka.store="documentMutations",ka.PLACEHOLDER=new ka;var Aa=function(t,e){this.path=t,this.readTime=e},Na=function(t,e){this.path=t,this.version=e},xa=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};xa.store="remoteDocuments",xa.readTimeIndex="readTimeIndex",xa.readTimeIndexPath="readTime",xa.collectionReadTimeIndex="collectionReadTimeIndex",xa.collectionReadTimeIndexPath=["parentPath","readTime"];var Oa=function(t){this.byteSize=t};Oa.store="remoteDocumentGlobal",Oa.key="remoteDocumentGlobalKey";var Pa=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Pa.store="targets",Pa.keyPath="targetId",Pa.queryTargetsIndexName="queryTargetsIndex",Pa.queryTargetsKeyPath=["canonicalId","targetId"];var Ra=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ra.store="targetDocuments",Ra.keyPath=["targetId","path"],Ra.documentTargetsIndex="documentTargetsIndex",Ra.documentTargetsKeyPath=["path","targetId"];var Da=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Da.key="targetGlobalKey",Da.store="targetGlobal";var Ma=function(t,e){this.collectionId=t,this.parent=e};Ma.store="collectionParents",Ma.keyPath=["collectionId","parent"];var La=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};La.store="clientMetadata",La.keyPath="clientId";var Fa=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Fa.store="bundles",Fa.keyPath="bundleId";var ja=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ja.store="namedQueries",ja.keyPath="name";var Ua=(0,fr.pr)((0,fr.pr)((0,fr.pr)((0,fr.pr)([Ta.store,Ca.store,ka.store,xa.store,Pa.store,Ia.store,Da.store,Ra.store],[La.store]),[Oa.store]),[Ma.store]),[Fa.store,ja.store]),Va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return(0,fr.ZT)(e,t),e}(ma);function Ba(t,e){var n=Ir(t);return aa.zn(n.ps,e)}var qa=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ro(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Do(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Do(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),hs())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ar(this.mutations,t.mutations,(function(t,e){return Lo(t,e)}))&&Ar(this.baseMutations,t.baseMutations,(function(t,e){return Lo(t,e)}))},t}(),Ga=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Sr(e.mutations.length===r.length);for(var i=us(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),za=function(t){this.Fs=t};function Ha(t,e){if(e.document)return Bs(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Kr.Et(e.noDocument.path),r=Ya(e.noDocument.readTime);return new Ci(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Kr.Et(e.unknownDocument.path);return r=Ya(e.unknownDocument.version),new ki(i,r)}return Er()}function Wa(t,e,n){var r=Ka(n),i=e.key.path.X().it();if(e instanceof Ti){var o=function(t,e){return{name:Ds(t,e.key),fields:e.bt().mapValue.fields,updateTime:As(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new xa(null,null,o,s,r,i)}if(e instanceof Ci){var a=e.key.path.it(),u=Qa(e.version);return s=e.hasCommittedMutations,new xa(null,new Aa(a,u),null,s,r,i)}if(e instanceof ki){var c=e.key.path.it(),h=Qa(e.version);return new xa(new Na(c,h),null,null,!0,r,i)}return Er()}function Ka(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Ja(t){var e=new Br(t[0],t[1]);return qr.K(e)}function Qa(t){var e=t.j();return new Sa(e.seconds,e.nanoseconds)}function Ya(t){var e=new Br(t.seconds,t.nanoseconds);return qr.K(e)}function Xa(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Gs(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Gs(t.Fs,e)})),a=Br.fromMillis(e.localWriteTimeMs);return new qa(e.batchId,a,n,s)}function Za(t){var e,n,r=Ya(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ya(t.lastLimboFreeSnapshotVersion):qr.min();return void 0!==t.query.documents?(Sr(1===(n=t.query).documents.length),e=ro(Yi(Fs(n.documents[0])))):e=function(t){return ro(Ws(t))}(t.query),new lo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,xr.fromBase64String(t.resumeToken))}function $a(t,e){var n,r=Qa(e.Ot),i=Qa(e.lastLimboFreeSnapshotVersion);n=Pi(e.target)?zs(t.Fs,e.target):Hs(t.Fs,e.target);var o=e.resumeToken.toBase64();return new Pa(e.targetId,xi(e.target),r,o,e.sequenceNumber,i,n)}function tu(t){var e=Ws({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?io(e,e.limit,"L"):e}var eu=function(){function t(){}return t.prototype.Os=function(t,e){return nu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ya(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return nu(t).put({bundleId:(n=e).id,createTime:Qa(Os(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return ru(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:tu(e.bundledQuery),readTime:Ya(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return ru(t).put(function(t){return{name:t.name,readTime:Qa(Os(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function nu(t){return Ba(t,Fa.store)}function ru(t){return Ba(t,ja.store)}var iu=function(){function t(){this.Bs=new ou}return t.prototype.qs=function(t,e){return this.Bs.add(e),oa.resolve()},t.prototype.Us=function(t,e){return oa.resolve(this.Bs.getEntries(e))},t}(),ou=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new ts(zr.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ts(zr.H)).it()},t}(),su=function(){function t(){this.Qs=new ou}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:ba(i)};return au(t).put(o)}return oa.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Nr(e),""],!1,!0);return au(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ea(o.parent))}return n}))},t}();function au(t){return Ba(t,Ma.store)}var uu={Ks:!1,Ws:0,js:0,Gs:0},cu=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function hu(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){if(t.code!==Or.FAILED_PRECONDITION||t.message!==ga)throw t;return mr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}cu.Xs=10,cu.Zs=1e3,cu.ti=new cu(41943040,cu.Xs,cu.Zs),cu.ei=new cu(-1,0,0);var lu=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.si(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Qr(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.et=function(){return Yr(this.ii)},t}(),fu=function(){function t(){this.ri=new lu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:qr.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?oa.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function pu(t,e,n){var r=t.store(Ca.store),i=t.store(ka.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Sr(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=ka.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return oa.Mn(o).next((function(){return c}))}function du(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Er();e=t.noDocument}return JSON.stringify(e).length}var vu=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Sr(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gu(t).hs({index:Ca.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=mu(t),s=gu(t);return s.add({}).next((function(a){Sr("number"==typeof a);for(var u=new qa(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return qs(t.Fs,e)})),i=n.mutations.map((function(e){return qs(t.Fs,e)}));return new Ca(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),h=[],l=new ts((function(t,e){return kr(t.rt(),e.rt())})),f=0,p=r;f<p.length;f++){var d=p[f],v=ka.key(i.userId,d.key.path,a);l=l.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,ka.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),oa.Mn(h).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return gu(t).get(e).next((function(t){return t?(Sr(t.userId===n.userId),Xa(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?oa.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return gu(t).hs({index:Ca.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Sr(e.batchId>=r),o=Xa(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return gu(t).hs({index:Ca.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gu(t).rs(Ca.userMutationsIndex,n).next((function(t){return t.map((function(t){return Xa(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=ka.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return mu(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Ea(u);if(a===n.userId&&e.path.isEqual(h))return gu(t).get(c).next((function(t){if(!t)throw Er();Sr(t.userId===n.userId),o.push(Xa(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new ts(kr),i=[];return e.forEach((function(e){var o=ka.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=mu(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Ea(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),oa.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=ka.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ts(kr);return mu(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Ea(u);s===n.userId&&r.nt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(gu(t).get(e).next((function(t){if(null===t)throw Er();Sr(t.userId===n.userId),r.push(Xa(n.Qt,t))})))})),oa.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return pu(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),oa.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return oa.resolve();var r=IDBKeyRange.lowerBound(ka.prefixForUser(e.userId)),i=[];return mu(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ea(t[1]);i.push(o)}else r.done()})).next((function(){Sr(0===i.length)}))}))},t.prototype.Fi=function(t,e){return yu(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return bu(t).get(this.userId).next((function(t){return t||new Ta(e.userId,-1,"")}))},t}();function yu(t,e,n){var r=ka.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return mu(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function gu(t){return Ba(t,Ca.store)}function mu(t){return Ba(t,ka.store)}function bu(t){return Ba(t,Ta.store)}var wu=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),_u=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new wu(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return qr.K(new Br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return Eu(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return Sr(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return Eu(t).hs((function(s,a){var u=Za(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return oa.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return Eu(t).hs((function(t,n){var r=Za(n);e(r)}))},t.prototype.qi=function(t){return Su(t).get(Da.key).next((function(t){return Sr(null!==t),t}))},t.prototype.Ui=function(t,e){return Su(t).put(Da.key,e)},t.prototype.Gi=function(t,e){return Eu(t).put($a(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=xi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Eu(t).hs({range:r,index:Pa.queryTargetsIndexName},(function(t,n,r){var o=Za(n);Oi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=Iu(t);return e.forEach((function(e){var s=ba(e.path);i.push(o.put(new Ra(n,s))),i.push(r.Ti.nr(t,n,e))})),oa.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=Iu(t);return oa.forEach(e,(function(e){var o=ba(e.path);return oa.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=Iu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Iu(t),i=hs();return r.hs({range:n,us:!0},(function(t,e,n){var r=Ea(t[1]),o=new Kr(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=ba(e.path),r=IDBKeyRange.bound([n],[Nr(n)],!1,!0),i=0;return Iu(t).hs({index:Ra.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return Eu(t).get(e).next((function(t){return t?Za(t):null}))},t}();function Eu(t){return Ba(t,Pa.store)}function Su(t){return Ba(t,Da.store)}function Iu(t){return Ba(t,Ra.store)}function Tu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=kr(n,i);return 0===s?kr(r,o):s}var Cu=function(){function t(t){this.cr=t,this.buffer=new ts(Tu),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Tu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ku=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;mr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return ha(e=n.sent())?(mr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,hu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Au=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return oa.resolve(Vr.q);var r=new Cu(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(mr("LruGarbageCollector","Garbage collection skipped; disabled"),oa.resolve(uu)):this.pr(t).next((function(r){return r<n.params.zs?(mr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),uu):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,i,o,s,a,u,c,h=this,l=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>h.params.Js?(mr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Js+" from "+e),i=h.params.Js):i=e,s=Date.now(),h.Pr(t,i)})).next((function(r){return n=r,a=Date.now(),h.Xi(t,n,e)})).next((function(e){return o=e,u=Date.now(),h.gr(t,n)})).next((function(t){return c=Date.now(),gr()<=r.in.DEBUG&&mr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),oa.resolve({Ks:!0,Ws:i,js:o,Gs:t})}))},t}(),Nu=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new Au(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return xu(t,n)},t.prototype.ir=function(t,e,n){return xu(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return xu(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return bu(t).ls((function(r){return yu(t,r,e).next((function(t){return t&&(n=!0),oa.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),Iu(t).delete([0,ba(s.path)])}))}));i.push(u)}})).next((function(){return oa.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return xu(t,e)},t.prototype.Dr=function(t,e){var n,r=Iu(t),i=Vr.q;return r.hs({index:Ra.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Vr.q&&e(new Kr(Ea(n)),i),i=a,n=s):i=Vr.q})).next((function(){i!==Vr.q&&e(new Kr(Ea(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function xu(t,e){return Iu(t).put(function(t,e){return new Ra(0,ba(t.path),e)}(e,t.bs))}var Ou=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Du(t).put(Mu(e),n)},t.prototype.li=function(t,e){var n=Du(t),r=Mu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return Du(t).get(Mu(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return Du(t).get(Mu(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:du(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=is();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=is(),i=new Xo(Kr.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,du(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return oa.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Du(t).hs({range:r},(function(t,e,r){for(var s=Kr.Et(t);o&&Kr.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=ss(),o=e.path.length+1,s={};if(n.isEqual(qr.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=Ka(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=xa.collectionReadTimeIndex}return Du(t).hs(s,(function(t,n,s){if(t.length===o){var a=Ha(r.Qt,n);e.path.nt(a.key.path)?a instanceof Ti&&uo(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new Pu(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ru(t).get(Oa.key).next((function(t){return Sr(!!t),t}))},t.prototype.kr=function(t,e){return Ru(t).put(Oa.key,e)},t.prototype.Mr=function(t){if(t){var e=Ha(this.Qt,t);return e instanceof Ci&&e.version.isEqual(qr.min())?null:e}return null},t}(),Pu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new lu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,fr.ZT)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new ts((function(t,e){return kr(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=Wa(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=du(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var h=Wa(e.jr.Qt,new Ci(o,qr.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),oa.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(fu);function Ru(t){return Ba(t,Oa.store)}function Du(t){return Ba(t,xa.store)}function Mu(t){return t.path.it()}var Lu=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Sr(n<r&&n>=0&&r<=11);var o=new sa("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ia.store)}(t),function(t){t.createObjectStore(Ta.store,{keyPath:Ta.keyPath}),t.createObjectStore(Ca.store,{keyPath:Ca.keyPath,autoIncrement:!0}).createIndex(Ca.userMutationsIndex,Ca.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ka.store)}(t),Fu(t),function(t){t.createObjectStore(xa.store)}(t));var s=oa.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ra.store),t.deleteObjectStore(Pa.store),t.deleteObjectStore(Da.store)}(t),Fu(t)),s=s.next((function(){return function(t){var e=t.store(Da.store),n=new Da(0,0,qr.min().j(),0);return e.put(Da.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Ca.store).rs().next((function(n){t.deleteObjectStore(Ca.store),t.createObjectStore(Ca.store,{keyPath:Ca.keyPath,autoIncrement:!0}).createIndex(Ca.userMutationsIndex,Ca.userMutationsKeyPath,{unique:!0});var r=e.store(Ca.store),i=n.map((function(t){return r.put(t)}));return oa.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(La.store,{keyPath:La.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Oa.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(xa.store);e.createIndex(xa.readTimeIndex,xa.readTimeIndexPath,{unique:!1}),e.createIndex(xa.collectionReadTimeIndex,xa.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Fa.store,{keyPath:Fa.keyPath})}(t),function(t){t.createObjectStore(ja.store,{keyPath:ja.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(xa.store).hs((function(t,n){e+=du(n)})).next((function(){var n=new Oa(e);return t.store(Oa.store).put(Oa.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(Ta.store),r=t.store(Ca.store);return n.rs().next((function(n){return oa.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Ca.userMutationsIndex,i).next((function(r){return oa.forEach(r,(function(r){Sr(r.userId===n.userId);var i=Xa(e.Qt,r);return pu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(Ra.store),n=t.store(xa.store);return t.store(Da.store).get(Da.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new zr(n),s=function(t){return[0,ba(t)]}(o);r.push(e.get(s).next((function(n){return n?oa.resolve():function(n){return e.put(new Ra(0,ba(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return oa.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Ma.store,{keyPath:Ma.keyPath});var n=e.store(Ma.store),r=new ou,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:ba(i)})}};return e.store(xa.store).hs({us:!0},(function(t,e){var n=new zr(t);return i(n.X())})).next((function(){return e.store(ka.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ea(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(Pa.store);return n.hs((function(t,r){var i=Za(r),o=$a(e.Qt,i);return n.put(o)}))},t}();function Fu(t){t.createObjectStore(Ra.store,{keyPath:Ra.keyPath}).createIndex(Ra.documentTargetsIndex,Ra.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Pa.store,{keyPath:Pa.keyPath}).createIndex(Pa.queryTargetsIndexName,Pa.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Da.store)}var ju="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Uu=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Pr(Or.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new Nu(this,i),this.ho=n+"main",this.Qt=new za(u),this.lo=new aa(this.ho,11,new Lu(this.Qt)),this._o=new _u(this.Ti,this.Qt),this.Ei=new su,this.fo=function(t,e){return new Ou(t,e)}(this.Qt,this.Ei),this.wo=new eu,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Pr(Or.FAILED_PRECONDITION,ju);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new Vr(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Bu(e).put(new La(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(ha(e))return mr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return mr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Vu(t).get(Ia.key).next((function(t){return oa.resolve(e.Do(t))}))},t.prototype.Co=function(t){return Bu(t).delete(this.clientId)},t.prototype.xo=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ba(t,La.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return oa.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?oa.resolve(!0):Vu(t).get(Ia.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Pr(Or.FAILED_PRECONDITION,ju);return!1}}return!(!e.networkEnabled||!e.inForeground)||Bu(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&mr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t=this;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Ia.store,La.store],(function(e){var n=new Va(e,Vr.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Bu(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return vu.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;mr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Ua,(function(o){return i=new Va(o,r.so?r.so.next():Vr.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw br("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new Pr(Or.FAILED_PRECONDITION,ga);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Vu(t).get(Ia.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Pr(Or.FAILED_PRECONDITION,ju)}))},t.prototype.So=function(t){var e=new Ia(this.clientId,this.allowTabSynchronization,Date.now());return Vu(t).put(Ia.key,e)},t.Kn=function(){return aa.Kn()},t.prototype.vo=function(t){var e=this,n=Vu(t);return n.get(Ia.key).next((function(t){return e.Do(t)?(mr("IndexedDbPersistence","Releasing primary lease."),n.delete(Ia.key)):oa.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(br("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return mr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return br("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){br("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Vu(t){return Ba(t,Ia.store)}function Bu(t){return Ba(t,La.store)}function qu(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Gu=function(t,e){this.progress=t,this.Go=e},zu=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=is();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=rs();return i.forEach((function(t,e){e||(e=new Ci(t,qr.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return Kr.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):eo(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Kr(e)).next((function(t){var e=ss();return t instanceof Ti&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=ss();return this.Ei.Us(t,i).next((function(s){return oa.forEach(s,(function(s){var a=function(t,e){return new Ji(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=Do(u,r.get(c),o.vs);r=h instanceof Ti?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){uo(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=hs(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Uo&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ti&&(c=c.zt(t,e))})),c}))},t}(),Hu=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=hs(),i=hs(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Wu=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,i){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(qr.min())?this.uc(t,e):this.ac.Xo(t,i).next((function(s){var a=o.hc(e,s);return(Xi(e)||Zi(e))&&o.lc(e.limitType,a,i,n)?o.uc(t,e):(gr()<=r.in.DEBUG&&mr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ao(e)),o.ac.Kr(t,e,n).next((function(t){return a.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new ts(co(t));return e.forEach((function(e,r){r instanceof Ti&&uo(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return gr()<=r.in.DEBUG&&mr("QueryEngine","Using full collection scan to execute query:",ao(e)),this.ac.Kr(t,e,qr.min())},t}(),Ku=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Xo(kr),this.dc=new lu((function(t){return xi(t)}),Oi),this.wc=qr.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new zu(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();function Ju(t,e,n,r){return new Ku(t,e,n,r)}function Qu(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return n=Ir(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new zu(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=hs(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Yu(t,e){var n=Ir(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=oa.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);Sr(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function Xu(t){var e=Ir(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function Zu(t,e){var n=Ir(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return Sr(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}}));var a=rs();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push($u(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(qr.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return oa.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function $u(t,e,n,r,i){var o=hs();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=rs();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Ci&&s.version.isEqual(qr.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):mr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function tc(t,e){var n=Ir(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function ec(t,e){var n=Ir(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,oa.resolve(r)):n._o.Bi(t).next((function(i){return r=new lo(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function nc(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:r=Ir(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ha(s=a.sent()))throw s;return mr("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function rc(t,e,n){var r=Ir(t),i=qr.min(),o=hs();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ir(t),i=r.dc.get(n);return void 0!==i?oa.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,ro(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:qr.min(),n?o:hs())})).next((function(t){return{documents:t,Rc:o}}))}))}function ic(t,e){var n=Ir(t),r=Ir(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function oc(t){var e=Ir(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ir(t),i=rs(),o=Ka(n),s=Du(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:xa.readTimeIndex,range:a},(function(t,e){var n=Ha(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:Ja(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function sc(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){return[2,(e=Ir(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Du(t),n=qr.min();return e.hs({index:xa.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ja(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}function ac(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,f,p;return(0,fr.Jh)(this,(function(d){switch(d.label){case 0:for(i=Ir(t),o=hs(),s=rs(),a=us(),u=0,c=n;u<c.length;u++)h=c[u],l=e.Pc(h.metadata.name),h.document&&(o=o.add(l)),s=s.zt(l,e.yc(h)),a=a.zt(l,e.gc(h.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,ec(i,function(t){return ro(Yi(zr.ot("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return $u(t,f,s,qr.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i._o.Yi(t,p.targetId).next((function(){return i._o.er(t,o,p.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}}))}))}function uc(t,e,n){return void 0===n&&(n=hs()),(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,ec(t,ro(tu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ir(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Os(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(xr.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))}var cc=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return oa.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Os(n.createTime)}),oa.resolve()},t.prototype.Ms=function(t,e){return oa.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:tu(t.bundledQuery),readTime:Os(t.readTime)}}(e)),oa.resolve()},t}(),hc=function(){function t(){this.vc=new ts(lc.Sc),this.Dc=new ts(lc.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new lc(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new lc(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new Kr(new zr([])),r=new lc(n,t),i=new lc(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Kr(new zr([])),n=new lc(e,t),r=new lc(e,t+1),i=hs();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new lc(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),lc=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Kr.H(t.key,e.key)||kr(t.Mc,e.Mc)},t.Cc=function(t,e){return kr(t.Mc,e.Mc)||Kr.H(t.key,e.key)},t}(),fc=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new ts(lc.Sc)}return t.prototype.Ai=function(t){return oa.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new qa(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new lc(u.key,i)),this.Ei.qs(t,u.key.path.X())}return oa.resolve(o)},t.prototype.Pi=function(t,e){return oa.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return oa.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return oa.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return oa.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new lc(e,0),i=new lc(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),oa.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new ts(kr);return e.forEach((function(t){var e=new lc(t,0),i=new lc(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),oa.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Kr.wt(i)||(i=i.child(""));var o=new lc(new Kr(i),0),s=new ts(kr);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),oa.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;Sr(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return oa.forEach(e.mutations,(function(i){var o=new lc(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new lc(e,0),r=this.Bc.Re(n);return oa.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,oa.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),pc=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Xo(Kr.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return oa.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=is();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),oa.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=ss(),i=new Kr(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,c=u.hi,h=u.readTime;if(!e.path.nt(a.path))break;h._(n)<=0||c instanceof Ti&&uo(e,c)&&(r=r.zt(c.key,c))}return oa.resolve(r)},t.prototype.jc=function(t,e){return oa.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new dc(this)},t.prototype.Or=function(t){return oa.resolve(this.size)},t}(),dc=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return(0,fr.ZT)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),oa.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(fu),vc=function(){function t(t){this.persistence=t,this.Gc=new lu((function(t){return xi(t)}),Oi),this.lastRemoteSnapshotVersion=qr.min(),this.highestTargetId=0,this.zc=0,this.Hc=new hc,this.targetCount=0,this.Jc=wu.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),oa.resolve()},t.prototype.Qi=function(t){return oa.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return oa.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),oa.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),oa.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new wu(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,oa.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),oa.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,oa.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),oa.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return oa.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return oa.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),oa.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),oa.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),oa.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return oa.resolve(n)},t.prototype.Fi=function(t,e){return oa.resolve(this.Hc.Fi(e))},t}(),yc=function(){function t(t,e){var n=this;this.Yc={},this.so=new Vr(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new vc(this),this.Ei=new iu,this.fo=function(t,e){return new pc(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new za(e),this.wo=new cc(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new fc(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;mr("MemoryPersistence","Starting transaction:",t);var i=new gc(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return oa.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return(0,fr.ZT)(e,t),e}(ma),mc=function(){function t(t){this.persistence=t,this.na=new hc,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Er()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),oa.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),oa.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),oa.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return oa.forEach(this.ra,(function(r){var i=Kr._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return oa.Ln([function(){return oa.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function bc(t,e){return"firestore_clients_"+t+"_"+e}function wc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function _c(t,e){return"firestore_targets_"+t+"_"+e}var Ec=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==pr(o)&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==pr(o.error));return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Pr(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(br("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Sc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==pr(i)&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==pr(i.error));return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Pr(i.error.code,i.error.message)),o?new t(e,i.state,r):(br("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ic=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==pr(r)&&r.activeTargetIds instanceof Array,o=fs(),s=0;i&&s<r.activeTargetIds.length;++s)i=ai(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(br("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Tc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==pr(n)&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(br("SharedClientState","Failed to parse online state: "+e),null)},t}(),Cc=function(){function t(){this.activeTargetIds=fs()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),kc=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Xo(kr),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=bc(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new Cc),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return(0,fr.Jh)(this,(function(f){switch(f.label){case 0:return[4,this._a.Uo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(bc(this.persistenceKey,r)))&&(o=Ic.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(_c(this.persistenceKey,t));if(n){var r=Sc.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(_c(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return mr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){mr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){mr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(mr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return(0,fr.Jh)(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Vr.q;if(null!=t)try{var n=JSON.parse(t);Sr("number"==typeof n),e=n}catch(t){br("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Vr.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new Ec(this.currentUser,t,e,n),i=wc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=wc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=_c(this.persistenceKey,t),i=new Sc(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Ic.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ec.ca(new Dr(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Sc.ca(r,e)},t.prototype.pa=function(t){return Tc.ca(t)},t.prototype.Ya=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(mr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=fs();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),Ac=function(){function t(){this.iu=new Cc,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Cc,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),Nc=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),xc=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){mr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){mr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Oc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Pc=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Rc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return(0,fr.ZT)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new lr;s.listenOnce(sr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case or.NO_ERROR:var e=s.getResponseJson();mr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case or.TIMEOUT:mr("Connection",'RPC "'+t+'" timed out'),o(new Pr(Or.DEADLINE_EXCEEDED,"Request time out"));break;case or.HTTP_ERROR:var n=s.getStatus();if(mr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Or).indexOf(e)>=0?e:Or.UNKNOWN}(r.status);o(new Pr(a,r.message))}else o(new Pr(Or.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Pr(Or.UNAVAILABLE,"Connection failed."));break;default:Er()}}finally{mr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tr,o=ee(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(s.initMessageHeaders,e),(0,i.uI)()||(0,i.b$)()||(0,i.d)()||(0,i.w1)()||(0,i.Mn)()||(0,i.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");mr("Connection","Creating WebChannel: "+a,s);var u=r.createWebChannel(a,s),c=!1,h=!1,l=new Pc({fu:function(t){h?mr("Connection","Not sending because WebChannel is closed:",t):(c||(mr("Connection","Opening WebChannel transport."),u.open(),c=!0),mr("Connection","WebChannel sending:",t),u.send(t))},du:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,hr.EventType.OPEN,(function(){h||mr("Connection","WebChannel transport opened.")})),f(u,hr.EventType.CLOSE,(function(){h||(h=!0,mr("Connection","WebChannel transport closed"),l.Ru())})),f(u,hr.EventType.ERROR,(function(t){h||(h=!0,wr("Connection","WebChannel transport errored:",t),l.Ru(new Pr(Or.UNAVAILABLE,"The operation could not be completed")))})),f(u,hr.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Sr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){mr("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=zo[t];if(void 0!==e)return Yo(e)}(o),a=i.message;void 0===s&&(s=Or.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.Ru(new Pr(s,a)),u.close()}else mr("Connection","WebChannel received:",n),l.Pu(n)}})),f(o,ar.STAT_EVENT,(function(t){t.stat===ur?mr("Connection","Detected buffering proxy"):t.stat===cr&&mr("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Au()}),0),l},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);mr("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return mr("RestConnection","Received: ",t),t}),(function(e){throw wr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=Oc[t];return this.gu+"/v1/"+e+":"+n},t}());function Dc(){return"undefined"!=typeof window?window:null}function Mc(){return"undefined"!=typeof document?document:null}function Lc(t){return new ks(t,!0)}var Fc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&mr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),jc=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Fc(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Or.RESOURCE_EXHAUSTED?(br(e.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Or.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new Pr(Or.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return(0,fr.mG)(t,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return mr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(mr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Uc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return(0,fr.ZT)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Er()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(Sr(void 0===e||"string"==typeof e),xr.fromBase64String(e||"")):(Sr(void 0===e||e instanceof Uint8Array),xr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Or.UNKNOWN:Yo(t.code);return new Pr(e,t.message||"")}(a);n=new ws(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ms(t,r.document.name),o=Os(r.document.updateTime);var a=new _i({mapValue:{fields:r.document.fields}}),u=(s=new Ti(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new ms(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ms(t,r.document),o=r.readTime?Os(r.readTime):qr.min(),a=new Ci(i,o),s=r.removedTargetIds||[],n=new ms([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ms(t,r.document),o=r.removedTargetIds||[],n=new ms([],o,i,null);else{if(!("filter"in e))return Er();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Jo(r),o=h.targetId,n=new bs(o,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return qr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?qr.min():e.readTime?Os(e.readTime):qr.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=js(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Pi(r)?{documents:zs(t,r)}:{query:Hs(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=Ns(t,e.resumeToken):e.Ot._(qr.min())>0&&(n.readTime=As(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Er()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=js(this.Qt),e.removeTarget=t,this.th(e)},e}(jc),Vc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Sr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(Sr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Os(t.updateTime):Os(e);n.isEqual(qr.min())&&(n=Os(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new No(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Os(t.commitTime);return this.listener.dh(n,e)}return Sr(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=js(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return qs(e.Qt,t)}))};this.th(n)},e}(jc),Bc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return(0,fr.ZT)(e,t),e.prototype.Ih=function(){if(this.Th)throw new Pr(Or.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===Or.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===Or.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),qc=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(br(e),this.Rh=!1):mr("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Gc=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return(0,fr.mG)(o,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return Zc(this)?(mr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return(e=Ir(t)).Nh.add(4),[4,Hc(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,zc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new qc(n,r)};function zc(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:if(!Zc(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Hc(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Wc(t,e){var n=Ir(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Xc(n)?Yc(n):ph(n).Hu()&&Jc(n,e))}function Kc(t,e){var n=Ir(t),r=ph(n);n.xh.delete(e),r.Hu()&&Qc(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Zc(n)&&n.Oh.set("Unknown"))}function Jc(t,e){t.kh.on(e.targetId),ph(t).uh(e)}function Qc(t,e){t.kh.on(e),ph(t).hh(e)}function Yc(t){t.kh=new Es({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),ph(t).start(),t.Oh.Ph()}function Xc(t){return Zc(t)&&!ph(t).zu()&&t.xh.size>0}function Zc(t){return 0===Ir(t).Nh.size}function $c(t){t.kh=void 0}function th(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t.xh.forEach((function(e,n){Jc(t,e)})),[2]}))}))}function eh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){return $c(t),Xc(t)?(t.Oh.Vh(e),Yc(t)):t.Oh.set("Unknown"),[2]}))}))}function nh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof ws&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Mh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),mr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,rh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ms?t.kh.dn(e):e instanceof bs?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(qr.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Xu(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(xr.T,n.Ot)),Qc(t,e);var r=new lo(n.target,e,1,n.sequenceNumber);Jc(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return mr("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,rh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function rh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r=this;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:if(!ha(e))throw e;return t.Nh.add(1),[4,Hc(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Xu(t.bh)}),t._s.po((function(){return(0,fr.mG)(r,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return mr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,zc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function ih(t,e){return e().catch((function(n){return rh(t,n,e)}))}function oh(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:e=Ir(t),n=dh(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Zc(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,tc(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=dh(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,rh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return sh(e)&&ah(e),[2]}}))}))}function sh(t){return Zc(t)&&!dh(t).zu()&&t.Ch.length>0}function ah(t){dh(t).start()}function uh(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return dh(t).Eh(),[2]}))}))}function ch(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,fr.Jh)(this,(function(o){for(e=dh(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function hh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Ga.from(r,e,n),[4,ih(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,oh(t)];case 2:return o.sent(),[2]}}))}))}function lh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e&&dh(t)._h?[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return Qo(r=e.code)&&r!==Or.ABORTED?(n=t.Ch.shift(),dh(t).Yu(),[4,ih(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,oh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return sh(t)&&ah(t),[2]}}))}))}function fh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return n=Ir(t),e?(n.Nh.delete(2),[4,zc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Hc(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ph(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=Ir(t);return r.Ih(),new Uc(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:th.bind(null,t),Tu:eh.bind(null,t),ah:nh.bind(null,t)}),t.$h.push((function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Xc(t)?Yc(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),$c(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function dh(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Ir(t);return r.Ih(),new Vc(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:uh.bind(null,t),Tu:lh.bind(null,t),wh:ch.bind(null,t),dh:hh.bind(null,t)}),t.$h.push((function(n){return(0,fr.mG)(e,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,oh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(mr("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh}var vh=function(){this.Kh=void 0,this.listeners=[]},yh=function(){this.queries=new lu((function(t){return so(t)}),oo),this.onlineState="Unknown",this.Wh=new Set};function gh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:if(n=Ir(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new vh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=ya(a,"Initialization of query '"+ao(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&_h(n),[2]}}))}))}function mh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s;return(0,fr.Jh)(this,(function(a){return n=Ir(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function bh(t,e){for(var n=Ir(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].zh(s)&&(r=!0);u.Kh=s}}r&&_h(n)}function wh(t,e,n){var r=Ir(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function _h(t){t.Wh.forEach((function(t){t.next()}))}var Eh=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new vs(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=vs.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Sh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),Ih=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return Ms(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Bs(this.Qt,t.document,!1):new Ci(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return Os(t)},t}(),Th=function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=Ch(t)}return t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new Ih(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||hs()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,ac(this.bh,new Ih(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,uc(this.bh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Gu(Object.assign({},this.progress),t))]}}))}))},t}();function Ch(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var kh=function(t){this.key=t},Ah=function(t){this.key=t},Nh=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=hs(),this.De=hs(),this.hl=co(t),this.ll=new ps(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new ds,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Xi(this.query)&&i.size===this.query.limit?i.last():null,c=Zi(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),l=e instanceof Ti?e:null;l&&(l=uo(n.query,l)?l:null);var f=!!h&&n.De.has(h.key),p=!!l&&(l.Vt||n.De.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.wl(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.hl(l,u)>0||c&&n.hl(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Xi(this.query)||Zi(this.query))for(;s.size>this.query.limit;){var h=Xi(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Er()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new vs(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new ds,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=hs(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new Ah(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new kh(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=hs();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return vs.Ne(this.query,this.ll,this.De,0===this.al)},t}(),xh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Oh=function(t){this.key=t,this.Pl=!1},Ph=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new lu((function(t){return so(t)}),oo),this.Sl=new Map,this.Dl=new Set,this.Cl=new Xo(Kr.H),this.xl=new Map,this.Nl=new hc,this.$l={},this.Fl=new Map,this.Ol=wu.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function Rh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return n=ul(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Fa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,ec(n.bh,ro(e))];case 2:return s=u.sent(),a=n.Vl.Fa(s.targetId),r=s.targetId,[4,Dh(n,e,r,"current"===a)];case 3:i=u.sent(),n.Ml&&Wc(n.yl,s),u.label=4;case 4:return[2,i]}}))}))}function Dh(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return(0,fr.Jh)(this,(function(h){switch(h.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,rc(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Kh(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,rc(t.bh,e,!0)];case 1:return i=h.sent(),o=new Nh(e,i.Rc),s=o.fl(i.documents),a=gs.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),Kh(t,n,u.Il),c=new xh(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function Mh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return n=Ir(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!oo(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,nc(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),Kc(n.yl,r.targetId),Hh(n,r.targetId)})).catch(hu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Hh(n,r.targetId),[4,nc(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Lh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:r=cl(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ir(t),i=Br.now(),o=e.reduce((function(t,e){return t.add(e.key)}),hs());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Mo(c,n.get(c.key));null!=h&&s.push(new Uo(c.key,h,Si(h.proto.mapValue),xo.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Xo(kr)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Yh(r,i.ri)];case 3:return a.sent(),[4,oh(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ya(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Fh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:n=Ir(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Zu(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(Sr(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Sr(r.Pl):t.Qe.size>0&&(Sr(r.Pl),r.Pl=!1))})),[4,Yh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,hu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function jh(t,e,n){var r=Ir(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ir(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&_h(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Uh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return(r=Ir(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Xo(Kr.H)).zt(o,new Ci(o,qr.min())),a=hs().add(o),u=new ys(qr.min(),new Map,new ts(kr),s,a),[4,Fh(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),Qh(r),[3,4];case 2:return[4,nc(r.bh,e,!1).then((function(){return Hh(r,e,n)})).catch(hu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Vh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:n=Ir(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Yu(n.bh,e)];case 2:return i=o.sent(),zh(n,r,null),Gh(n,r),n.Vl.Na(r,"acknowledged"),[4,Yh(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,hu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Bh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:r=Ir(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ir(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return Sr(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),zh(r,e,n),Gh(r,e),r.Vl.Na(e,"rejected",n),[4,Yh(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,hu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function qh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:Zc((n=Ir(t)).yl)||mr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ir(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=ya(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Gh(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function zh(t,e,n){var r=Ir(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function Hh(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||Wh(t,e)}))}function Wh(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Kc(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),Qh(t))}function Kh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof kh?(t.Nl.nr(o.key,e),Jh(t,o)):o instanceof Ah?(mr("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Wh(t,o.key)):Er()}}function Jh(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(mr("SyncEngine","New document in limbo: "+n),t.Dl.add(r),Qh(t))}function Qh(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Kr(zr.ot(e)),r=t.Ol.next();t.xl.set(r,new Oh(n)),t.Cl=t.Cl.zt(n,r),Wc(t.yl,new lo(ro(Yi(n.path)),r,2,Vr.q))}}function Yh(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return r=Ir(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Hu.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return(0,fr.Jh)(this,(function(l){switch(l.label){case 0:n=Ir(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return oa.forEach(e,(function(e){return oa.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return oa.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!ha(r=l.sent()))throw r;return mr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.fc.get(a),c=u.Ot,h=u.Lt(c),n.fc=n.fc.zt(a,h));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Xh(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return(n=Ir(t)).currentUser.isEqual(e)?[3,3]:(mr("SyncEngine","User change. New user:",e.A()),[4,Qu(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new Pr(Or.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,Yh(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Zh(t,e){var n=Ir(t),r=n.xl.get(e);if(r&&r.Pl)return hs().add(r.key);var i=hs(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.vl.get(u);i=i.Pe(c.view._l)}return i}function $h(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,rc((n=Ir(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Kh(n,e.targetId,i.Il),i)]}}))}))}function tl(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){return[2,oc((e=Ir(t)).bh).then((function(t){return Yh(e,t)}))]}))}))}function el(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ir(t),r=Ir(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):oa.resolve(null)}))}))}((i=Ir(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,oh(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(zh(i,e,r||null),Gh(i,e),function(t,e){Ir(Ir(t).zo).xi(e)}(i.bh,e)):Er(),s.label=4;case 4:return[4,Yh(i,o)];case 5:return s.sent(),[3,7];case 6:mr("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function nl(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return(0,fr.Jh)(this,(function(h){switch(h.label){case 0:return ul(n=Ir(t)),cl(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,rl(n,r.it())]);case 1:return i=h.sent(),n.kl=!0,[4,fh(n.yl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],Wc(n.yl,a);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(u=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?u.push(e):c=c.then((function(){return Hh(n,e),nc(n.bh,e,!0)})),Kc(n.yl,e)})),[4,c]);case 4:return h.sent(),[4,rl(n,u)];case 5:return h.sent(),function(t){var e=Ir(t);e.xl.forEach((function(t,n){Kc(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new Xo(Kr.H)}(n),n.kl=!1,[4,fh(n.yl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function rl(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return(0,fr.Jh)(this,(function(y){switch(y.label){case 0:n=Ir(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Sl.get(a))&&0!==c.length?[4,ec(n.bh,ro(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),h=0,l=c,y.label=3;case 3:return h<l.length?(f=l[h],p=n.vl.get(f),[4,$h(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,ic(n.bh,a)];case 8:return v=y.sent(),[4,ec(n.bh,v)];case 9:return u=y.sent(),[4,Dh(n,il(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function il(t){return Qi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ol(t){var e=Ir(t);return Ir(Ir(e.bh).persistence).Uo()}function sl(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return(i=Ir(t)).kl?(mr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,oc(i.bh)];case 3:return o=a.sent(),s=ys.Me(e,"current"===n),[4,Yh(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,nc(i.bh,e,!0)];case 6:return a.sent(),Hh(i,e,r),[3,8];case 7:Er(),a.label=8;case 8:return[2]}}))}))}function al(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return(0,fr.Jh)(this,(function(p){switch(p.label){case 0:if(!(r=ul(t)).kl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(mr("SyncEngine","Adding an already active target "+s),[3,5]):[4,ic(r.bh,s)]):[3,6];case 2:return a=p.sent(),[4,ec(r.bh,a)];case 3:return u=p.sent(),[4,Dh(r,il(a),u.targetId,!1)];case 4:p.sent(),Wc(r.yl,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,nc(r.bh,t,!1).then((function(){Kc(r.yl,t),Hh(r,t)})).catch(hu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function ul(t){var e=Ir(t);return e.yl.Dh.Lh=Fh.bind(null,e),e.yl.Dh.vn=Zh.bind(null,e),e.yl.Dh.Mh=Uh.bind(null,e),e.bl.ah=bh.bind(null,e.gl),e.bl.Bl=wh.bind(null,e.gl),e}function cl(t){var e=Ir(t);return e.yl.Dh.Bh=Vh.bind(null,e),e.yl.Dh.qh=Bh.bind(null,e),e}function hl(t,e,n){var r=Ir(t);(function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Ir(t),r=Os(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.wo.Os(t,e.id)})).then((function(t){return!!t&&t.createTime._(r)>=0}))}(t.bh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.ql(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ul(Ch(r)),i=new Th(r,t.bh,e.Qt),[4,e.Ql()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.rl(o)]:[3,10];case 7:return(s=c.sent())&&n.Ul(s),[4,e.Ql()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,Yh(t,a.Go,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Ir(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.wo.ks(t,e)}))}(t.bh,r)];case 13:return c.sent(),n.ql(a.progress),[3,15];case 14:return wr("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Kl(u),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.Vl.Wa()}))}var ll=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return this.Qt=Lc(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Ju(this.persistence,new Wu,t.Jl,this.Qt)},t.prototype.jl=function(t){return new yc(mc.ia,this.Qt)},t.prototype.Wl=function(t){return new Ac},t.prototype.terminate=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),fl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,fr.ZT)(e,t),e.prototype.initialize=function(e){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,sc(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,cl(this.Yl._a)];case 4:return n.sent(),[4,oh(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Ju(this.persistence,new Wu,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new ku(e,t._s)},e.prototype.jl=function(t){var e=qu(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?cu.Ys(this.cacheSizeBytes):cu.ti;return new Uu(this.synchronizeTabs,e,t.clientId,n,t._s,Dc(),Mc(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new Ac},e}(ll),pl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,fr.ZT)(e,t),e.prototype.initialize=function(e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof kc?(this.Vl._a={eu:el.bind(null,n),nu:sl.bind(null,n),su:al.bind(null,n),Uo:ol.bind(null,n),tu:tl.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return(0,fr.mG)(r,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return[4,nl(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=Dc();if(!kc.Kn(e))throw new Pr(Or.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=qu(t.yu.t,t.yu.persistenceKey);return new kc(e,t._s,n,t.clientId,t.Jl)},e}(fl),dl=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return jh(n._a,t,1)},this.yl.Dh.n_=Xh.bind(null,this._a),[4,fh(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new yh},t.prototype.Xl=function(t){var e,n=Lc(t.yu.t),r=(e=t.yu,new Rc(e));return function(t,e,n){return new Bc(t,e,n)}(t.credentials,r,n)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return jh(s._a,t,0)},o=xc.Kn()?new xc:new Nc,new Gc(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Ph(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=Ir(t),mr("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Hc(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}();function vl(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return(0,fr.mG)(this,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return[2]}))}))},releaseLock:function(){}}}var yl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),gl=function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new ia,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new Sh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),ml=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Pr(Or.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Wr(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),bl=function(t){this._methodName=t},wl=function(t){this.d_=t};function _l(t,e,n){if(!n)throw new Pr(Or.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function El(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pr(Or.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Sl(t,e,n,r){if(!0===e&&!0===r)throw new Pr(Or.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Il(t){if(!Kr.wt(t))throw new Pr(Or.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Tl(t){if(Kr.wt(t))throw new Pr(Or.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Cl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==pr(t)){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Er()}function kl(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pr(Or.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Cl(t);throw new Pr(Or.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Al(t,e){if(e<=0)throw new Pr(Or.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Nl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Pr(Or.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pr(Or.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Sl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),xl=new Map,Ol=function(){function t(t,e){this.w_="(lite)",this.E_=new Nl({}),this.T_=!1,t instanceof vr?(this.I_=t,this.m_=new Lr):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Pr(Or.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vr(t.options.projectId)}(t),this.m_=new Fr(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Pr(Or.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Pr(Or.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Nl(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Lr;switch(t.type){case"gapi":var e=t.client;return Sr(!("object"!=pr(e)||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ur(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Pr(Or.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=xl.get(this))&&(mr("ComponentProvider","Removing Datastore"),xl.delete(this),t.terminate()),Promise.resolve();var t},t}(),Pl=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Dl(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Rl=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Dl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Yi(r))||this).firestore=e,i.D_=r,i.type="collection",i}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new Pl(this.firestore,null,new Kr(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Rl);function Ml(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof wl&&(t=t.d_),_l("collection","path",e),t instanceof Ol)return Tl(n=zr.ot.apply(zr,(0,fr.pr)([e],r))),new Dl(t,null,n);if(!(t instanceof Pl||t instanceof Dl))throw new Pr(Or.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Tl(n=zr.ot.apply(zr,(0,fr.pr)([t.path],r)).child(zr.ot(e))),new Dl(t.firestore,null,n)}function Ll(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof wl&&(t=t.d_),1===arguments.length&&(e=Cr.u()),_l("doc","path",e),t instanceof Ol)return Il(n=zr.ot.apply(zr,(0,fr.pr)([e],r))),new Pl(t,null,new Kr(n));if(!(t instanceof Pl||t instanceof Dl))throw new Pr(Or.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Il(n=t.D_.child(zr.ot.apply(zr,(0,fr.pr)([e],r)))),new Pl(t.firestore,t instanceof Dl?t.v_:null,new Kr(n))}function Fl(t,e){return t instanceof wl&&(t=t.d_),e instanceof wl&&(e=e.d_),(t instanceof Pl||t instanceof Dl)&&(e instanceof Pl||e instanceof Dl)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function jl(t,e){return t instanceof wl&&(t=t.d_),e instanceof wl&&(e=e.d_),t instanceof Rl&&e instanceof Rl&&t.firestore===e.firestore&&oo(t.C_,e.C_)&&t.v_===e.v_}var Ul=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Pr(Or.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Pr(Or.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return kr(this.x_,t.x_)||kr(this.N_,t.N_)},t}(),Vl=/^__.*__$/,Bl=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Uo(t,this.data,this.Gt,e,this.fieldTransforms):new jo(t,this.data,e,this.fieldTransforms)},t}(),ql=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Uo(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function Gl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Er()}}var zl=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return lf(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Gl(this.k_)&&Vl.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Hl=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Lc(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new zl({k_:t,methodName:e,j_:n,path:Wr.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Wl(t){var e=t.p_(),n=Lc(t.I_);return new Hl(t.I_,!!e.ignoreUndefinedProperties,n)}function Kl(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);af("Data must be an object, but it was:",s,r);var a,u,c=of(r,s);if(o.merge)a=new Xr(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=uf(e,f[l],n);if(!s.contains(p))throw new Pr(Or.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ff(h,p)||h.push(p)}a=new Xr(h),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new Bl(new _i(c),a,u)}var Jl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(bl);function Ql(t,e,n){return new zl({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Yl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){return new Ao(t.path,new wo)},e.prototype.isEqual=function(t){return t instanceof e},e}(bl),Xl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){var e=Ql(this,t,!0),n=this.H_.map((function(t){return rf(t,e)})),r=new _o(n);return new Ao(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(bl),Zl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){var e=Ql(this,t,!0),n=this.H_.map((function(t){return rf(t,e)})),r=new So(n);return new Ao(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(bl),$l=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return(0,fr.ZT)(e,t),e.prototype.z_=function(t){var e=new To(t.Qt,vo(t.Qt,this.J_));return new Ao(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(bl);function tf(t,e,n,r){var i=t.G_(1,e,n);af("Data must be an object, but it was:",i,r);var o=[],s=new Ei;Qr(r,(function(t,r){var a=hf(e,t,n);r instanceof wl&&(r=r.d_);var u=i.U_(a);if(r instanceof Jl)o.push(a);else{var c=rf(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Xr(o);return new ql(s.Pt(),a,i.fieldTransforms)}function ef(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[uf(e,r,n)],u=[i];if(o.length%2!=0)throw new Pr(Or.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(uf(e,o[c])),u.push(o[c+1]);for(var h=[],l=new Ei,f=a.length-1;f>=0;--f)if(!ff(h,a[f])){var p=a[f],d=u[f];d instanceof wl&&(d=d.d_);var v=s.U_(p);if(d instanceof Jl)h.push(p);else{var y=rf(d,v);null!=y&&(h.push(p),l.set(p,y))}}var g=new Xr(h);return new ql(l.Pt(),g,s.fieldTransforms)}function nf(t,e,n,r){return void 0===r&&(r=!1),rf(n,t.G_(r?4:3,e))}function rf(t,e){if(t instanceof wl&&(t=t.d_),sf(t))return af("Unsupported field value:",e,t),of(t,e);if(t instanceof bl)return function(t,e){if(!Gl(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=rf(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof wl&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vo(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Br.fromDate(t);return{timestampValue:As(e.Qt,n)}}if(t instanceof Br)return n=new Br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:As(e.Qt,n)};if(t instanceof Ul)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rr)return{bytesValue:Ns(e.Qt,t.I)};if(t instanceof Pl){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ps(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+Cl(t))}(t,e)}function of(t,e){var n={};return Yr(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Qr(t,(function(t,r){var i=rf(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function sf(t){return!("object"!=pr(t)||null===t||t instanceof Array||t instanceof Date||t instanceof Br||t instanceof Ul||t instanceof Rr||t instanceof Pl||t instanceof bl)}function af(t,e,n){if(!sf(n)||!function(t){return"object"==pr(t)&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Cl(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function uf(t,e,n){if(e instanceof wl&&(e=e.d_),e instanceof ml)return e.f_;if("string"==typeof e)return hf(t,e);throw lf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var cf=new RegExp("[~\\*/\\[\\]]");function hf(t,e,n){if(e.search(cf)>=0)throw lf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ml.bind.apply(ml,(0,fr.pr)([void 0],e.split("."))))).f_}catch(r){throw lf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function lf(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Pr(Or.INVALID_ARGUMENT,(a+=". ")+t+u)}function ff(t,e){return t.some((function(t){return t.isEqual(e)}))}var pf=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Pr(Or.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return n=Ir(t),r=js(n.Qt)+"/documents",i={documents:e.map((function(t){return Ds(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Sr(!!e.found),e.found.name,e.found.updateTime;var n=Ms(t,e.found.name),r=Os(e.found.updateTime),i=new _i({mapValue:{fields:e.found.fields}});return new Ti(n,r,i,{})}(t,e):"missing"in e?function(t,e){Sr(!!e.missing),Sr(!!e.readTime);var n=Ms(t,e.missing),r=Os(e.readTime);return new Ci(n,r)}(t,e):Er()}(n.Qt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Sr(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Ci||t instanceof Ti?n.sf(t):Er()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Wo(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Kr._t(n);e.mutations.push(new Ko(r,e.jt(r)))})),[4,function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return n=Ir(t),r=js(n.Qt)+"/documents",i={writes:e.map((function(t){return qs(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Ti)e=t.version;else{if(!(t instanceof Ci))throw Er();e=qr.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Pr(Or.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?xo.updateTime(e):xo.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(qr.min()))throw new Pr(Or.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xo.updateTime(e)}return xo.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),df=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Fc(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return(0,fr.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,fr.Jh)(this,(function(r){return t=new pf(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!oi(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Qo(e)}return!1},t}(),vf=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Dr.UNAUTHENTICATED,this.clientId=Cr.u(),this._f=function(){},this.C=new ia,this.credentials.v((function(t){mr("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new Pr(Or.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new ia;return this._s.Tf((function(){return(0,fr.mG)(t,void 0,void 0,(function(){var t,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ya(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function yf(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i=this;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return t._s.Af(),mr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return(0,fr.mG)(i,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,Qu(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function gf(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,mf(t)];case 1:return n=i.sent(),mr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return(n=Ir(t))._s.Af(),mr("RemoteStore","RemoteStore received new credentials"),r=Zc(n),n.Nh.add(3),[4,Hc(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,zc(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function mf(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(mr("FirestoreClient","Using default OfflineComponentProvider"),[4,yf(t,new ll)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function bf(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(mr("FirestoreClient","Using default OnlineComponentProvider"),[4,gf(t,new dl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function wf(t){return mf(t).then((function(t){return t.persistence}))}function _f(t){return mf(t).then((function(t){return t.bh}))}function Ef(t){return bf(t).then((function(t){return t.yl}))}function Sf(t){return bf(t).then((function(t){return t._a}))}function If(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,bf(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=Rh.bind(null,e._a),n.Hh=Mh.bind(null,e._a),n)]}}))}))}function Tf(t,e,n){var r=this;void 0===n&&(n={});var i=new ia;return t._s.Ps((function(){return(0,fr.mG)(r,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new yl({next:function(o){e.Ps((function(){return mh(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Pr(Or.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Pr(Or.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Eh(Yi(n.path),o,{includeMetadataChanges:!0,nl:!0});return gh(t,s)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function Cf(t,e,n){var r=this;void 0===n&&(n={});var i=new ia;return t._s.Ps((function(){return(0,fr.mG)(r,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new yl({next:function(n){e.Ps((function(){return mh(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Pr(Or.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Eh(n,o,{includeMetadataChanges:!0,nl:!0});return gh(t,s)},[4,If(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var kf=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Fc(this,"async_queue_retry"),this.vf=function(){var e=Mc();e&&mr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=Mc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Mc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!ha(t=n.sent()))throw t;return mr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,br("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=va.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Er()},t.prototype.Af=function(){},t.prototype.Nf=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Af(t){return function(t,e){if("object"!=pr(t)||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Nf=function(){function t(){this.kf={},this.Mf=new ia,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},t}(),xf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new kf,r.w_="name"in e?e.name:"[DEFAULT]",r}return(0,fr.ZT)(e,t),e.prototype.b_=function(){return this.qf||Pf(this),this.qf.terminate()},e}(Ol);function Of(t){return t.qf||Pf(t),t.qf.df(),t.qf}function Pf(t){var e=t.p_(),n=function(t,e,n){return new dr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new vf(t.m_,t.Bf,n)}function Rf(t,e,n){var r=this,i=new ia;return t._s.enqueue((function(){return(0,fr.mG)(r,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,yf(t,n)];case 1:return o.sent(),[4,gf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Or.FAILED_PRECONDITION||t.code===Or.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Df(t){if(t.R_||t.P_)throw new Pr(Or.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Mf=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),ui(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ti(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(ei(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Er()}},t.prototype.Hf=function(t,e){var n=this,r={};return Qr(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new Ul(ti(t.latitude),ti(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=ri(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(ii(t));default:return null}},t.prototype.Qf=function(t){var e=$r(t);return new Br(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=zr.ot(t);Sr(ra(n));var r=new vr(n.get(1),n.get(3)),i=new Kr(n.Y(5));return r.isEqual(e)||br("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Lf=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Pl(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Ff(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(jf("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Lf);function jf(t,e){return"string"==typeof e?hf(t,e):e instanceof wl?e.d_.f_:e.f_}function Uf(t){if(Zi(t)&&0===t.xt.length)throw new Pr(Or.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vf=function(){};function Bf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var qf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return(0,fr.ZT)(e,t),e.prototype.td=function(t){var e=Wl(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Pr(Or.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Qf(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Jf(r,t,l))}a={arrayValue:{values:u}}}else a=Jf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Qf(s,o),a=nf(n,"where",s,"in"===o||"not-in"===o);var f=Ri.create(i,o,a);return function(t,e){if(e.Ct()){var n=to(t);if(null!==n&&!n.isEqual(e.field))throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$i(t);null!==r&&Yf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Pr(Or.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Pr(Or.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new Rl(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Ji(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Vf),Gf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return(0,fr.ZT)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zi(e,n);return function(t,e){if(null===$i(t)){var n=to(t);null!==n&&Yf(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new Rl(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Ji(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Vf),zf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return(0,fr.ZT)(e,t),e.prototype.td=function(t){return new Rl(t.firestore,t.v_,io(t.C_,this.od,this.ad))},e}(Vf),Hf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return(0,fr.ZT)(e,t),e.prototype.td=function(t){var e=Kf(t,this.type,this.ud,this.hd);return new Rl(t.firestore,t.v_,function(t,e){return new Ji(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Vf),Wf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return(0,fr.ZT)(e,t),e.prototype.td=function(t){var e=Kf(t,this.type,this.ud,this.hd);return new Rl(t.firestore,t.v_,function(t,e){return new Ji(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Vf);function Kf(t,e,n,r){if(n[0]instanceof wl&&(n[0]=n[0].d_),n[0]instanceof Lf)return function(t,e,n,r,i){if(!r)throw new Pr(Or.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=no(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(vi(e,r.key));else{var c=r.field(u.field);if(ni(c))throw new Pr(Or.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.rt();throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new qi(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Wl(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Pr(Or.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+pr(c));if(!eo(t)&&-1!==c.indexOf("/"))throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(zr.ot(c));if(!Kr.wt(h))throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Kr(h);a.push(vi(e,l))}else{var f=nf(n,r,c);a.push(f)}}return new qi(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Jf(t,e,n){if(n instanceof wl&&(n=n.d_),"string"==typeof n){if(""===n)throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!eo(e)&&-1!==n.indexOf("/"))throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(zr.ot(n));if(!Kr.wt(r))throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return vi(t,new Kr(r))}if(n instanceof Pl)return vi(t,n.S_);throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Cl(n)+".")}function Qf(t,e){if(!Array.isArray(t)||0===t.length)throw new Pr(Or.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Pr(Or.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Yf(t,e,n){if(!n.isEqual(e))throw new Pr(Or.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Xf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,fr.ZT)(e,t),e.prototype.Wf=function(t){return new Rr(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Pl(this.firestore,null,e)},e}(Mf),$f=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return(0,fr.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new ep(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(jf("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(Lf),ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(tp),np=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new $f(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new ep(n.Yf,n.Xf,r.key,r,new $f(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Pr(Or.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new ep(t.Yf,t.Xf,e.doc.key,e.doc,new $f(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new ep(t.Yf,t.Xf,e.doc.key,e.doc,new $f(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:rp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();function rp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Er()}}function ip(t,e){return t instanceof tp&&e instanceof tp?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof np&&e instanceof np&&t.Yf===e.Yf&&jl(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var op=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,fr.ZT)(e,t),e.prototype.Wf=function(t){return new Rr(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Pl(this.firestore,null,e)},e}(Mf);function sp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=kl(t,Pl);var o=kl(t.firestore,xf),s=Wl(o);return e instanceof wl&&(e=e.d_),up(o,[("string"==typeof e||e instanceof ml?ef(s,"updateDoc",t.S_,e,n,r):tf(s,"updateDoc",t.S_,e)).F_(t.S_,xo.exists(!0))])}function ap(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof wl&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=pr(i[a])||Af(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(Af(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Pl)c=kl(t.firestore,xf),h=Yi(t.S_.path),u={next:function(e){i[a]&&i[a](cp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=kl(t,Rl);c=kl(p.firestore,xf),h=p.C_;var d=new op(c);u={next:function(t){i[a]&&i[a](new np(c,d,p,t))},error:i[a+1],complete:i[a+2]},Uf(t.C_)}return function(t,e,n,r){var i=this,o=new yl(r),s=new Eh(e,o,n);return t._s.Ps((function(){return(0,fr.mG)(i,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=gh,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return(0,fr.mG)(i,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=mh,[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Of(c),h,l,u)}function up(t,e){return function(t,e){var n=this,r=new ia;return t._s.Ps((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return n=Lh,[4,Sf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Of(t),e)}function cp(t,e,n){var r=n.docs.get(e.S_),i=new op(t);return new tp(t,i,e.S_,r,new $f(n.hasPendingWrites,n.fromCache),e.v_)}var hp=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Wl(t)}return t.prototype.set=function(t,e,n){this.md();var r=lp(t,this.Yf),i=Xf(r.v_,e,n),o=Kl(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,xo.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=lp(t,this.Yf);return e instanceof wl&&(e=e.d_),o="string"==typeof e||e instanceof ml?ef(this.Id,"WriteBatch.update",s.S_,e,n,r):tf(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,xo.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=lp(t,this.Yf);return this.Ed=this.Ed.concat(new Wo(e.S_,xo.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Pr(Or.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function lp(t,e){if(t instanceof wl&&(t=t.d_),t.firestore!==e)throw new Pr(Or.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var fp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return(0,fr.ZT)(e,t),e.prototype.get=function(e){var n=this,r=lp(e,this.Yf),i=new op(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new tp(n.Yf,i,r.S_,t.Zf,new $f(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Wl(t)}return t.prototype.get=function(t){var e=this,n=lp(t,this.Yf),r=new Zf(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Er();var i=t[0];if(i instanceof Ci)return new Lf(e.Yf,r,n.S_,null,n.v_);if(i instanceof Ti)return new Lf(e.Yf,r,i.key,i,n.v_);throw Er()}))},t.prototype.set=function(t,e,n){var r=lp(t,this.Yf),i=Xf(r.v_,e,n),o=Kl(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=lp(t,this.Yf);return e instanceof wl&&(e=e.d_),o="string"==typeof e||e instanceof ml?ef(this.Id,"Transaction.update",s.S_,e,n,r):tf(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=lp(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function pp(){if("undefined"==typeof Uint8Array)throw new Pr(Or.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function dp(){if("undefined"==typeof atob)throw new Pr(Or.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.fromBase64String=function(t){return dp(),new e(Rr.fromBase64String(t))},e.fromUint8Array=function(t){return pp(),new e(Rr.fromUint8Array(t))},e.prototype.toBase64=function(){return dp(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return pp(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(wl),yp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Df(t=kl(t,xf));var n=Of(t),r=t.p_(),i=new dl;return Rf(n,i,new fl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Df(t=kl(t,xf));var e=Of(t),n=t.p_(),r=new dl;return Rf(e,r,new pl(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Pr(Or.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ia;return t.Bf.Tf((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return aa.Kn()?(e=t+"main",[4,aa.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(qu(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof vr||(i.Pd=e),i}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=kl(t,Ol)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&wr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[4,Ef(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=Ir(t);return e.Nh.delete(0),zc(e)}(n))]}}))}))}))}(Of(kl(this.d_,xf)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[4,Ef(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return(e=Ir(t)).Nh.add(0),[4,Hc(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Of(kl(this.d_,xf)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Sl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ia;return t._s.Ps((function(){return(0,fr.mG)(e,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return e=qh,[4,Sf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Of(kl(this.d_,xf)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new yl(e);return t._s.Ps((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ir(t).Wh.add(e),e.next()},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ir(t).Wh.delete(e)},[4,If(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Of(t=kl(t,xf)),Af(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Pr(Or.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Op(this,Ml(this.d_,t))}catch(t){throw Sp(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ep(this,Ll(this.d_,t))}catch(t){throw Sp(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Ap(this,function(t,e){if(t=kl(t,Ol),_l("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pr(Or.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Rl(t,null,function(t){return new Ji(zr.ct(),t)}(e))}(this.d_,t))}catch(t){throw Sp(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ia;return t._s.Ps((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t){return bf(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new df(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(Of(t),(function(n){return e(new fp(t,n))}))}(this.d_,(function(n){return t(new bp(e,n))}))},e.prototype.batch=function(){var t=this;return Of(this.d_),new wp(new hp(this.d_,(function(e){return up(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new Pr(Or.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Pr(Or.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(wl),mp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,fr.ZT)(e,t),e.prototype.Wf=function(t){return new vp(new Rr(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Ep.yd(e,this.firestore,null)},e}(Mf),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new mp(e),r}return(0,fr.ZT)(e,t),e.prototype.get=function(t){var e=this,n=Pp(t);return this.d_.get(n).then((function(t){return new Cp(e.Yf,new tp(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Pp(t);return n?(El("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Pp(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,(0,fr.pr)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Pp(t);return this.d_.delete(e),this},e}(wl),wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.set=function(t,e,n){var r=Pp(t);return n?(El("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Pp(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,(0,fr.pr)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Pp(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(wl),_p=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return(0,fr.ZT)(e,t),e.prototype.fromFirestore=function(t,e){var n=new ep(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new kp(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new mp(t),n),i.set(n,o)),o},e}(wl);_p.Vd=new WeakMap;var Ep=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new mp(e),r}return(0,fr.ZT)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Pr(Or.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new Pl(n.d_,r,new Kr(t)))},e.yd=function(t,n,r){return new e(n,new Pl(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Op(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Op(this.firestore,Ml(this.d_,t))}catch(t){throw Sp(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof wl&&(t=t.d_),t instanceof Pl&&Fl(this.d_,t)},e.prototype.set=function(t,e){e=El("DocumentReference.set",e);try{return function(t,e,n){t=kl(t,Pl);var r=kl(t.firestore,xf),i=Xf(t.v_,e,n);return up(r,[Kl(Wl(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,xo.Kt())])}(this.d_,t,e)}catch(t){throw Sp(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?sp(this.d_,t):sp.apply(void 0,(0,fr.pr)([this.d_,t,e],n))}catch(t){throw Sp(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return up(kl((t=this.d_).firestore,xf),[new Wo(t.S_,xo.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ip(e),i=Tp(e,(function(e){return new Cp(t.firestore,new tp(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return ap(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=kl(t,Pl);var e=kl(t.firestore,xf),n=Of(e),r=new op(e);return function(t,e){var n=this,r=new ia;return t._s.Ps((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ir(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Ti?n.resolve(i):i instanceof Ci?n.resolve(null):n.reject(new Pr(Or.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ya(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,_f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new tp(e,r,t.S_,n,new $f(n instanceof Ti&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=kl(t,Pl);var e=kl(t.firestore,xf);return Tf(Of(e),t.S_,{source:"server"}).then((function(n){return cp(e,t,n)}))}(this.d_):function(t){t=kl(t,Pl);var e=kl(t.firestore,xf);return Tf(Of(e),t.S_).then((function(n){return cp(e,t,n)}))}(this.d_)).then((function(t){return new Cp(e.firestore,new tp(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(_p.gd(this.firestore,t)))},e}(wl);function Sp(t,e,n){return t.message=t.message.replace(e,n),t}function Ip(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==pr(r)&&!Af(r))return r}return{}}function Tp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Af(t[0])?t[0]:Af(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Cp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ep(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return ip(this.d_,t.d_)},e}(wl),kp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(Cp),Ap=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new mp(e),r}return(0,fr.ZT)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Bf(this.d_,function(t,e,n){var r=e,i=jf("where",t);return new qf(i,r,n)}(t,n,r)))}catch(t){throw Sp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Bf(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=jf("orderBy",t);return new Gf(r,n)}(t,n)))}catch(t){throw Sp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Bf(this.d_,function(t){return Al("limit",t),new zf("limit",t,"F")}(t)))}catch(t){throw Sp(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Bf(this.d_,function(t){return Al("limitToLast",t),new zf("limitToLast",t,"L")}(t)))}catch(t){throw Sp(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Bf(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hf("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Sp(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Bf(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hf("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Sp(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Bf(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wf("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Sp(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Bf(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wf("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Sp(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return jl(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=kl(t,Rl);var e=kl(t.firestore,xf),n=Of(e),r=new op(e);return function(t,e){var n=this,r=new ia;return t._s.Ps((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,rc(t,e,!0)];case 1:return a=u.sent(),r=new Nh(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ya(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,_f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new np(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=kl(t,Rl);var e=kl(t.firestore,xf),n=Of(e),r=new op(e);return Cf(n,t.C_,{source:"server"}).then((function(n){return new np(e,r,t,n)}))}(this.d_):function(t){t=kl(t,Rl);var e=kl(t.firestore,xf),n=Of(e),r=new op(e);return Uf(t.C_),Cf(n,t.C_).then((function(n){return new np(e,r,t,n)}))}(this.d_)).then((function(t){return new xp(e.firestore,new np(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ip(e),i=Tp(e,(function(e){return new xp(t.firestore,new np(t.firestore.d_,t.Xf,t.d_,e._d))}));return ap(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(_p.gd(this.firestore,t)))},e}(wl),Np=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new kp(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(wl),xp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Ap(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new kp(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new Np(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new kp(n.Yf,r))}))},e.prototype.isEqual=function(t){return ip(this.d_,t.d_)},e}(wl),Op=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return(0,fr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Ep(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ep(this.firestore,void 0===t?Ll(this.d_):Ll(this.d_,t))}catch(t){throw Sp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=kl(t.firestore,xf),r=Ll(t),i=Xf(t.v_,e);return up(n,[Kl(Wl(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,xo.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new Ep(e.firestore,t)}))},e.prototype.isEqual=function(t){return Fl(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(_p.gd(this.firestore,t)))},e}(Ap);function Pp(t){return t instanceof wl&&(t=t.d_),kl(t,Pl)}var Rp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(ml.bind.apply(ml,(0,fr.pr)([void 0],e))))||this}return(0,fr.ZT)(e,t),e.documentId=function(){return new e(Wr.ht().rt())},e.prototype.isEqual=function(t){return t instanceof wl&&(t=t.d_),t instanceof ml&&this.d_.f_.isEqual(t.f_)},e}(wl),Dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,fr.ZT)(e,t),e.serverTimestamp=function(){var t=new Yl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Jl("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xl("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zl("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new $l("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(wl);var Mp,Lp,Fp=n(788),jp={Firestore:gp,GeoPoint:Ul,Timestamp:Br,Blob:vp,Transaction:bp,WriteBatch:wp,DocumentReference:Ep,DocumentSnapshot:Cp,Query:Ap,QueryDocumentSnapshot:kp,QuerySnapshot:xp,CollectionReference:Op,FieldPath:Rp,FieldValue:Dp,setLogLevel:function(t){var e;e=t,yr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};function Up(t){return(Up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}(function(t,e){t.INTERNAL.registerComponent(new Fp.wA("firestore",(function(t){return function(t,e){return new gp(t,new xf(t,e),new yp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},jp)))})(Mp=t.Z),Mp.registerVersion("@firebase/firestore","2.1.7"),(Lp=gp).prototype.loadBundle=function(t){return function(t,e){var n=Of(t=kl(t,xf)),r=new Nf;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new gl(t,e)}(function(t,e){if(t instanceof Uint8Array)return vl(t,e);if(t instanceof ArrayBuffer)return vl(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,Lc(e));t._s.Ps((function(){return(0,fr.mG)(i,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return e=hl,[4,Sf(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t.I_,e,r),r}(this.d_,t)},Lp.prototype.namedQuery=function(t){var e,n,r=this;return(e=this.d_,n=t,function(t,e){var n=this;return t._s.enqueue((function(){return(0,fr.mG)(n,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=Ir(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.wo.Ms(t,e)}))},[4,_f(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Of(e=kl(e,xf)),n).then((function(t){return t?new Rl(e,null,t.query):null}))).then((function(t){return t?new Ap(r,t):null}))};var Vp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bp=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return(0,fr.ZT)(e,t),e}(Error),qp=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function Gp(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var zp,Hp,Wp,Kp=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"===Up(t))return Gp(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"===Up(t)?Gp(t,(function(t){return e.decode(t)})):t},t}(),Jp=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Kp,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new qp(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f,p;return(0,fr.Jh)(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Bp("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(a),c=u.timer,h=u.promise,[4,Promise.race([Qp(c,this.postJSON(r,i,o)),h,Qp(c,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new Bp("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Vp[a])return new Bp("internal","internal");r=Vp[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Bp(r,i,o)}(l.status,l.json,this.serializer))throw f;if(!l.json)throw new Bp("internal","Response is not valid JSON object.");if(void 0===(p=l.json.data)&&(p=l.json.result),void 0===p)throw new Bp("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function Qp(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}zp=t.Z,Hp=fetch.bind(self),Wp={Functions:Jp},zp.INTERNAL.registerComponent(new Fp.wA("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Jp(n,r,i,e,Hp)}),"PUBLIC").setServiceProps(Wp).setMultipleInstances(!0)),t.Z.registerVersion("@firebase/functions","0.6.2");var Yp,Xp=n(3815),Zp="w:0.4.20",$p=((Yp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Yp["not-registered"]="Firebase Installation is not registered.",Yp["installation-not-found"]="Firebase Installation not found.",Yp["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Yp["app-offline"]="Could not process request. Application offline.",Yp["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Yp),td=new i.LL("installations","Installations",$p);function ed(t){return t instanceof i.ZR&&t.code.includes("request-failed")}function nd(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function rd(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function id(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,td.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function od(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function sd(t,e){var n=e.refreshToken,r=od(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function ad(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function ud(t,e){var n=e.fid;return(0,fr.mG)(this,void 0,void 0,(function(){var e,r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return e=nd(t),r=od(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Zp},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,ad((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return[2,{fid:(a=u.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:rd(a.authToken)}];case 3:return[4,id("Create Installation",s)];case 4:throw u.sent()}}))}))}function cd(t){return new Promise((function(e){setTimeout(e,t)}))}var hd=/^[cdef][\w-]{21}$/;function ld(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,fr.fl)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return hd.test(e)?e:""}catch(t){return""}}function fd(t){return t.appName+"!"+t.appId}var pd=new Map;function dd(t,e){var n=fd(t);vd(n,e),function(t,e){var n=gd();n&&n.postMessage({key:t,fid:e}),md()}(n,e)}function vd(t,e){var n,r,i=pd.get(t);if(i)try{for(var o=(0,fr.XA)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var yd=null;function gd(){return!yd&&"BroadcastChannel"in self&&((yd=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){vd(t.data.key,t.data.fid)}),yd}function md(){0===pd.size&&yd&&(yd.close(),yd=null)}var bd,wd="firebase-installations-store",_d=null;function Ed(){return _d||(_d=(0,Xp.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(wd)}}))),_d}function Sd(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return n=fd(t),[4,Ed()];case 1:return r=a.sent(),i=r.transaction(wd,"readwrite"),[4,(o=i.objectStore(wd)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||dd(t,e.fid),[2,e]}}))}))}function Id(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return e=fd(t),[4,Ed()];case 1:return n=i.sent(),[4,(r=n.transaction(wd,"readwrite")).objectStore(wd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Td(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return n=fd(t),[4,Ed()];case 1:return r=u.sent(),i=r.transaction(wd,"readwrite"),[4,(o=i.objectStore(wd)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||dd(t,a.fid),[2,a]}}))}))}function Cd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Td(t,(function(n){var r=function(t){return Nd(t||{fid:ld(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(td.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,ud(t,e)];case 1:return n=i.sent(),[2,Sd(t,n)];case 2:return ed(r=i.sent())&&409===r.customData.serverCode?[4,Id(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Sd(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:kd(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function kd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,Ad(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,cd(100)];case 3:return o.sent(),[4,Ad(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Cd(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Ad(t){return Td(t,(function(t){if(!t)throw td.create("installation-not-found");return Nd(t)}))}function Nd(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function xd(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,fr.mG)(this,void 0,void 0,(function(){var t,i,o,s,a,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return t=function(t,e){var n=e.fid;return nd(t)+"/"+n+"/authTokens:generate"}(n,e),i=sd(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:Zp}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,ad((function(){return fetch(t,a)}))];case 1:return(u=c.sent()).ok?[4,u.json()]:[3,3];case 2:return[2,rd(c.sent())];case 3:return[4,id("Generate Auth Token",u)];case 4:throw c.sent()}}))}))}function Od(t,e){return void 0===e&&(e=!1),(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return[4,Td(t.appConfig,(function(r){if(!Rd(r))throw td.create("not-registered");var i,o=r.authToken;if(!e&&(2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i)))return r;if(1===o.requestStatus)return n=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Pd(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,cd(100)];case 3:return i.sent(),[4,Pd(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Od(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw td.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,fr.pi)((0,fr.pi)({},t),{authToken:e})}(r);return n=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,xd(t,e)];case 1:return n=o.sent(),i=(0,fr.pi)((0,fr.pi)({},e),{authToken:n}),[4,Sd(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!ed(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Id(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,fr.pi)((0,fr.pi)({},e),{authToken:{requestStatus:0}}),[4,Sd(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,s),s}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Pd(t){return Td(t,(function(t){if(!Rd(t))throw td.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?(0,fr.pi)((0,fr.pi)({},t),{authToken:{requestStatus:0}}):t}))}function Rd(t){return void 0!==t&&2===t.registrationStatus}function Dd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,Cd(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Md(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return nd(t)+"/"+n}(t,e),r=sd(t,e),i={method:"DELETE",headers:r},[4,ad((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,id("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function Ld(t){return td.create("missing-app-config-values",{valueName:t})}function Fd(t){return(Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){t.INTERNAL.registerComponent(new Fp.wA("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Ld("App Configuration");if(!t.name)throw Ld("App Name");try{for(var r=(0,fr.XA)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Ld(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Cd(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Od(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,Dd(t.appConfig)];case 1:return n.sent(),[4,Od(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,Td(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw td.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw td.create("app-offline");case 3:return[4,Md(e,n)];case 4:return r.sent(),[4,Id(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){gd();var n=fd(t),r=pd.get(n);r||(r=new Set,pd.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=fd(t),r=pd.get(n);r&&(r.delete(e),0===r.size&&pd.delete(n),md())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.20")}(t.Z);var jd,Ud=((bd={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',bd["only-available-in-window"]="This method is available in a Window context.",bd["only-available-in-sw"]="This method is available in a service worker context.",bd["permission-default"]="The notification permission was not granted and dismissed instead.",bd["permission-blocked"]="The notification permission was not granted and blocked instead.",bd["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",bd["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",bd["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",bd["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",bd["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",bd["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",bd["token-update-no-token"]="FCM returned no token when updating the user to push.",bd["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",bd["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",bd["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",bd["invalid-vapid-key"]="The public VAPID key must be a string.",bd["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",bd),Vd=new i.LL("messaging","Messaging",Ud),Bd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function qd(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,(0,fr.fl)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gd(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(jd||(jd={}));var zd="fcm_token_details_db",Hd="fcm_token_object_Store";function Wd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(zd))return[2,null];r.label=2;case 2:return e=null,[4,(0,Xp.openDb)(zd,5,(function(r){return(0,fr.mG)(n,void 0,void 0,(function(){var n,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Hd)?[4,(n=r.transaction.objectStore(Hd)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:qd(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:qd(o.auth),p256dh:qd(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:qd(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,(0,Xp.deleteDb)(zd)];case 4:return r.sent(),[4,(0,Xp.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,(0,Xp.deleteDb)("undefined")];case 6:return r.sent(),[2,Kd(e)?e:null]}}))}))}function Kd(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var Jd="firebase-messaging-store",Qd=null;function Yd(){return Qd||(Qd=(0,Xp.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Jd)}}))),Qd}function Xd(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return e=tv(t),[4,Yd()];case 1:return[4,i.sent().transaction(Jd).objectStore(Jd).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Wd(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Zd(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Zd(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return n=tv(t),[4,Yd()];case 1:return r=o.sent(),[4,(i=r.transaction(Jd,"readwrite")).objectStore(Jd).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function $d(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return e=tv(t),[4,Yd()];case 1:return n=i.sent(),[4,(r=n.transaction(Jd,"readwrite")).objectStore(Jd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function tv(t){return t.appConfig.appId}function ev(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return[4,ov(t)];case 1:n=u.sent(),r=sv(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(iv(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),Vd.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,Vd.create("token-subscribe-failed",{errorInfo:a});if(!o.token)throw Vd.create("token-subscribe-no-token");return[2,o.token]}}))}))}function nv(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return[4,ov(t)];case 1:n=u.sent(),r=sv(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(iv(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),Vd.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,Vd.create("token-update-failed",{errorInfo:a});if(!o.token)throw Vd.create("token-update-no-token");return[2,o.token]}}))}))}function rv(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return[4,ov(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(iv(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,Vd.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),Vd.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function iv(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function ov(t){var e=t.appConfig,n=t.installations;return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function sv(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Bd&&(o.web.applicationPubKey=i),o}function av(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw Vd.create("permission-blocked");return[4,lv(e,n)];case 1:return r=a.sent(),[4,Xd(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:qd(r.getKey("auth")),p256dh:qd(r.getKey("p256dh"))},i?[3,3]:[2,hv(t,o)];case 3:if(u=i.subscriptionOptions,h=(c=o).vapidKey===u.vapidKey,l=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,h&&l&&f&&p)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,rv(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,hv(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,cv({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,h,l,f,p}))}))}function uv(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,Xd(t)];case 1:return(n=i.sent())?[4,rv(t,n.token)]:[3,4];case 2:return i.sent(),[4,$d(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function cv(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,nv(e,t)];case 1:return r=s.sent(),i=(0,fr.pi)((0,fr.pi)({},t),{token:r,createTime:Date.now()}),[4,Zd(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,uv(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function hv(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,ev(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Zd(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function lv(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gd(e)})]}}))}))}function fv(t){return"object"===Fd(t)&&!!t&&"google.c.a.c_id"in t}function pv(t){return new Promise((function(e){setTimeout(e,t)}))}var dv=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Vd.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Xd(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Bd,r.label=2;case 2:return[2,av(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return uv(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Vd.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Vd.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Vd.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Vd.create("only-available-in-window")},t.prototype.onMessage=function(){throw Vd.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Vd.create("only-available-in-window")},t.prototype.onPush=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,mv()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,gv(n,e)]:(r=!1,e.notification?[4,bv(vv(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,pv(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return(0,fr.mG)(this,void 0,void 0,(function(){var r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,uv(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Xd(this.firebaseDependencies)];case 3:return r=i.sent(),[4,uv(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,av(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Bd)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(fv(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,yv(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,pv(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=jd.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function vv(t){var e,n=(0,fr.pi)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function yv(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return[4,mv()];case 1:e=u.sent();try{for(n=(0,fr.XA)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function gv(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=jd.PUSH_RECEIVED;try{for(var i=(0,fr.XA)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function mv(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function bv(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var wv=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===jd.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),fv(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Vd.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,av(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Bd),[2]}))}))},t.prototype.updateSwReg=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Vd.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Vd.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,uv(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?Vd.create("permission-blocked"):Vd.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Vd.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Vd.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Vd.create("invalid-sw-registration");if(this.swRegistration)throw Vd.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Vd.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Vd.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case jd.NOTIFICATION_CLICKED:return"notification_open";case jd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function _v(t){return Vd.create("missing-app-config-values",{valueName:t})}var Ev={isSupported:Sv};function Sv(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Iv(t){return(Iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.Z.INTERNAL.registerComponent(new Fp.wA("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw _v("App Configuration Object");if(!t.name)throw _v("App Name");var r=t.options;try{for(var i=(0,fr.XA)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw _v(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Sv())throw Vd.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new dv(n):new wv(n)}),"PUBLIC").setServiceProps(Ev));var Tv="firebasestorage.googleapis.com",Cv=function(t){function e(n,r){var i=t.call(this,kv(n),"Firebase Storage: "+r+" ("+kv(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return(0,fr.ZT)(e,t),e.prototype._codeEquals=function(t){return kv(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(i.ZR);function kv(t){return"storage/"+t}function Av(){return new Cv("unknown","An unknown error occurred, please check the error payload for server response.")}function Nv(){return new Cv("canceled","User canceled the upload/download.")}function xv(){return new Cv("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Ov(t){return new Cv("invalid-argument",t)}function Pv(){return new Cv("app-deleted","The Firebase app was deleted.")}function Rv(t){return new Cv("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dv(t,e){return new Cv("invalid-format","String does not match format '"+t+"': "+e)}function Mv(t){throw new Cv("internal-error","Internal error: "+t)}var Lv={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Fv=function(t,e){this.data=t,this.contentType=e||null};function jv(t,e){switch(t){case Lv.RAW:return new Fv(Uv(e));case Lv.BASE64:case Lv.BASE64URL:return new Fv(Vv(t,e));case Lv.DATA_URL:return new Fv((n=new qv(e)).base64?Vv(Lv.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Dv(Lv.DATA_URL,"Malformed data URL.")}return Uv(e)}(n.rest),new qv(e).contentType)}var n;throw Av()}function Uv(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Vv(t,e){switch(t){case Lv.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Dv(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Lv.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Dv(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw Dv(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Bv,qv=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Dv(Lv.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},Gv={STATE_CHANGED:"state_changed"},zv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Hv(t){switch(t){case"running":case"pausing":case"canceling":return zv.RUNNING;case"paused":return zv.PAUSED;case"success":return zv.SUCCESS;case"canceled":return zv.CANCELED;case"error":default:return zv.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Bv||(Bv={}));var Wv=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Bv.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Bv.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Bv.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Mv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Mv("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Mv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Mv("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Kv=function(){function t(){}return t.prototype.createXhrIo=function(){return new Wv},t}();function Jv(t){return"string"==typeof t||t instanceof String}function Qv(t){return Yv()&&t instanceof Blob}function Yv(){return"undefined"!=typeof Blob}function Xv(t,e,n,r){if(r<e)throw Ov("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Ov("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Zv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function $v(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Zv();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Yv())return new Blob(t);throw new Cv("unsupported-environment","This browser doesn't seem to support creating Blobs")}var ty=function(){function t(t,e){var n=0,r="";Qv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Qv(this.data_)){var r=(i=this.data_,o=e,s=n,i.webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Yv()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t($v.apply(null,r))}var i=e.map((function(t){return Jv(t)?jv(Lv.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),ey=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(n){return new t(e,"")}if(""===n.path)return n;throw new Cv("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=Tv.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(e);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),n=new t(l,f),c.postModify(n);break}}if(null==n)throw function(t){return new Cv("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function ny(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"===Iv(t)&&!Array.isArray(t)}(e)?e:null}function ry(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function iy(t){return"https://"+Tv+"/v0"+t}function oy(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function sy(t,e){return e}var ay=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||sy},uy=null;function cy(){if(uy)return uy;var t=[];t.push(new ay("bucket")),t.push(new ay("generation")),t.push(new ay("metageneration")),t.push(new ay("name","fullPath",!0));var e=new ay("name");e.xform=function(t,e){return function(t){return!Jv(t)||t.length<2?t:ry(t)}(e)},t.push(e);var n=new ay("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new ay("timeCreated")),t.push(new ay("updated")),t.push(new ay("md5Hash",null,!0)),t.push(new ay("cacheControl",null,!0)),t.push(new ay("contentDisposition",null,!0)),t.push(new ay("contentEncoding",null,!0)),t.push(new ay("contentLanguage",null,!0)),t.push(new ay("contentType",null,!0)),t.push(new ay("metadata","customMetadata",!0)),uy=t}function hy(t,e,n){var r=ny(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new ey(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}function ly(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var fy=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function py(t){if(!t)throw Av()}function dy(t,e){return function(n,r){var i=hy(t,r,e);return py(null!==i),i}}function vy(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new Cv("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Cv("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Cv("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function yy(t){var e=vy(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Cv("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function gy(t,e,n){var r=iy(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new fy(r,"GET",dy(t,n),i);return o.errorHandler=yy(e),o}function my(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=iy(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new fy(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=ny(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new ey(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];a=t._makeStorageReference(new ey(e,h.name)),r.items.push(a)}return r}(t,e,r)}(t,e,r);return py(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=vy(e),u}function by(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var wy=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function _y(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){py(!1)}return py(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Ey=262144;var Sy=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Iy(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Ty=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=cy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=by(e,r,i),a={name:s.fullPath},u=iy(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=ly(s,n),l=t.maxUploadRetryTime,f=new fy(u,"POST",(function(t){var e;_y(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){py(!1)}return py(Jv(e)),e}),l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=vy(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new fy(n,"POST",(function(t){var e=_y(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){py(!1)}n||py(!1);var i=Number(n);return py(!isNaN(i)),new wy(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=vy(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Ey*this._chunkMultiplier,n=new wy(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new wy(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Cv("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(l,f);if(null===d)throw xv();var v=e.maxUploadRetryTime,y=new fy(n,"POST",(function(t,n){var i,s=_y(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?dy(e,o)(t,n):null,new wy(a,c,"final"===s,i)}),v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=a||null,y.errorHandler=vy(t),y}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Ey*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=gy(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=by(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ly(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=ty.getBlob(c,r,h);if(null===l)throw xv();var f={name:u.fullPath},p=iy(o),d=t.maxUploadRetryTime,v=new fy(p,"POST",dy(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=vy(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Nv(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Hv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Sy(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Hv(this._state)){case zv.SUCCESS:Iy(this._resolve.bind(null,this.snapshot))();break;case zv.CANCELED:case zv.ERROR:Iy(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Hv(this._state)){case zv.RUNNING:case zv.PAUSED:t.next&&Iy(t.next.bind(t,this.snapshot))();break;case zv.SUCCESS:t.complete&&Iy(t.complete.bind(t))();break;case zv.CANCELED:case zv.ERROR:t.error&&Iy(t.error.bind(t,this._error))();break;default:t.error&&Iy(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Cy=function(){function t(t,e){this._service=t,this._location=e instanceof ey?e:ey.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new ey(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return ry(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new ey(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Rv(t)},t}();function ky(t){var e={prefixes:[],items:[]};return Ay(t,e).then((function(){return e}))}function Ay(t,e,n){return(0,fr.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return[4,Ny(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Ay(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Ny(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Xv("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),r=e||{},i=my(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function xy(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=iy(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new fy(r,"GET",function(t,e){return function(n,r){var i=hy(t,r,e);return py(null!==i),function(t,e){var n=ny(e);if(null===n)return null;if(!Jv(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return iy("/b/"+i(n)+"/o/"+i(r))+oy({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=yy(e),o}(t.storage,t._location,cy()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Cv("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Oy(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ey(t._location.bucket,n);return new Cy(t.storage,r)}var Py=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Ry=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Py(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Py(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Py(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Py(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Dy=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new My(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new My(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),My=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Oy(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Ry(function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ty(t,new ty(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Lv.RAW),this._throwIfRoot("putString");var r=jv(e,t),i=(0,fr.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Ry(new Ty(this._delegate,new ty(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return ky(this._delegate).then((function(e){return new Dy(e,t.storage)}))},t.prototype.list=function(t){var e=this;return Ny(this._delegate,t).then((function(t){return new Dy(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=gy(t.storage,t._location,cy()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=iy(e.fullServerUrl()),o=ly(n,r),s=t.maxOperationRetryTime,a=new fy(i,"PATCH",dy(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=yy(e),a}(t.storage,t._location,e,cy()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return xy(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=iy(e.fullServerUrl()),r=t.maxOperationRetryTime,i=new fy(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=yy(e),i}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Rv(t)},t}(),Ly=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Fy=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!function(t){return void 0!==t}(a)?i():i(a)}catch(t){o(t)}else null!==s?((r=Av()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?Pv():Nv()):o(r=new Cv("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new jy(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function l(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new jy(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Bv.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new jy(s,n))}else{var a=n.getErrorCode()===Bv.ABORT;e(!1,new jy(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)h.call.apply(h,(0,fr.pr)([null,t],e));else{var r;u()||s?h.call.apply(h,(0,fr.pr)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),l(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(a=2),clearTimeout(o),l(0)):t||(a=1)))}return l(0),setTimeout((function(){s=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),jy=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function Uy(t){return/^[A-Za-z]+:\/\//.test(t)}function Vy(t,e){if(t instanceof qy){var n=t;if(null==n._bucket)throw new Cv("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Cy(n,n._bucket);return null!=e?Vy(r,e):r}if(void 0!==e){if(e.includes(".."))throw Ov('`path` param cannot contain ".."');return Oy(t,e)}return t}function By(t,e){if(e&&Uy(e)){if(t instanceof qy)return function(t,e){return new Cy(t,e)}(t,e);throw Ov("To use ref(service, url), the first argument must be a Storage instance.")}return Vy(t,e)}var qy=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ey.makeFromBucketSpec(r):null==(s=null==(o=this.app.options)?void 0:o.storageBucket)?null:ey.makeFromBucketSpec(s)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Xv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Xv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Cy(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new Ly(Pv());var r=function(t,e,n,r,i){var o=oy(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new Fy(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),Gy=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Uy(t))throw Ov("ref() expected a child path but got a URL, use refFromURL instead.");return new My(By(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Uy(t))throw Ov("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ey.makeFromUrl(t)}catch(t){throw Ov("refFromUrl() expected a valid full URL but got an invalid one.")}return new My(By(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function zy(e,n){var r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal");return new Gy(r,new qy(r,i,new Kv,n,t.Z.SDK_VERSION))}!function(t){var e={TaskState:zv,TaskEvent:Gv,StringFormat:Lv,Storage:qy,Reference:My};t.INTERNAL.registerComponent(new Fp.wA("storage",zy,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.3")}(t.Z);var Hy,Wy,Ky,Jy="0.4.6",Qy=Jy,Yy="FB-PERF-TRACE-MEASURE",Xy="_wt_",Zy="_fcp",$y="_fid",tg="@firebase/performance/config",eg="@firebase/performance/configexpire",ng="Performance",rg=((Hy={})["trace started"]="Trace {$traceName} was started before.",Hy["trace stopped"]="Trace {$traceName} is not running.",Hy["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Hy["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Hy["no window"]="Window is not available.",Hy["no app id"]="App id is not available.",Hy["no project id"]="Project id is not available.",Hy["no api key"]="Api key is not available.",Hy["invalid cc log"]="Attempted to queue invalid cc event",Hy["FB not default"]="Performance can only start when Firebase app instance is the default one.",Hy["RC response not ok"]="RC response is not ok",Hy["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Hy["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Hy["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Hy["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Hy),ig=new i.LL("performance",ng,rg),og=new r.Yd(ng);og.logLevel=r.in.INFO;var sg,ag=function(){function t(t){if(this.window=t,!t)throw ig.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!(0,i.hl)()||(og.info("IndexedDB is not supported by current browswer"),!1):(og.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Wy&&(Wy=new t(Ky)),Wy},t}();function ug(t,e){var n=t.length-e.length;if(n<0||n>1)throw ig.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var cg,hg,lg=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ug("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ug("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw ig.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw ig.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw ig.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===sg&&(sg=new t),sg},t}();function fg(){return cg}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(hg||(hg={}));var pg=["firebase_","google_","ga_"],dg=new RegExp("^[a-zA-Z]\\w*$");function vg(){var t=ag.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function yg(){switch(ag.getInstance().document.visibilityState){case"visible":return hg.VISIBLE;case"hidden":return hg.HIDDEN;default:return hg.UNKNOWN}}function gg(){var t=ag.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var mg="Could not fetch config, will use default configs";function bg(t){if(!t)return t;var e=lg.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=true,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=wg(e.tracesSamplingRate),e.logNetworkAfterSampling=wg(e.networkRequestsSamplingRate),t}function wg(t){return Math.random()<=t}var _g,Eg=1;function Sg(){return Eg=2,_g=_g||function(){var t=ag.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){t.addEventListener("readystatechange",(function n(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())}))}else e()}))}().then((function(){return(t=lg.getInstance().installationsService.getId()).then((function(t){cg=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=ag.getInstance().localStorage;if(t){var e=t.getItem(eg);if(e&&Number(e)>Date.now()){var n=t.getItem(tg);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(bg(e),Promise.resolve()):function(t){return(e=lg.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+lg.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+lg.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:lg.getInstance().getAppId(),app_version:Qy,sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw ig.create("RC response not ok")}))})).catch((function(){og.info(mg)}));var e}(t).then(bg).then((function(t){return function(t){var e=ag.getInstance().localStorage;t&&e&&(e.setItem(tg,JSON.stringify(t)),e.setItem(eg,String(Date.now()+60*lg.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return Ig()}),(function(){return Ig()}))}function Ig(){Eg=3}var Tg,Cg=1e4,kg=3,Ag=[],Ng=!1;function xg(t){setTimeout((function(){var t,e;if(0!==kg)return Ag.length?(e=(t=Ag.splice(0,1e3)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=lg.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||og.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=Cg;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Ag=(0,fr.pr)(e,Ag),og.info("Retry transport request later.")),kg=3,xg(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:lg.getInstance().logSource,log_event:e},t).catch((function(){Ag=(0,fr.pr)(t,Ag),kg--,og.info("Tries left: "+kg+"."),xg(Cg)}))):xg(Cg)}),t)}function Og(t){if(!t.eventTime||!t.message)throw ig.create("invalid cc log");Ag=(0,fr.pr)(Ag,[t])}function Pg(t,e){Tg||(Tg=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Og({message:t.apply(void 0,e),eventTime:Date.now()})}}(Mg)),Tg(t,e)}function Rg(t){var e=lg.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&ag.getInstance().requiredApisAvailable()&&(t.isAuto&&yg()!==hg.VISIBLE||(3===Eg?Dg(t):Sg().then((function(){return Dg(t)}),(function(){return Dg(t)}))))}function Dg(t){if(fg()){var e=lg.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Pg(t,1)}),0)}}function Mg(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:Lg(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Lg(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function Lg(){return{google_app_id:lg.getInstance().getAppId(),app_instance_id:fg(),web_app_info:{sdk_version:Qy,page_url:ag.getInstance().getUrl(),service_worker_status:vg(),visibility_state:yg(),effective_connection_type:gg()},application_process_state:0}}var Fg=["_fp",Zy,$y],jg=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=ag.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw ig.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw ig.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Rg(this)},t.prototype.record=function(t,e,n){if(t<=0)throw ig.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw ig.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=(0,fr.pi)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Rg(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith(Xy)&&Fg.indexOf(i)>-1)&&i.startsWith("_"))throw ig.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&og.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||pg.some((function(t){return n.startsWith(t)}))||!n.match(dg)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw ig.create("invalid attribute name",{attributeName:t});if(!i)throw ig.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return(0,fr.pi)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=ag.getInstance().getUrl();if(i){var o=new t(Xy+i,!0),s=Math.floor(1e3*ag.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(Zy,Math.floor(1e3*u.startTime)),r&&o.putMetric($y,Math.floor(1e3*r))}Rg(o)}},t.createUserTimingTrace=function(e){Rg(new t(e,!1,e))},t}();function Ug(t){var e=t;if(e&&void 0!==e.responseStart){var n=ag.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=lg.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Pg(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Vg(){fg()&&(setTimeout((function(){return function(){var t=ag.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){jg.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),jg.createOobTrace(e,n,t))}))}else jg.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=ag.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)Ug(n[e]);t.setupObserver("resource",Ug)}()}),0),setTimeout((function(){return function(){for(var t=ag.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)Bg(n[e]);t.setupObserver("measure",Bg)}()}),0))}function Bg(t){var e=t.name;e.substring(0,Yy.length)!==Yy&&jg.createUserTimingTrace(e)}var qg=function(){function t(t){this.app=t,ag.getInstance().requiredApisAvailable()&&(0,i.eu)().then((function(t){t&&(Ng||(xg(5500),Ng=!0),Sg().then(Vg,Vg))})).catch((function(t){og.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new jg(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return lg.getInstance().instrumentationEnabled},set:function(t){lg.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return lg.getInstance().dataCollectionEnabled},set:function(t){lg.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Fp.wA("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw ig.create("FB not default");if("undefined"==typeof window)throw ig.create("no window");return function(t){Ky=t}(window),lg.getInstance().firebaseAppInstance=t,lg.getInstance().installationsService=e,new qg(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance",Jy)}(t.Z);var Gg,zg,Hg="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Gg||(Gg={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(zg||(zg={}));var Wg,Kg=new r.Yd("@firebase/analytics");function Jg(t,e,n,r,i,o){return(0,fr.mG)(this,void 0,void 0,(function(){var s,a,u,c;return(0,fr.Jh)(this,(function(h){switch(h.label){case 0:s=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=h.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),Kg.error(c),[3,8];case 8:return t(Gg.CONFIG,i,o),[2]}}))}))}function Qg(t,e,n,r,i){return(0,fr.mG)(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f;return(0,fr.Jh)(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=p.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=s;c<h.length&&(l=h[c],"break"!==u(l));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(Gg.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),Kg.error(f),[3,5];case 5:return[2]}}))}))}var Yg=((Wg={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Wg["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Wg["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Wg["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Wg["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Wg["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Wg["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Wg["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Wg["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Wg),Xg=new i.LL("analytics","Analytics",Yg),Zg=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function $g(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function tm(t){var e;return(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:$g(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(s=c.sent()).status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Xg.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function em(t,e,n,r){var o=e.throttleEndTimeMillis,s=e.backoffCount;return void 0===r&&(r=Zg),(0,fr.mG)(this,void 0,void 0,(function(){var e,a,u,c,h,l,f;return(0,fr.Jh)(this,(function(p){switch(p.label){case 0:e=t.appId,a=t.measurementId,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,nm(n,o)];case 2:return p.sent(),[3,4];case 3:if(u=p.sent(),a)return Kg.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:e,measurementId:a}];throw u;case 4:return p.trys.push([4,6,,7]),[4,tm(t)];case 5:return c=p.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(!function(t){if(!(t instanceof i.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h=p.sent())){if(r.deleteThrottleMetadata(e),a)return Kg.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:e,measurementId:a}];throw h}return l=503===Number(h.customData.httpStatus)?(0,i.$s)(s,r.intervalMillis,30):(0,i.$s)(s,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+l,backoffCount:s+1},r.setThrottleMetadata(e,f),Kg.debug("Calling attemptFetch again in "+l+" millis"),[2,em(t,f,n,r)];case 7:return[2]}}))}))}function nm(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Xg.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var rm=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();var im,om,sm={},am=[],um={},cm="dataLayer",hm="gtag",lm=!1;function fm(t){if(lm)throw Xg.create("already-initialized");t.dataLayerName&&(cm=t.dataLayerName),t.gtagName&&(hm=t.gtagName)}function pm(t,e){!function(){var t=[];if((0,i.ru)()&&t.push("This is a browser extension environment."),(0,i.zI)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Xg.create("invalid-analytics-context",{errorInfo:e});Kg.warn(n.message)}}();var n=t.options.appId;if(!n)throw Xg.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Xg.create("no-api-key");Kg.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=sm[n])throw Xg.create("already-exists",{id:n});if(!lm){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(cm);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return(0,fr.mG)(this,void 0,void 0,(function(){var a;return(0,fr.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Gg.EVENT?[3,2]:[4,Qg(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==Gg.CONFIG?[3,4]:[4,Jg(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(Gg.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),Kg.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(sm,am,um,cm,hm),o=r.wrappedGtag,s=r.gtagCore;om=o,im=s,lm=!0}return sm[n]=function(t,e,n,r,o,s){return(0,fr.mG)(this,void 0,void 0,(function(){var a,u,c,h,l,f,p;return(0,fr.Jh)(this,(function(d){switch(d.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=Zg),(0,fr.mG)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u=this;return(0,fr.Jh)(this,(function(c){if(n=t.options,r=n.appId,i=n.apiKey,o=n.measurementId,!r)throw Xg.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw Xg.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new rm,setTimeout((function(){return(0,fr.mG)(u,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){return a.abort(),[2]}))}))}),6e4),[2,em({appId:r,apiKey:i,measurementId:o},s,a,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Kg.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Kg.error(t)})),e.push(a),u=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t;return(0,fr.Jh)(this,(function(e){switch(e.label){case 0:return(0,i.hl)()?[3,1]:(Kg.warn(Xg.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,(0,i.eu)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Kg.warn(Xg.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,u])];case 1:return c=d.sent(),h=c[0],l=c[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Hg))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=Hg+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(s,h.measurementId),o("js",new Date),(p={}).origin="firebase",p.update=!0,f=p,null!=l&&(f.firebase_id=l),o(Gg.CONFIG,h.measurementId,f),[2,h.measurementId]}}))}))}(t,am,um,e,im,cm),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return(0,fr.mG)(this,void 0,void 0,(function(){var o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(Gg.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=(0,fr.pi)((0,fr.pi)({},r),{send_to:o}),t(Gg.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(om,sm[n],t,e,r).catch((function(t){return Kg.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Gg.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Gg.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(om,sm[n],t,e).catch((function(t){return Kg.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Gg.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Gg.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(om,sm[n],t,e).catch((function(t){return Kg.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return(0,fr.mG)(this,void 0,void 0,(function(){var i,o,s,a,u;return(0,fr.Jh)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(Gg.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(Gg.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(om,sm[n],t,e).catch((function(t){return Kg.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(sm[n],t).catch((function(t){return Kg.error(t)}))},INTERNAL:{delete:function(){return delete sm[n],Promise.resolve()}}}}var dm="analytics";function vm(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:if((0,i.ru)())return[2,!1];if(!(0,i.zI)())return[2,!1];if(!(0,i.hl)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,i.eu)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new Fp.wA(dm,(function(t){return pm(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:fm,EventName:zg,isSupported:vm})),t.INTERNAL.registerComponent(new Fp.wA("analytics-internal",(function(t){try{return{logEvent:t.getProvider(dm).getImmediate().logEvent}}catch(t){throw Xg.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.4")}(t.Z);var ym,gm=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),mm=((ym={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",ym["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",ym["registration-api-key"]="Undefined API key. Check Firebase app initialization.",ym["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",ym["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",ym["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",ym["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",ym["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",ym["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",ym["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',ym["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',ym["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",ym["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",ym),bm=new i.LL("remoteconfig","Remote Config",mm),wm=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b;return(0,fr.Jh)(this,(function(w){switch(w.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=w.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===_&&(_=navigator),_.languages&&_.languages[0]||_.language)},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),w.label=2;case 2:return w.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return w.sent(),[4,c];case 4:return l=w.sent(),[3,6];case 5:throw f=w.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),bm.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,w.label=7;case 7:return w.trys.push([7,9,,10]),[4,l.json()];case 8:return m=w.sent(),[3,10];case 9:throw b=w.sent(),bm.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:y=m.entries,g=m.state,w.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?d=500:"NO_CHANGE"===g?d=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(y={}),304!==d&&200!==d)throw bm.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:y}]}var _}))}))},t}(),_m=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Em=["1","true","t","yes","y","on"],Sm=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&Em.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),Im=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=r.in.DEBUG;break;case"silent":this._logger.logLevel=r.in.SILENT;break;default:this._logger.logLevel=r.in.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r=this;return(0,fr.Jh)(this,(function(o){switch(o.label){case 0:t=new _m,setTimeout((function(){return(0,fr.mG)(r,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return e=o.sent(),n=function(t,e){return t instanceof i.ZR&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw o.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return(0,fr.mG)(this,void 0,void 0,(function(){return(0,fr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys((0,fr.pi)((0,fr.pi)({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Sm("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Sm("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Sm("static"))},t}();function Tm(t,e){var n=t.target.error||void 0;return bm.create(e,{originalErrorMessage:n&&n.message})}var Cm="app_namespace_store",km=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(Tm(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(Cm,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Cm],"readonly").objectStore(Cm),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(Tm(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(bm.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return(0,fr.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,fr.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([Cm],"readwrite").objectStore(Cm),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(Tm(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(bm.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,fr.Jh)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Cm],"readwrite").objectStore(Cm),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(Tm(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(t){i(bm.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),Am=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,fr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i,o;return(0,fr.Jh)(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function Nm(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(bm.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var xm,Om,Pm=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,fr.mG)(this,void 0,void 0,(function(){var e;return(0,fr.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,fr.mG)(this,void 0,void 0,(function(){var e,o,s;return(0,fr.Jh)(this,(function(a){switch(a.label){case 0:return[4,Nm(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof i.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o=a.sent()))throw o;return s={throttleEndTimeMillis:Date.now()+(0,i.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(s)];case 6:return a.sent(),[2,this.attemptFetch(t,s)];case 7:return[2]}}))}))},t}(),Rm="@firebase/remote-config";(xm=t.Z).INTERNAL.registerComponent(new Fp.wA("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw bm.create("registration-window");var o=n.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw bm.create("registration-project-id");if(!a)throw bm.create("registration-api-key");if(!u)throw bm.create("registration-app-id");e=e||"firebase";var c=new km(u,n.name,e),h=new Am(c),l=new r.Yd(Rm);l.logLevel=r.in.ERROR;var f=new wm(i,xm.SDK_VERSION,e,s,a,u),p=new Pm(f,c),d=new gm(p,c,h,l),v=new Im(n,d,h,c,l);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),xm.registerVersion(Rm,"0.1.31"),t.Z.registerVersion("firebase","8.2.9","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),t.Z.registerVersion("firebase","8.2.9");var Dm=new Uint8Array(16);function Mm(){if(!Om&&!(Om="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Om(Dm)}const Lm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Fm=function(t){return"string"==typeof t&&Lm.test(t)};for(var jm=[],Um=0;Um<256;++Um)jm.push((Um+256).toString(16).substr(1));var Vm="https://js.stripe.com/v3",Bm=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,qm="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Gm=null,zm=function(t,e,n){if(null===t)return null;var r=t.apply(void 0,e);return function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.13.2",startTime:e})}(r,n),r},Hm=Promise.resolve().then((function(){return t=null,null!==Gm?Gm:Gm=new Promise((function(e,n){if("undefined"!=typeof window)if(window.Stripe&&t&&console.warn(qm),window.Stripe)e(window.Stripe);else try{var r=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Vm,'"]')),e=0;e<t.length;e++){var n=t[e];if(Bm.test(n.src))return n}return null}();r&&t?console.warn(qm):r||(r=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Vm).concat(e);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(t)),r.addEventListener("load",(function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(t){return void n(t)}else e(null)}));var t})),Wm=!1;Hm.catch((function(t){Wm||console.warn(t)}));var Km=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Wm=!0;var r=Date.now();return Hm.then((function(t){return zm(t,e,r)}))},Jm=n(4536),Qm=n.n(Jm),Ym=n(7823);function Xm(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,i)}function Zm(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){Xm(o,r,i,s,a,"next",t)}function a(t){Xm(o,r,i,s,a,"throw",t)}s(void 0)}))}}Ym.Manager,Ym.Socket;var $m,tb,eb="mt",nb="PROVIDER_GOOGLE",rb="MISSING_ENV_VAR".MONCON_API_BASE_URL,ib=Ym("MISSING_ENV_VAR".MONCON_API_BASE_URL_SOCKET),ob={apiKey:"MISSING_ENV_VAR".FIREBASE_API_KEY,authDomain:"MISSING_ENV_VAR".FIREBASE_AUTH_DOMAIN,projectId:"MISSING_ENV_VAR".FIREBASE_PROJECT_ID,storageBucket:"MISSING_ENV_VAR".FIREBASE_STORAGE_BUCKET,messagingSenderId:"MISSING_ENV_VAR".FIREBASE_MESSAGING_SENDER_ID,appId:"MISSING_ENV_VAR".FIREBASE_APP_ID},sb=document.currentScript.src,ab=sb.substring(sb.indexOf("?")),ub=new URLSearchParams(ab).get("id"),cb=function(t,e,n){var r=(t=t||{}).random||(t.rng||Mm)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(jm[t[e+0]]+jm[t[e+1]]+jm[t[e+2]]+jm[t[e+3]]+"-"+jm[t[e+4]]+jm[t[e+5]]+"-"+jm[t[e+6]]+jm[t[e+7]]+"-"+jm[t[e+8]]+jm[t[e+9]]+"-"+jm[t[e+10]]+jm[t[e+11]]+jm[t[e+12]]+jm[t[e+13]]+jm[t[e+14]]+jm[t[e+15]]).toLowerCase();if(!Fm(n))throw TypeError("Stringified UUID is invalid");return n}(r)}(),hb=window.location.protocol+"//"+window.location.host+window.location.pathname,lb=!1;function fb(e,n){var r=rb+"/js/pageview?publisherId="+encodeURIComponent(ub)+"&url="+encodeURIComponent(hb)+"&sessionId="+cb;e&&(r+="&userId="+encodeURIComponent(e)),n&&(r+="&justPurchased=true"),fetch(r).then((function(t){return t.json()})).then((function(e){var n=e.isPremium,r=e.isLoggedIn,i=e.isPurchased,o=e.userBalance;n&&!i?(tb=e.content,document.getElementById("moncon-block").style.display="block",lb?r?i||($m=t.Z.auth().currentUser,o<tb.amount?function(){_b.apply(this,arguments)}():Eb()):bb():function(){var t=new(Qm())({width:300,height:300,type:"svg",data:"You're of age?",image:"https://pbs.twimg.com/profile_images/1356260647642796035/qPlwhss9_400x400.jpg",dotsOptions:{type:"dots",color:"#6a1a4c"},cornersSquareOptions:{type:"extra-rounded",color:"#000000"},backgroundOptions:{color:"#e9ebee"},imageOptions:{crossOrigin:"anonymous",margin:20}}),e='  \n  \n  <div id="moncon-step1-logo">\n      <span></span>\n      <img src="'.concat("MISSING_ENV_VAR".MONCON_CDN_BASE_URL,'/images/moncon_negro.png" />\n    </div>    \n    <div id="moncon-step1-title">\n    Escnear  QR para verificar si es mayor de  edad.\n    </div>\n    <div id="canvas"></div>  \n    <div id="moncon-step1-description">\n    descargar moncon Smartwallet.\n    </div>    \n    <div id="moncon-step1-button">\n      <button>Desbloquear con Moncon \n    </div>\n  '),n=document.createElement("div");n.id="moncon-step1",n.innerHTML=e.trim(),document.getElementById("moncon-content").appendChild(n),t.append(document.getElementById("canvas")),document.getElementById("moncon-step1-button").children[0].onclick=function(){lb=!0,bb()}}()):document.getElementById("moncon-block").style.display="none"}))}function pb(){vb(nb)}function db(){vb("PROVIDER_FACEBOOK")}function vb(e){var n=e===nb?new t.Z.auth.GoogleAuthProvider:new t.Z.auth.FacebookAuthProvider;t.Z.auth().signInWithPopup(n).then((function(t){return console.log("OK",t),t.additionalUserInfo.isNewUser?t.user.getIdToken().then((function(t){return fetch(rb+"/register/setCustomClaims",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({token:t,claim:"user"})})})).then((function(){t.user.getIdTokenResult(!0).then((function(t){localStorage.setItem(eb,t.token),fb(t.claims.user_id)}))})):t.user.getIdTokenResult().then((function(t){localStorage.setItem(eb,t.token),fb(t.claims.user_id)})),!1})).catch((function(t){t.code;var e=t.message;console.log("NOK",e),alert(e)}))}function yb(){var e=localStorage.getItem(eb);fetch(rb+"/user/purchase",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({publisherId:ub,contentId:tb.id})}).then((function(){fb(t.Z.auth().currentUser.uid,!0)}))}function gb(){var t=localStorage.getItem(eb);fetch(rb+"/user/payment",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:$m.uid})}).then((function(){Eb()}))}function mb(){return new Intl.NumberFormat(navigator.language||"en-US",{style:"currency",currency:tb.currency}).format(tb.amount||0)}function bb(){var t='\n    <div id="moncon-step1-logo">\n      <span></span>\n      <img src="'.concat("MISSING_ENV_VAR".MONCON_CDN_BASE_URL,'/images/moncon_negro.png" />\n    </div>\n    <div id="moncon-step1-title">\n      Desbloquea este contenido con Moncon Wallet\n    </div>\n    <div id="moncon-step1-description">\n      Tu nico login para consumir contenido en miles de pginas.\n    </div>\n    <div id="moncon-step1-button">\n      <button>Desbloquear con Moncon | ').concat(mb(),"\n    </div>\n  "),e=document.createElement("div");e.id="moncon-step1",e.innerHTML=t.trim();var n=document.getElementById("moncon-content");n.innerHTML="",n.appendChild(e),document.getElementById("moncon-step1-button").children[0].onclick=wb}function wb(){var t='\n    <div id="moncon-step2-logo">\n      <span></span>\n      <img src="'.concat("MISSING_ENV_VAR".MONCON_CDN_BASE_URL,'/images/moncon_negro.png" />\n    </div>\n    <div id="moncon-step2-image">\n      <span></span>\n      <img src="').concat("MISSING_ENV_VAR".MONCON_CDN_BASE_URL,'/images/wallet.png" />\n    </div>\n    <div id="moncon-step2-title">\n      Carga tu wallet y desbloquea contenido en miles de pginas web.\n    </div>\n    <div id="moncon-step2-description">\n      Con Moncon hemos eliminado las tasas de pago haciendo el pago ms justo para todos\n    </div>\n    <div id="moncon-step-login-buttons">\n      <button id="moncon-step-login-button-facebook">Login with Facebook</button>\n      <button id="moncon-step-login-button-google">Login with Google</button>\n    </div>\n  '),e=document.createElement("div");e.id="moncon-step2",e.innerHTML=t.trim();var n=document.getElementById("moncon-content");n.innerHTML="",n.appendChild(e),console.log(document.getElementById("moncon-step-login-buttons").children),document.getElementById("moncon-step-login-buttons").children[0].onclick=db,document.getElementById("moncon-step-login-buttons").children[1].onclick=pb}function _b(){return(_b=Zm(regeneratorRuntime.mark((function t(){var e,n,r,i,o,s,a,u,c,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem(eb),t.next=3,fetch(rb+"/user/paymentIntent",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,i=r.clientSecret,o='\n    <div id="moncon-step-payment">\n      <div id="moncon-step-payment-logo">\n        <span></span>\n        <img src="'.concat("MISSING_ENV_VAR".MONCON_CDN_BASE_URL,'/images/moncon_negro.png" />\n      </div>\n      <div id="moncon-step-payment-title">\n        Paga nicamente por el contenido que quieres ver\n      </div>\n      <div id="moncon-step-payment-card">\n        <div id="moncon-card-element"></div>\n        <div id="moncon-card-errors" role="alert"></div>\n      </div>\n      <button id="moncon-button-payment">Continue</button>\n    </div>\n  '),(s=document.createElement("div")).id="moncon-step-payment",s.innerHTML=o.trim(),(a=document.getElementById("moncon-content")).innerHTML="",a.appendChild(s),t.next=17,Km("pk_test_51IdgLBLiMNqW7vW7fNZcufkfQSHDqHk7aPeGJeiNt8Z9ain19s3F1NlIbKXiorkyFl0K5d5IVA8GaAtAIqMBwkca00xhPEK3UX");case 17:u=t.sent,c=u.elements(),(h=c.create("card",{hidePostalCode:!0})).mount("#moncon-card-element"),h.on("change",(function(t){var e=t.error;document.getElementById("moncon-card-errors").textContent=e?e.message:""})),document.getElementById("moncon-button-payment").addEventListener("click",(function(){u.confirmCardPayment(i,{payment_method:{card:h,billing_details:{name:$m.email}}}).then((function(t){t.error?console.log(t.error.message):"succeeded"===t.paymentIntent.status&&(console.log("PAYMENT OK"),gb())}))}));case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Eb(){var t='\n    <div id="moncon-step3-header">\n      <div id="moncon-step3-header-premium">\n        <img src="'.concat("MISSING_ENV_VAR".MONCON_CDN_BASE_URL,'/images/padlock.png" />\n        <span>Contenido Premium</span>\n      </div>\n      <div id="moncon-step3-header-user">\n        <span>').concat($m.displayName,'</span>\n        <img src="').concat($m.photoURL||"MISSING_ENV_VAR".MONCON_CDN_BASE_URL+"/images/user.png",'">\n      </div>\n    </div>\n    <div id="moncon-step3-logo">\n      <span></span>\n      <img src="').concat("MISSING_ENV_VAR".MONCON_CDN_BASE_URL,'/images/moncon_negro.png" />\n    </div>\n    <div id="moncon-step3-text">\n      Soporta el periodismo de calidad.\n    </div>\n    <div id="moncon-step3-button">\n      <button><span style="margin-right: 20px">Desbloquea este artculo</span><span>').concat(mb(),"</span>\n    </div>\n  "),e=document.createElement("div");e.id="moncon-step3",e.innerHTML=t.trim();var n=document.getElementById("moncon-content");n.innerHTML="",n.appendChild(e),document.getElementById("moncon-step3-button").children[0].onclick=yb}ib.on("connect",(function(){console.log(ib.id),ib.emit("webCredentialRequest",{age:30,credentials:[1e7*Math.random()]})})),ib.on("disconnect",(function(){setIsConnected(!1)}));var Sb=document.createElement("div");Sb.id="moncon-block",Sb.style.height=document.body.offsetHeight+"px",Sb.innerHTML='\n  <div id="moncon-wrapper">\n    <div id="moncon-content"></div>\n  </div>\n'.trim(),document.body.appendChild(Sb),t.Z.initializeApp(ob);var Ib=!0;t.Z.auth().onAuthStateChanged((function(t){Ib&&(Ib=!1,fb(null==t?void 0:t.uid))}))})()})();